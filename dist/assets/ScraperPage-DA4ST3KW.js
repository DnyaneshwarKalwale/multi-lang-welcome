import{c as It,d as qe,j as e,p as Tt,a as we,f as Et,h as As,g as $t,b as Ls,e as Ps}from"./ui-vendor-yLFRes2f.js";import{r as d,R as V,u as Rs}from"./react-vendor-DWSrZqKN.js";import{k as fe,b4 as Fs,G as Ze,m as Ke,aA as Oe,aB as Be,aC as We,s as me,l as At,aX as Ie,R as Lt,a3 as Ye,a4 as He,a5 as pe,q as zs,a as Ms,aI as Us,b as T,aq as ie,ar as xe,as as ve,at as wt,au as oe,aR as ke,L as ye,T as Ue,ax as Ds,N as Vs,a7 as jt,aV as Se,aF as Ce,aw as Os,A as Nt,n as De,i as Bs,g as Ws,I as Ys,J as Ve,X as Pt,a6 as kt,F as he,a$ as Hs,b5 as Gs,D as St,b6 as Js}from"./index-BbVnkZPX.js";import{a as ae}from"./utils-vendor-DFcOAB1P.js";import{C as Ge}from"./checkbox-wVjuTiI7.js";import{H as Rt}from"./heart-BUmlKNHk.js";import{T as qs,R as Zs}from"./text-DQsyVA_o.js";import{F as _e}from"./folder-BkqsNHSV.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=fe("ListFilter",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=fe("MessagesSquare",[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2z",key:"p1xzt8"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1",key:"1cx29u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=fe("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=fe("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=fe("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ta=fe("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);var Ee="Collapsible",[sa,zt]=It(Ee),[aa,Xe]=sa(Ee),Mt=d.forwardRef((s,i)=>{const{__scopeCollapsible:h,open:a,defaultOpen:f,disabled:r,onOpenChange:n,...p}=s,[N,y]=qe({prop:a,defaultProp:f??!1,onChange:n,caller:Ee});return e.jsx(aa,{scope:h,disabled:r,contentId:Tt(),open:N,onOpenToggle:d.useCallback(()=>y(g=>!g),[y]),children:e.jsx(we.div,{"data-state":et(N),"data-disabled":r?"":void 0,...p,ref:i})})});Mt.displayName=Ee;var Ut="CollapsibleTrigger",Dt=d.forwardRef((s,i)=>{const{__scopeCollapsible:h,...a}=s,f=Xe(Ut,h);return e.jsx(we.button,{type:"button","aria-controls":f.contentId,"aria-expanded":f.open||!1,"data-state":et(f.open),"data-disabled":f.disabled?"":void 0,disabled:f.disabled,...a,ref:i,onClick:Et(s.onClick,f.onOpenToggle)})});Dt.displayName=Ut;var Qe="CollapsibleContent",Vt=d.forwardRef((s,i)=>{const{forceMount:h,...a}=s,f=Xe(Qe,s.__scopeCollapsible);return e.jsx(As,{present:h||f.open,children:({present:r})=>e.jsx(ra,{...a,ref:i,present:r})})});Vt.displayName=Qe;var ra=d.forwardRef((s,i)=>{const{__scopeCollapsible:h,present:a,children:f,...r}=s,n=Xe(Qe,h),[p,N]=d.useState(a),y=d.useRef(null),g=$t(i,y),u=d.useRef(0),k=u.current,C=d.useRef(0),$=C.current,R=n.open||p,F=d.useRef(R),M=d.useRef(void 0);return d.useEffect(()=>{const S=requestAnimationFrame(()=>F.current=!1);return()=>cancelAnimationFrame(S)},[]),Ls(()=>{const S=y.current;if(S){M.current=M.current||{transitionDuration:S.style.transitionDuration,animationName:S.style.animationName},S.style.transitionDuration="0s",S.style.animationName="none";const B=S.getBoundingClientRect();u.current=B.height,C.current=B.width,F.current||(S.style.transitionDuration=M.current.transitionDuration,S.style.animationName=M.current.animationName),N(a)}},[n.open,a]),e.jsx(we.div,{"data-state":et(n.open),"data-disabled":n.disabled?"":void 0,id:n.contentId,hidden:!R,...r,ref:g,style:{"--radix-collapsible-content-height":k?`${k}px`:void 0,"--radix-collapsible-content-width":$?`${$}px`:void 0,...s.style},children:R&&f})});function et(s){return s?"open":"closed"}var na=Mt,la=Dt,ia=Vt,re="Accordion",oa=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[tt,ca,da]=Ps(re),[$e,Da]=It(re,[da,zt]),st=zt(),Ot=V.forwardRef((s,i)=>{const{type:h,...a}=s,f=a,r=a;return e.jsx(tt.Provider,{scope:s.__scopeAccordion,children:h==="multiple"?e.jsx(xa,{...r,ref:i}):e.jsx(ua,{...f,ref:i})})});Ot.displayName=re;var[Bt,ma]=$e(re),[Wt,ha]=$e(re,{collapsible:!1}),ua=V.forwardRef((s,i)=>{const{value:h,defaultValue:a,onValueChange:f=()=>{},collapsible:r=!1,...n}=s,[p,N]=qe({prop:h,defaultProp:a??"",onChange:f,caller:re});return e.jsx(Bt,{scope:s.__scopeAccordion,value:V.useMemo(()=>p?[p]:[],[p]),onItemOpen:N,onItemClose:V.useCallback(()=>r&&N(""),[r,N]),children:e.jsx(Wt,{scope:s.__scopeAccordion,collapsible:r,children:e.jsx(Yt,{...n,ref:i})})})}),xa=V.forwardRef((s,i)=>{const{value:h,defaultValue:a,onValueChange:f=()=>{},...r}=s,[n,p]=qe({prop:h,defaultProp:a??[],onChange:f,caller:re}),N=V.useCallback(g=>p((u=[])=>[...u,g]),[p]),y=V.useCallback(g=>p((u=[])=>u.filter(k=>k!==g)),[p]);return e.jsx(Bt,{scope:s.__scopeAccordion,value:n,onItemOpen:N,onItemClose:y,children:e.jsx(Wt,{scope:s.__scopeAccordion,collapsible:!0,children:e.jsx(Yt,{...r,ref:i})})})}),[pa,Ae]=$e(re),Yt=V.forwardRef((s,i)=>{const{__scopeAccordion:h,disabled:a,dir:f,orientation:r="vertical",...n}=s,p=V.useRef(null),N=$t(p,i),y=ca(h),u=Fs(f)==="ltr",k=Et(s.onKeyDown,C=>{var o;if(!oa.includes(C.key))return;const $=C.target,R=y().filter(_=>{var D;return!((D=_.ref.current)!=null&&D.disabled)}),F=R.findIndex(_=>_.ref.current===$),M=R.length;if(F===-1)return;C.preventDefault();let S=F;const B=0,A=M-1,J=()=>{S=F+1,S>A&&(S=B)},X=()=>{S=F-1,S<B&&(S=A)};switch(C.key){case"Home":S=B;break;case"End":S=A;break;case"ArrowRight":r==="horizontal"&&(u?J():X());break;case"ArrowDown":r==="vertical"&&J();break;case"ArrowLeft":r==="horizontal"&&(u?X():J());break;case"ArrowUp":r==="vertical"&&X();break}const z=S%M;(o=R[z].ref.current)==null||o.focus()});return e.jsx(pa,{scope:h,disabled:a,direction:f,orientation:r,children:e.jsx(tt.Slot,{scope:h,children:e.jsx(we.div,{...n,"data-orientation":r,ref:N,onKeyDown:a?void 0:k})})})}),Te="AccordionItem",[ga,at]=$e(Te),Ht=V.forwardRef((s,i)=>{const{__scopeAccordion:h,value:a,...f}=s,r=Ae(Te,h),n=ma(Te,h),p=st(h),N=Tt(),y=a&&n.value.includes(a)||!1,g=r.disabled||s.disabled;return e.jsx(ga,{scope:h,open:y,disabled:g,triggerId:N,children:e.jsx(na,{"data-orientation":r.orientation,"data-state":Xt(y),...p,...f,ref:i,disabled:g,open:y,onOpenChange:u=>{u?n.onItemOpen(a):n.onItemClose(a)}})})});Ht.displayName=Te;var Gt="AccordionHeader",Jt=V.forwardRef((s,i)=>{const{__scopeAccordion:h,...a}=s,f=Ae(re,h),r=at(Gt,h);return e.jsx(we.h3,{"data-orientation":f.orientation,"data-state":Xt(r.open),"data-disabled":r.disabled?"":void 0,...a,ref:i})});Jt.displayName=Gt;var Je="AccordionTrigger",qt=V.forwardRef((s,i)=>{const{__scopeAccordion:h,...a}=s,f=Ae(re,h),r=at(Je,h),n=ha(Je,h),p=st(h);return e.jsx(tt.ItemSlot,{scope:h,children:e.jsx(la,{"aria-disabled":r.open&&!n.collapsible||void 0,"data-orientation":f.orientation,id:r.triggerId,...p,...a,ref:i})})});qt.displayName=Je;var Zt="AccordionContent",Kt=V.forwardRef((s,i)=>{const{__scopeAccordion:h,...a}=s,f=Ae(re,h),r=at(Zt,h),n=st(h);return e.jsx(ia,{role:"region","aria-labelledby":r.triggerId,"data-orientation":f.orientation,...n,...a,ref:i,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...s.style}})});Kt.displayName=Zt;function Xt(s){return s?"open":"closed"}var fa=Ot,ba=Ht,va=Jt,Qt=qt,es=Kt;const ya=fa,ts=d.forwardRef(({className:s,...i},h)=>e.jsx(ba,{ref:h,className:Ze("border-b",s),...i}));ts.displayName="AccordionItem";const ss=d.forwardRef(({className:s,children:i,...h},a)=>e.jsx(va,{className:"flex",children:e.jsxs(Qt,{ref:a,className:Ze("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...h,children:[i,e.jsx(Ke,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));ss.displayName=Qt.displayName;const as=d.forwardRef(({className:s,children:i,...h},a)=>e.jsx(es,{ref:a,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...h,children:e.jsx("div",{className:Ze("pb-4 pt-0",s),children:i})}));as.displayName=es.displayName;const wa=s=>{const i=new Map,h=new Map,a=new Set;s.forEach(n=>h.set(n.id,n)),console.log(`Organizing ${s.length} tweets into threads`);const f=new Map;s.forEach(n=>{if(n.is_self_thread&&n.conversation_id)f.has(n.conversation_id)||f.set(n.conversation_id,new Set),f.get(n.conversation_id).add(n.id),n.in_reply_to_tweet_id&&h.has(n.in_reply_to_tweet_id)&&f.get(n.conversation_id).add(n.in_reply_to_tweet_id);else if(n.in_reply_to_tweet_id&&n.in_reply_to_user_id){const p=h.get(n.in_reply_to_tweet_id);if(p&&p.author.id===n.author.id){const N=n.conversation_id||n.thread_id||n.in_reply_to_tweet_id;f.has(N)||f.set(N,new Set),f.get(N).add(n.id),f.get(N).add(n.in_reply_to_tweet_id)}}}),f.forEach((n,p)=>{if(n.size>1){console.log(`Found self-thread with ID ${p} containing ${n.size} tweets`);const N=Array.from(n).map(y=>h.get(y)).filter(y=>y!==void 0);N.sort((y,g)=>{if(y.thread_position!==void 0&&g.thread_position!==void 0)return y.thread_position-g.thread_position;if(y.thread_index!==void 0&&g.thread_index!==void 0)return y.thread_index-g.thread_index;try{return new Date(y.created_at).getTime()-new Date(g.created_at).getTime()}catch{return Number(BigInt(y.id)-BigInt(g.id))}}),N.length>1&&(N.forEach((y,g)=>{y.thread_position=g,y.thread_index=g,a.add(y.id)}),i.set(p,N))}}),s.forEach(n=>{if(a.has(n.id))return;const p=n.conversation_id||n.thread_id||n.id,N=s.filter(k=>!a.has(k.id)&&(k.conversation_id&&k.conversation_id===p||k.thread_id&&k.thread_id===p||k.in_reply_to_tweet_id&&h.has(k.in_reply_to_tweet_id)&&k.author.id===n.author.id));if(N.length<=1){a.add(n.id),i.has("standalone")||i.set("standalone",[]),i.get("standalone").push(n);return}const y=[],g=new Map;N.forEach(k=>{k.in_reply_to_tweet_id&&(g.has(k.in_reply_to_tweet_id)||g.set(k.in_reply_to_tweet_id,[]),g.get(k.in_reply_to_tweet_id).push(k))});let u=N.find(k=>!k.in_reply_to_tweet_id||!N.some(C=>C.id===k.in_reply_to_tweet_id));if(u||(N.sort((k,C)=>{try{return new Date(k.created_at).getTime()-new Date(C.created_at).getTime()}catch{return Number(BigInt(k.id)-BigInt(C.id))}}),u=N[0]),u){y.push(u),a.add(u.id);const k=(C,$=0)=>{if($>10)return[];if(!g.has(C))return[];const R=[],F=g.get(C).sort((M,S)=>{try{return new Date(M.created_at).getTime()-new Date(S.created_at).getTime()}catch{return Number(BigInt(M.id)-BigInt(S.id))}});for(const M of F)a.has(M.id)||(R.push(M),a.add(M.id),R.push(...k(M.id,$+1)));return R};y.push(...k(u.id))}else{const k=[...N].sort((C,$)=>{try{return new Date(C.created_at).getTime()-new Date($.created_at).getTime()}catch{return Number(BigInt(C.id)-BigInt($.id))}});y.push(...k),k.forEach(C=>a.add(C.id))}y.length>1?(y.forEach((k,C)=>{k.thread_position=C,k.thread_index=C}),i.set(p,y)):y.length===1&&(i.has("standalone")||i.set("standalone",[]),i.get("standalone").push(y[0]))}),s.forEach(n=>{a.has(n.id)||(i.has("standalone")||i.set("standalone",[]),i.get("standalone").push(n),a.add(n.id))});const r=[];return i.forEach((n,p)=>{p==="standalone"?r.push(...n):n.length>1&&r.push({id:p,tweets:n,author:n[0].author,created_at:n[0].created_at})}),console.log(`Organized tweets into ${r.filter(n=>"tweets"in n).length} threads and ${r.filter(n=>!("tweets"in n)).length} standalone tweets`),r.sort((n,p)=>{const N="tweets"in n?new Date(n.tweets[0].created_at).getTime():new Date(n.created_at).getTime();return("tweets"in p?new Date(p.tweets[0].created_at).getTime():new Date(p.created_at).getTime())-N})},rs=({media:s})=>!s||s.length===0?null:s.length>1?e.jsx("div",{className:`grid gap-2 mt-4 rounded-xl overflow-hidden ${s.length===2||s.length===3,"grid-cols-2"}`,children:s.map((i,h)=>e.jsx("div",{className:`${s.length===3&&h===0?"row-span-2":s.length===4&&h<2?"col-span-1":""} overflow-hidden relative`,children:e.jsx(Ct,{media:i})},i.media_key))}):e.jsx("div",{className:"mt-4 rounded-xl overflow-hidden relative",children:e.jsx(Ct,{media:s[0]})}),Ct=({media:s})=>{var g;const[i,h]=d.useState(!1),[a,f]=d.useState(!1),r=d.useRef(null);d.useEffect(()=>{s.type==="photo"&&r.current&&r.current.complete&&h(!0)},[s.type]);const n=()=>{h(!0)},p=()=>{f(!0),console.error(`Failed to load media: ${s.url}`)},y=((g=s.url)==null?void 0:g.includes("profile_images"))?"profile-media-container":"media-container";return s.type==="video"||s.type==="animated_gif"?e.jsxs("div",{className:"media-container relative",children:[!i&&e.jsx("div",{className:"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center",children:e.jsx("span",{className:"text-sm text-gray-600",children:"Loading video..."})}),e.jsx("video",{ref:r,src:s.url,poster:s.preview_image_url,controls:s.type==="video",autoPlay:s.type==="animated_gif",loop:s.type==="animated_gif",muted:s.type==="animated_gif",playsInline:!0,className:"w-full h-auto object-contain",onLoadedData:n,onError:p}),a&&e.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:e.jsx("span",{className:"text-sm text-gray-500",children:"Video unavailable"})})]}):e.jsxs("div",{className:y+" relative",children:[e.jsx("img",{ref:r,src:s.url,alt:s.alt_text||"Tweet media",loading:"lazy",className:`w-full transition-opacity duration-500 ${i?"opacity-100":"opacity-0"}`,onLoad:n,onError:p}),!i&&!a&&e.jsx("div",{className:"absolute inset-0 bg-gray-200 animate-pulse"}),a&&e.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:e.jsx("span",{className:"text-sm text-gray-500",children:"Image unavailable"})})]})},_t=({tweet:s,isSelected:i,onSelectToggle:h})=>{var $,R,F,M,S,B;const[a,f]=d.useState(!1),[r,n]=d.useState(null),[p,N]=d.useState(!1);d.useEffect(()=>{if(!(a||r)&&!s.savedAt&&s.full_text&&s.full_text.length>s.text.length+20){n({...s,full_text:s.full_text});return}},[s,a,r]);const y=A=>{try{const J=new Date(A),z=(new Date().getTime()-J.getTime())/(1e3*60*60);return z<1?`${Math.floor(z*60)}m`:z<24?`${Math.floor(z)}h`:`${Math.floor(z/24)}d`}catch{return A}},g=A=>{if(!A)return!1;if(A.endsWith("…")||A.endsWith("...")||A.includes("… https://")||A.includes("... https://"))return!0;const X=/[\u0900-\u097F\u0600-\u06FF\u0590-\u05FF\u3040-\u30FF\u3400-\u4DBF\u4E00-\u9FFF]/.test(A)?180:240;return A.length>=X},u=d.useMemo(()=>{const A=(r==null?void 0:r.full_text)||s.full_text||s.text||"";return g(A)||s.is_long===!0},[s,r]),k=async()=>{var A;if(p){N(!1);return}if(N(!0),s.full_text||s.text,s.full_text&&s.full_text.length>(((A=s.text)==null?void 0:A.length)||0)+10){console.log(`Using tweet's full_text property for ${s.id}`),n({...s,full_text:s.full_text});return}if(s.savedAt){console.log(`Showing saved tweet content for ${s.id}`);return}console.log(`Tweet ${s.id} expanded - showing available content`)},C=A=>{const J=r;let X="";J!=null&&J.full_text?X=J.full_text:A.full_text?X=A.full_text:X=A.text;let z=X;if(z=z.replace(/\s*(https:\/\/t\.co\/\w{10,})\s*$/g,""),/https?:\/\/(?:bit\.ly|tinyurl|goo\.gl|t\.co)\/\w+/.test(z)||(z=z.replace(/(\s*[…\.]{3,})$/g,"")),p)return z;if(u||z.length>240){const o=Math.min(220,z.length/2);let _=z.substring(0,o);const D=/https?:\/\/[^\s]+/g,L=z.match(D)||[];for(const O of L){const G=z.indexOf(O);G<o&&G+O.length>o&&(G+O.length<o+30?_=z.substring(0,G+O.length):_=z.substring(0,G))}const Y=_.lastIndexOf(" ");return Y>o*.8&&(_=_.substring(0,Y)),_+"..."}return z};return e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden w-full",children:e.jsx("div",{className:"px-3 py-3 h-full flex flex-col",children:e.jsxs("div",{className:"flex space-x-3 flex-1",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs(Oe,{className:"h-10 w-10",children:[e.jsx(Be,{src:($=s.author)==null?void 0:$.profile_image_url,alt:(R=s.author)==null?void 0:R.name,className:"object-cover"}),e.jsx(We,{className:"bg-gray-200 text-gray-600 text-sm font-medium",children:((M=(F=s.author)==null?void 0:F.name)==null?void 0:M.charAt(0))||"U"})]})}),e.jsxs("div",{className:"flex-1 min-w-0 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-1 min-w-0 text-sm",children:[e.jsx("span",{className:"font-bold text-gray-900 truncate",children:(S=s.author)==null?void 0:S.name}),e.jsxs("span",{className:"text-gray-500 text-xs",children:["@",(B=s.author)==null?void 0:B.username]}),e.jsx("span",{className:"text-gray-400 text-xs",children:"·"}),e.jsx("span",{className:"text-gray-500 text-xs",children:y(s.created_at)}),s.savedAt&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"·"}),e.jsx("span",{className:"text-green-600 text-xs bg-green-50 px-1.5 py-0.5 rounded-full font-medium",children:"Saved"})]})]}),e.jsx("div",{className:"flex items-center space-x-1 flex-shrink-0",children:e.jsx(Ge,{checked:i,onCheckedChange:()=>h(s),className:"h-4 w-4"})})]}),e.jsx("div",{className:"mb-3 flex-1",children:e.jsx("div",{className:"text-gray-900 text-sm leading-5 whitespace-pre-wrap break-words",children:a?e.jsxs("div",{className:"flex items-center text-gray-500 text-xs",children:[e.jsx(me,{className:"animate-spin h-3 w-3 mr-2"}),"Loading..."]}):e.jsxs(e.Fragment,{children:[C(s),(u||s.text.length>240)&&e.jsx("button",{onClick:k,className:"mt-2 text-blue-500 hover:text-blue-600 text-xs font-normal inline-flex items-center space-x-1 transition-colors",disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"animate-spin h-3 w-3"}),e.jsx("span",{children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:p?"Show less":"Show more"}),p?e.jsx(At,{className:"h-3 w-3"}):e.jsx(Ke,{className:"h-3 w-3"})]})})]})})}),s.media&&s.media.length>0&&e.jsx("div",{className:"mb-3 rounded-xl overflow-hidden border border-gray-200",children:e.jsx(rs,{media:s.media})}),e.jsxs("div",{className:"flex items-center justify-between max-w-xs mt-auto",children:[e.jsxs("button",{className:"flex items-center space-x-1 text-gray-400 hover:text-blue-500 hover:bg-blue-50 px-2 py-1 rounded-full transition-colors group text-xs",children:[e.jsx(Ie,{className:"h-3 w-3 group-hover:text-blue-500"}),e.jsx("span",{className:"group-hover:text-blue-500",children:s.reply_count||0})]}),e.jsxs("button",{className:"flex items-center space-x-1 text-gray-400 hover:text-green-500 hover:bg-green-50 px-2 py-1 rounded-full transition-colors group text-xs",children:[e.jsx(Lt,{className:"h-3 w-3 group-hover:text-green-500"}),e.jsx("span",{className:"group-hover:text-green-500",children:s.retweet_count||0})]}),e.jsxs("button",{className:"flex items-center space-x-1 text-gray-400 hover:text-red-500 hover:bg-red-50 px-2 py-1 rounded-full transition-colors group text-xs",children:[e.jsx(Rt,{className:"h-3 w-3 group-hover:text-red-500"}),e.jsx("span",{className:"group-hover:text-red-500",children:s.favorite_count||0})]}),e.jsxs("button",{className:"flex items-center space-x-1 text-gray-400 hover:text-blue-500 hover:bg-blue-50 px-2 py-1 rounded-full transition-colors group text-xs",children:[e.jsx(Ft,{className:"h-3 w-3 group-hover:text-blue-500"}),e.jsx("span",{className:"group-hover:text-blue-500",children:s.quote_count||0})]})]})]})]})})})},ja=({thread:s,selectedTweets:i=new Set,onSelectToggle:h=()=>{},onSelectThread:a=()=>{}})=>{var z;const[f,r]=d.useState(!0),[n,p]=d.useState(s.tweets),[N,y]=d.useState(new Set),[g,u]=d.useState(new Set),[k,C]=d.useState(new Map);if(!s||!s.tweets||s.tweets.length===0)return console.error("Thread is empty or missing tweets array"),null;d.useEffect(()=>{s.tweets.some(o=>o.savedAt)||s.tweets.forEach(o=>{o.full_text&&o.full_text.length>o.text.length+20&&(C(_=>new Map(_).set(o.id,o)),N.has(o.id)||y(_=>new Set(_).add(o.id)))})},[s.tweets]);const $=o=>{try{const _=new Date(o),L=(new Date().getTime()-_.getTime())/(1e3*60*60);return L<1?`${Math.floor(L*60)}m`:L<24?`${Math.floor(L)}h`:`${Math.floor(L/24)}d`}catch{return o}},R=s.tweets.every(o=>i.has(o.id));s.tweets.some(o=>i.has(o.id));const F=()=>{a(s,!R)},M=s.tweets[0],S=s.author||M.author,B=o=>{if(!o)return!1;if(o.endsWith("…")||o.endsWith("...")||o.includes("… https://")||o.includes("... https://"))return!0;const D=/[\u0900-\u097F\u0600-\u06FF\u0590-\u05FF\u3040-\u30FF\u3400-\u4DBF\u4E00-\u9FFF]/.test(o)?180:240;return o.length>=D},A=o=>{const _=o.full_text||o.text||"";return B(_)||o.is_long===!0},J=async o=>{var O;const _=s.tweets.find(G=>G.id===o);if(!_){console.error(`Tweet with ID ${o} not found in thread`);return}const D=new Set(N);if(N.has(o)){D.delete(o),y(D);return}D.add(o),y(D);const L=k.get(o),Y=_.full_text||_.text||"";if(L&&L.full_text&&L.full_text.length>Y.length+20){console.log(`Using existing full tweet content for ${o}`);return}if(_.full_text&&_.full_text.length>(((O=_.text)==null?void 0:O.length)||0)+10){console.log(`Using tweet's full_text property for ${o}`),C(G=>new Map(G).set(o,{..._,full_text:_.full_text}));return}if(_.savedAt){console.log(`Showing saved tweet content for ${o}`);return}console.log(`Tweet ${o} expanded - showing available content`)},X=o=>{const _=k.get(o.id);let D="";_!=null&&_.full_text?D=_.full_text:o.full_text?D=o.full_text:D=o.text;let L=D;if(L=L.replace(/\s*(https:\/\/t\.co\/\w{10,})\s*$/g,""),/https?:\/\/(?:bit\.ly|tinyurl|goo\.gl|t\.co)\/\w+/.test(L)||(L=L.replace(/(\s*[…\.]{3,})$/g,"")),N.has(o.id))return L;if(A(o)||L.length>240){const Y=Math.min(220,L.length/2);let O=L.substring(0,Y);const G=/https?:\/\/[^\s]+/g,P=L.match(G)||[];for(const ee of P){const te=L.indexOf(ee);te<Y&&te+ee.length>Y&&(te+ee.length<Y+30?O=L.substring(0,te+ee.length):O=L.substring(0,te))}const ne=O.lastIndexOf(" ");return ne>Y*.8&&(O=O.substring(0,ne)),O+"..."}return L};return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-100 bg-gray-50/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(Oe,{className:"h-8 w-8",children:[e.jsx(Be,{src:S==null?void 0:S.profile_image_url,alt:(S==null?void 0:S.name)||"Thread author",className:"object-cover"}),e.jsx(We,{className:"bg-gray-200 text-gray-600 text-xs font-medium",children:((z=S==null?void 0:S.name)==null?void 0:z.charAt(0))||"T"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-sm",children:[e.jsx("h3",{className:"font-bold text-gray-900 truncate",children:(S==null?void 0:S.name)||"Thread Author"}),e.jsxs("span",{className:"text-gray-500",children:["@",(S==null?void 0:S.username)||"user"]}),e.jsx("span",{className:"text-gray-400",children:"·"}),e.jsx("span",{className:"text-gray-500",children:$(M.created_at)})]}),e.jsx("div",{className:"flex items-center space-x-1 mt-0.5",children:e.jsxs("div",{className:"flex items-center space-x-1 text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full",children:[e.jsx("span",{className:"font-semibold",children:s.tweets.length}),e.jsx("span",{children:"tweets"})]})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ge,{checked:R,onCheckedChange:()=>F(),className:"h-4 w-4"}),e.jsx("button",{onClick:F,className:"text-xs text-gray-500 hover:text-blue-600 hover:bg-blue-50 px-2 py-1 rounded-md transition-colors",children:e.jsx(Qs,{className:"h-3 w-3"})})]})]})}),e.jsx("div",{className:"relative",children:n.map((o,_)=>{var D,L,Y,O,G,P;return e.jsxs("div",{className:"relative",children:[_<n.length-1&&e.jsx("div",{className:"absolute left-7 top-12 w-0.5 h-[calc(100%-48px)] bg-gray-300 z-0"}),e.jsx("div",{className:"relative z-10 px-4 py-3 hover:bg-gray-50/30 transition-colors",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("div",{className:"flex-shrink-0 relative",children:[e.jsxs(Oe,{className:"h-8 w-8 ring-1 ring-white relative z-10",children:[e.jsx(Be,{src:(D=o.author)==null?void 0:D.profile_image_url,alt:(L=o.author)==null?void 0:L.name,className:"object-cover"}),e.jsx(We,{className:"bg-gray-200 text-gray-600 text-xs font-medium",children:((O=(Y=o.author)==null?void 0:Y.name)==null?void 0:O.charAt(0))||"U"})]}),e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 h-4 w-4 bg-blue-500 text-white text-xs font-bold rounded-full flex items-center justify-center z-20 border border-white",children:_+1})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center space-x-1 min-w-0 text-sm",children:[e.jsx("span",{className:"font-semibold text-gray-900 truncate",children:(G=o.author)==null?void 0:G.name}),e.jsxs("span",{className:"text-gray-500 text-xs",children:["@",(P=o.author)==null?void 0:P.username]}),e.jsx("span",{className:"text-gray-400 text-xs",children:"·"}),e.jsx("span",{className:"text-gray-500 text-xs",children:$(o.created_at)})]}),e.jsx("div",{className:"flex items-center space-x-1 flex-shrink-0",children:e.jsx(Ge,{checked:i.has(o.id),onCheckedChange:()=>h(o),className:"h-3 w-3"})})]}),e.jsx("div",{className:"mb-2",children:e.jsx("div",{className:"text-gray-900 text-sm leading-5 whitespace-pre-wrap break-words",children:g.has(o.id)?e.jsxs("div",{className:"flex items-center text-gray-500 text-xs",children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-500 mr-2"}),"Loading..."]}):e.jsxs(e.Fragment,{children:[X(o),(A(o)||(o.full_text||o.text||"").length>240||k.has(o.id))&&e.jsx("button",{onClick:()=>J(o.id),className:"mt-1 text-blue-500 hover:text-blue-600 text-xs font-normal inline-flex items-center space-x-1 transition-colors",disabled:g.has(o.id),children:g.has(o.id)?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-2 w-2 border-b-2 border-blue-500"}),e.jsx("span",{children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:N.has(o.id)?"Show less":"Show more"}),N.has(o.id)?e.jsx(At,{className:"h-3 w-3"}):e.jsx(Ke,{className:"h-3 w-3"})]})})]})})}),o.media&&o.media.length>0&&e.jsx("div",{className:"mb-2 rounded-xl overflow-hidden border border-gray-200",children:e.jsx(rs,{media:o.media})}),e.jsxs("div",{className:"flex items-center justify-between max-w-xs",children:[e.jsxs("button",{className:"flex items-center space-x-1 text-gray-400 hover:text-blue-500 hover:bg-blue-50 px-2 py-1 rounded-full transition-colors group text-xs",children:[e.jsx(Ie,{className:"h-3 w-3 group-hover:text-blue-500"}),e.jsx("span",{className:"group-hover:text-blue-500",children:o.reply_count||0})]}),e.jsxs("button",{className:"flex items-center space-x-1 text-gray-400 hover:text-green-500 hover:bg-green-50 px-2 py-1 rounded-full transition-colors group text-xs",children:[e.jsx(Lt,{className:"h-3 w-3 group-hover:text-green-500"}),e.jsx("span",{className:"group-hover:text-green-500",children:o.retweet_count||0})]}),e.jsxs("button",{className:"flex items-center space-x-1 text-gray-400 hover:text-red-500 hover:bg-red-50 px-2 py-1 rounded-full transition-colors group text-xs",children:[e.jsx(Rt,{className:"h-3 w-3 group-hover:text-red-500"}),e.jsx("span",{className:"group-hover:text-red-500",children:o.favorite_count||0})]}),e.jsxs("button",{className:"flex items-center space-x-1 text-gray-400 hover:text-blue-500 hover:bg-blue-50 px-2 py-1 rounded-full transition-colors group text-xs",children:[e.jsx(Ft,{className:"h-3 w-3 group-hover:text-blue-500"}),e.jsx("span",{className:"group-hover:text-blue-500",children:o.quote_count||0})]})]})]})]})})]},o.id)})})]})},Na=({selectedCategory:s,onCategoryChange:i,tweetCounts:h={},categoryCounts:a={}})=>{const f=Object.keys(h).length>0?h:a,r=[{value:"all",label:"All Tweets",icon:e.jsx(Ks,{className:"h-4 w-4"})},{value:"normal",label:"Regular",icon:e.jsx(qs,{className:"h-4 w-4"})},{value:"thread",label:"Threads",icon:e.jsx(zs,{className:"h-4 w-4"})},{value:"long",label:"Long",icon:e.jsx(Xs,{className:"h-4 w-4"})}];return e.jsx("div",{className:"mb-6",children:e.jsx(Ye,{value:s,onValueChange:n=>i(n),children:e.jsx(He,{className:"w-full justify-start overflow-x-auto flex-nowrap px-1 bg-white border border-gray-200",children:r.map(n=>e.jsxs(pe,{value:n.value,className:"flex items-center gap-2 px-4 py-2 whitespace-nowrap text-sm data-[state=active]:bg-blue-500 data-[state=active]:text-white hover:bg-blue-50 hover:text-blue-700 data-[state=active]:hover:bg-blue-600 data-[state=active]:hover:text-white transition-colors",children:[n.icon,e.jsx("span",{children:n.label}),e.jsx("span",{className:"ml-1 rounded-full bg-gray-100 data-[state=active]:bg-blue-400 px-2 py-0.5 text-xs font-medium text-gray-700 data-[state=active]:text-white",children:f&&f[n.value]?f[n.value]:0})]},n.value))})})})},ka=({isOpen:s,onClose:i,documentUrl:h,documentTitle:a})=>{const[f,r]=d.useState(100),[n,p]=d.useState(0),[N,y]=d.useState(!1);if(V.useEffect(()=>{s&&(y(!1),r(100),p(0))},[s]),!s)return null;const g=()=>r(F=>Math.min(F+25,200)),u=()=>r(F=>Math.max(F-25,50)),k=()=>p(F=>(F+90)%360),C=()=>{const F=document.createElement("a");F.href=h,F.download=a,F.click()},$=h.includes("cloudinary.com")&&h.includes("auth_token"),R=()=>$?`${h}#toolbar=1&navpanes=1&scrollbar=1&view=FitH`:`${h}#toolbar=1&navpanes=1&scrollbar=1&view=FitH`;return e.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-75 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl h-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(he,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:a})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:u,disabled:f<=50,className:"p-2",children:e.jsx(ta,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm text-gray-600 min-w-[60px] text-center",children:[f,"%"]}),e.jsx(T,{variant:"outline",size:"sm",onClick:g,disabled:f>=200,className:"p-2",children:e.jsx(ea,{className:"h-4 w-4"})}),e.jsx(T,{variant:"outline",size:"sm",onClick:k,className:"p-2",children:e.jsx(Zs,{className:"h-4 w-4"})}),e.jsx(T,{variant:"outline",size:"sm",onClick:C,className:"p-2",children:e.jsx(St,{className:"h-4 w-4"})}),e.jsx(T,{variant:"outline",size:"sm",onClick:i,className:"p-2",children:e.jsx(Pt,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"flex-1 overflow-auto bg-gray-100 p-4",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{style:{transform:`scale(${f/100}) rotate(${n}deg)`,transformOrigin:"center top"},className:"transition-transform duration-200",children:N?e.jsxs("div",{className:"w-[800px] h-[1000px] border border-gray-300 rounded shadow-lg bg-white flex flex-col items-center justify-center",children:[e.jsx(he,{className:"h-16 w-16 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Document Preview Unavailable"}),e.jsx("p",{className:"text-sm text-gray-500 text-center mb-4 px-4",children:"This document cannot be previewed in the browser. You can download it to view the content."}),e.jsxs(T,{onClick:C,className:"flex items-center gap-2",children:[e.jsx(St,{className:"h-4 w-4"}),"Download Document"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("iframe",{src:R(),className:"w-[800px] h-[1000px] border border-gray-300 rounded shadow-lg bg-white",title:a,onLoad:F=>{const M=F.target;try{$&&setTimeout(()=>{var S;try{const B=M.contentDocument||((S=M.contentWindow)==null?void 0:S.document);(!B||B.body.innerHTML.includes("error")||B.body.innerHTML.trim()==="")&&y(!0)}catch{}},2e3)}catch{y(!0)}},onError:()=>{console.warn("PDF iframe failed to load"),y(!0)}}),$&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Loading document..."})]})})]})})})})]})})},Sa=`
  .linkedin-post-card {
    transition: all 0.2s ease-in-out;
  }
  
  .linkedin-post-card:hover {
    transform: translateY(-2px);
  }
  
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .break-words {
    word-wrap: break-word;
    word-break: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
  }
  
  .text-overflow-ellipsis {
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;
  }
  
  .snap-x {
    scroll-snap-type: x mandatory;
  }
  
  .snap-start {
    scroll-snap-align: start;
  }
  
  .carousel-dots {
    transition: all 0.2s ease;
  }
  
  .carousel-dots:hover {
    transform: scale(1.2);
  }
  
  .linkedin-post-content {
    max-width: 100%;
    overflow: hidden;
  }
  
  .linkedin-post-content p {
    margin: 0;
    line-height: 1.5;
  }
  
  .document-carousel {
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }
  
  .document-carousel:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }
`,Ca=({document:s,postId:i,onOpenPdf:h})=>{var N,y;const[a,f]=V.useState(0),r=s.coverPages||[],n=V.useCallback(()=>{const g=[];return r.forEach(u=>{u.imageUrls&&Array.isArray(u.imageUrls)?g.push(...u.imageUrls):(u.url||u.image||typeof u=="string")&&g.push(u.url||u.image||u)}),g},[r]);V.useEffect(()=>{const g=document.getElementById(`doc-carousel-${i}-${s.title}`);if(!g)return;const u=()=>{const k=g.scrollLeft,C=g.offsetWidth,$=Math.round(k/C);f($)};return g.addEventListener("scroll",u),()=>g.removeEventListener("scroll",u)},[i,s.title]);const p=g=>{const u=document.getElementById(`doc-carousel-${i}-${s.title}`);u&&u.scrollTo({left:g*u.offsetWidth,behavior:"smooth"})};return!r||r.length===0?e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50 hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>s.url&&h(s.url,s.title),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(he,{className:"h-8 w-8 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 break-words line-clamp-2",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.totalPageCount&&e.jsxs("span",{className:"text-xs text-gray-500 bg-gray-200 px-2 py-1 rounded",children:[s.totalPageCount," pages"]}),e.jsx("span",{className:"text-xs text-gray-500 bg-blue-100 text-blue-700 px-2 py-1 rounded",children:((N=s.fileType)==null?void 0:N.toUpperCase())||"PDF"})]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(T,{variant:"ghost",size:"sm",className:"text-blue-600 hover:bg-blue-50",children:"View"})})]})}):e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden bg-white document-carousel",children:[e.jsx("div",{className:"p-3 border-b border-gray-100 bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-blue-600 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 break-words line-clamp-2",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.totalPageCount&&e.jsxs("span",{className:"text-xs text-gray-500",children:[s.totalPageCount," pages"]}),e.jsx("span",{className:"text-xs text-gray-400",children:"•"}),e.jsx("span",{className:"text-xs text-gray-500",children:((y=s.fileType)==null?void 0:y.toUpperCase())||"PDF"})]})]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{id:`doc-carousel-${i}-${s.title}`,className:"flex overflow-x-auto scrollbar-hide snap-x snap-mandatory",children:n().map((u,k)=>e.jsx("div",{className:"flex-none w-full snap-start",children:e.jsxs("div",{className:"relative bg-gray-100",children:[e.jsx("img",{src:u,alt:`Page ${k+1} of ${s.title}`,className:"w-full h-64 object-contain cursor-pointer hover:opacity-95 transition-opacity",onClick:()=>s.url&&h(s.url,s.title),onError:C=>{const $=C.target;$.style.display="none";const R=$.nextElementSibling;R&&(R.style.display="flex")}}),e.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",style:{display:"none"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(he,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Page ",k+1]})]})})]})},`${i}-doc-page-${k}`))}),(()=>{const g=n();return g.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>p(Math.max(0,a-1)),className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white rounded-full w-8 h-8 flex items-center justify-center transition-all",disabled:a===0,children:"‹"}),e.jsx("button",{onClick:()=>p(Math.min(g.length-1,a+1)),className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white rounded-full w-8 h-8 flex items-center justify-center transition-all",disabled:a===g.length-1,children:"›"})]})})(),(()=>{const g=n();return g.length>1&&e.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded-full",children:[a+1," / ",g.length]})})()]}),e.jsxs("div",{className:"p-3 bg-gray-50 border-t border-gray-100",children:[(()=>{const g=n();return s.totalPageCount&&g.length<s.totalPageCount&&e.jsxs("div",{className:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-blue-700 flex items-center gap-2",children:[e.jsx(he,{className:"h-3 w-3"}),e.jsxs("span",{children:["Showing ",g.length," of ",s.totalPageCount," pages.",e.jsx("button",{onClick:()=>s.url&&h(s.url,s.title),className:"ml-1 text-blue-600 hover:underline font-medium",children:"View full document"})]})]})})(),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>s.url&&h(s.url,s.title),className:"w-full text-blue-600 border-blue-200 hover:bg-blue-50",children:[e.jsx(he,{className:"h-3 w-3 mr-1"}),"View Full Document"]})]}),(()=>{const g=n();return g.length>1&&e.jsx("div",{className:"flex justify-center py-2 gap-1 bg-gray-50",children:g.map((u,k)=>e.jsx("button",{className:`w-1.5 h-1.5 rounded-full transition-all carousel-dots ${k===a?"bg-blue-600 scale-110":"bg-gray-300 hover:bg-gray-500"}`,onClick:()=>p(k)},`doc-dot-${k}`))})})()]})},_a=({post:s})=>{const[i,h]=V.useState(0);V.useEffect(()=>{const f=document.getElementById(`carousel-${s.id}`);if(!f)return;const r=()=>{const n=f.scrollLeft,p=f.offsetWidth,N=Math.round(n/p);h(N)};return f.addEventListener("scroll",r),()=>f.removeEventListener("scroll",r)},[s.id]);const a=f=>{const r=document.getElementById(`carousel-${s.id}`);r&&r.scrollTo({left:f*r.offsetWidth,behavior:"smooth"})};return e.jsxs("div",{className:"relative",children:[e.jsx("div",{id:`carousel-${s.id}`,className:"flex overflow-x-auto scrollbar-hide snap-x snap-mandatory rounded-lg",children:s.media.map((f,r)=>e.jsx("div",{className:"flex-none w-full snap-start",children:e.jsx("img",{src:f.url,alt:`Post media ${r+1}`,className:"w-full h-48 object-cover cursor-pointer hover:opacity-95 transition-opacity",onClick:()=>window.open(f.url,"_blank")})},`${s.id}-media-${r}`))}),s.media.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>a(Math.max(0,i-1)),className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white rounded-full w-8 h-8 flex items-center justify-center transition-all",disabled:i===0,children:"‹"}),e.jsx("button",{onClick:()=>a(Math.min(s.media.length-1,i+1)),className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white rounded-full w-8 h-8 flex items-center justify-center transition-all",disabled:i===s.media.length-1,children:"›"})]}),s.media.length>1&&e.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded-full",children:[i+1," / ",s.media.length]}),s.media.length>1&&e.jsx("div",{className:"flex justify-center mt-2 gap-1",children:s.media.map((f,r)=>e.jsx("button",{className:`w-2 h-2 rounded-full transition-all carousel-dots ${r===i?"bg-blue-600 scale-110":"bg-gray-300 hover:bg-gray-500"}`,onClick:()=>a(r)},`dot-${r}`))})]})},Va=()=>{const s=Rs(),{user:i}=Ms(),{toast:h}=Us(),[a,f]=d.useState("youtube"),[r,n]=d.useState(""),[p,N]=d.useState(!1),[y,g]=d.useState(null),[u,k]=d.useState(null),[C,$]=d.useState(new Set),[R,F]=d.useState("all"),[M,S]=d.useState([]),[B,A]=d.useState(new Set),[J,X]=d.useState({format:"short",tone:"professional"}),[z,o]=d.useState(!1),[_,D]=d.useState(""),[L,Y]=d.useState(!1),[O,G]=d.useState(null),[P,ne]=d.useState(null),[ee,te]=d.useState(new Set),[Ia,rt]=d.useState(!1),[Ta,nt]=d.useState(""),[be,lt]=d.useState(new Set),[ns,it]=d.useState({}),[q,je]=d.useState(""),[se,Le]=d.useState(""),[ot,ct]=d.useState(new Set),[W,ue]=d.useState(null),[le,ge]=d.useState(new Set),[dt,mt]=d.useState(!1),[Pe,ht]=d.useState({isOpen:!1,documentUrl:"",documentTitle:""}),[Z,Ne]=d.useState(""),[Ea,$a]=d.useState(!1),[ut,Re]=d.useState([]),[xt,Fe]=d.useState([]),[ls,pt]=d.useState(!1),ze=async()=>{var c,w,b,j;const t="https://api.brandout.ai/api",l=localStorage.getItem("auth-method"),m=l?Ve.getToken(l):null;if(!m){console.warn("No auth token found");return}const x={Authorization:`Bearer ${m}`};console.log("Loading saved posts with API URL:",t);try{const v=await ae.get(`${t}/twitter/saved`,{headers:x});v.data.success?Re(v.data.data||[]):(console.warn("Failed to load saved Twitter posts:",v.data.message),Re([]))}catch(v){console.error("Error loading saved Twitter posts:",v),((c=v.response)==null?void 0:c.status)===401&&E("Please log in to view saved posts"),Re([])}try{const v=await ae.get(`${t}/linkedin/saved-posts`,{headers:x});v.data.success?(Fe(v.data.data||[]),console.log("Loaded LinkedIn posts:",((w=v.data.data)==null?void 0:w.length)||0)):(console.warn("Failed to load saved LinkedIn posts:",v.data.message),Fe([]))}catch(v){console.error("Error loading saved LinkedIn posts:",v),console.error("LinkedIn posts error response:",(b=v.response)==null?void 0:b.data),((j=v.response)==null?void 0:j.status)===401&&E("Please log in to view saved posts"),Fe([])}};d.useEffect(()=>{ze().catch(t=>{console.error("Error in loadSavedPosts:",t),E("Failed to load saved posts")})},[]);const K=t=>{h({description:t,variant:"default"})},E=t=>{h({description:t,variant:"destructive"})},gt=(t,l)=>{ht({isOpen:!0,documentUrl:t,documentTitle:l})},is=()=>{ht({isOpen:!1,documentUrl:"",documentTitle:""})},ft=t=>{try{localStorage.setItem("youtubeChannelResult",JSON.stringify(t)),localStorage.setItem("lastSearchedChannel",t.channelName)}catch(l){console.error("Error saving YouTube channel to localStorage:",l)}},bt=t=>{try{localStorage.setItem("linkedinResult",JSON.stringify(t)),localStorage.setItem("lastSearchedLinkedInProfile",t.profileData.username)}catch(l){console.error("Error saving LinkedIn result to localStorage:",l)}},os=()=>{try{const t=localStorage.getItem("youtubeChannelResult"),l=localStorage.getItem("lastSearchedChannel");t&&ne(JSON.parse(t)),l&&je(l)}catch(t){console.error("Error loading YouTube channel from localStorage:",t)}},cs=()=>{try{const t=localStorage.getItem("linkedinResult"),l=localStorage.getItem("lastSearchedLinkedInProfile");t&&ue(JSON.parse(t)),l&&!r&&n(l)}catch(t){console.error("Error loading LinkedIn result from localStorage:",t)}},vt=t=>{try{const l={tweets:Array.isArray(t.tweets)?t.tweets:[],threads:Array.isArray(t.threads)?t.threads:[],username:t.username||"",profileImageUrl:t.profileImageUrl||"",totalCount:typeof t.totalCount=="number"?t.totalCount:0,categories:t.categories||{all:0,normal:0,thread:0,long:0}};localStorage.setItem("twitterResult",JSON.stringify(l)),localStorage.setItem("lastSearchedTwitterUser",l.username)}catch(l){console.error("Error saving Twitter result to localStorage:",l)}},ds=()=>{var t,l;try{const m=localStorage.getItem("twitterResult"),x=localStorage.getItem("lastSearchedTwitterUser");if(m){const c=JSON.parse(m);if(c&&typeof c=="object"){const w={tweets:Array.isArray(c.tweets)?c.tweets:[],threads:Array.isArray(c.threads)?c.threads:[],username:c.username||"",profileImageUrl:c.profileImageUrl||"",totalCount:typeof c.totalCount=="number"?c.totalCount:((t=c.tweets)==null?void 0:t.length)||0,categories:c.categories||{all:c.totalCount||((l=c.tweets)==null?void 0:l.length)||0,normal:0,thread:0,long:0}};k(w),S(w.threads),console.log(`Loaded ${w.totalCount} tweets from cache for @${w.username}`)}else console.warn("Invalid Twitter data structure, clearing cache"),localStorage.removeItem("twitterResult")}x&&Ne(x)}catch(m){console.error("Error loading Twitter result from localStorage:",m),localStorage.removeItem("twitterResult"),localStorage.removeItem("lastSearchedTwitterUser")}};d.useEffect(()=>{a==="youtube"&&r&&q&&!r.includes(q)&&ne(null)},[a,r,q]),d.useEffect(()=>{a==="linkedin"&&r&&se&&!r.includes(se)&&ue(null)},[a,r,se]),d.useEffect(()=>{a==="twitter"&&r&&Z&&!r.includes(Z)&&k(null)},[a,r,Z]),d.useEffect(()=>{a==="youtube"&&q&&!r&&n(q.startsWith("@")?q:`@${q}`)},[a,q,r]),d.useEffect(()=>{a==="linkedin"&&se&&!r&&n(se)},[a,se,r]),d.useEffect(()=>{a==="twitter"&&Z&&!r&&n(Z.startsWith("@")?Z:`@${Z}`)},[a,Z,r]);const ms=()=>{ne(null),je(""),localStorage.removeItem("youtubeChannelResult"),localStorage.removeItem("lastSearchedChannel")},hs=()=>{ue(null),Le(""),localStorage.removeItem("linkedinResult"),localStorage.removeItem("lastSearchedLinkedInProfile")},us=()=>{k(null),Ne(""),$(new Set),A(new Set),localStorage.removeItem("twitterResult"),localStorage.removeItem("lastSearchedTwitterUser")},xs=async()=>{var l,m;if(!r){E("Please enter a LinkedIn username or profile URL");return}let t=r.trim();if(t.includes("linkedin.com/in/")){const x=t.match(/linkedin\.com\/in\/([^\/\?]+)/);t=x?x[1]:t}else if(t.includes("linkedin.com/company/")){const x=t.match(/linkedin\.com\/company\/([^\/\?]+)/);t=x?x[1]:t}t=t.replace("@","").replace(/\/+$/,""),se&&se!==t&&hs(),mt(!0),ue(null),ge(new Set);try{const x="https://api.brandout.ai/api",c=localStorage.getItem("token"),w={"Content-Type":"application/json"};c&&(w.Authorization=`Bearer ${c}`);const b=await ae.post(`${x}/linkedin/scrape-profile`,{username:t},{headers:w});b.data.success?(ue(b.data),Le(t),bt(b.data),K(`Successfully scraped ${b.data.totalPosts} posts from ${t}`)):E(b.data.message||"Failed to scrape LinkedIn profile")}catch(x){console.error("LinkedIn scraping error:",x),E(((m=(l=x.response)==null?void 0:l.data)==null?void 0:m.message)||"Failed to scrape LinkedIn profile")}finally{mt(!1)}},ps=async()=>{var l,m,x;if(!r){E("Please enter a YouTube channel URL or @handle");return}let t=r;if(r.includes("youtube.com/"))if(r.includes("/channel/"))t=((l=r.split("/channel/")[1])==null?void 0:l.split("/")[0])||r;else if(r.includes("/c/")||r.includes("/user/"))t=((m=r.split(/\/c\/|\/user\//)[1])==null?void 0:m.split("/")[0])||r;else{const c=r.split("/");for(let w=0;w<c.length;w++)if(c[w].startsWith("@")){t=c[w];break}}q&&q!==t&&ms(),rt(!0);try{const c=await Js.post("/youtube/channel",{channelName:t});if(c.data&&c.data.success){let w=t;c.data.data&&c.data.data.length>0&&c.data.data[0].channelName&&(w=c.data.data[0].channelName);const b={videos:c.data.data,channelName:w};ne(b),je(t),ft(b),K(`Found ${c.data.data.length} videos from ${w}`)}else throw new Error(((x=c.data)==null?void 0:x.message)||"Failed to fetch channel videos")}catch(c){console.error("Error fetching YouTube channel:",c),E("Failed to fetch channel videos. Please try again.")}finally{rt(!1)}},gs=async()=>{if(!r){E("Please enter a valid URL");return}N(!0);try{a==="twitter"?await fs():a==="youtube"?r.includes("/channel/")||r.includes("/@")||r.startsWith("@")?await ps():E("Please enter a YouTube channel URL or @handle"):a==="linkedin"?await xs():(await new Promise(t=>setTimeout(t,2e3)),g({content:"This is sample extracted content. In a real implementation, this would be the content scraped from the provided URL.",keyPoints:["Sample key point 1","Sample key point 2","Sample key point 3"],tone:"Professional",suggestedHook:"Here's an interesting insight from the content...",estimatedReadTime:2,wordCount:150}),K("Content scraped successfully!"))}catch(t){console.error(`Error scraping content from ${a}:`,t),E(`Failed to scrape content from ${a}. Please try again.`)}finally{N(!1)}},fs=async()=>{var l,m,x;if(!r){E("Please enter a Twitter username or profile URL");return}let t=r.trim();if(t.includes("twitter.com/")||t.includes("x.com/")){const c=t.split("/");t=c[c.length-1],t=t.split("?")[0]}if(t=t.replace("@","").replace(/\/+$/,""),!t){E("Please enter a valid Twitter username");return}Z&&Z!==t&&us();try{const c="https://api.brandout.ai/api",w=c.endsWith("/api")?`${c}/twitter/user/${t}`:`${c}/api/twitter/user/${t}`,b=await ae.get(w);if(b.data&&b.data.success){const j=b.data.data,v=wa(j),I=[],U=[];v.forEach(H=>{"tweets"in H?I.push(H):U.push(H)});const Q={all:j.length,normal:U.length,thread:I.reduce((H,de)=>H+de.tweets.length,0),long:j.filter(H=>H.is_long||H.full_text&&H.full_text.length>280).length},ce={tweets:U,threads:I,username:t,profileImageUrl:(m=(l=j[0])==null?void 0:l.author)==null?void 0:m.profile_image_url,totalCount:j.length,categories:Q};k(ce),S(I),Ne(t),vt(ce),K(`Successfully retrieved ${j.length} tweets from @${t}`)}else throw new Error(((x=b.data)==null?void 0:x.message)||"Failed to fetch tweets")}catch(c){console.error("Error fetching tweets:",c),E("Failed to fetch tweets. Please try again.")}},Me=t=>{navigator.clipboard.writeText(t),K("Copied to clipboard!")},bs=()=>{K("Saved to Inspiration Vault!")},vs=()=>{s("/dashboard/post")},yt=t=>{const l=new Set(C);l.has(t.id)?l.delete(t.id):l.add(t.id),$(l)},ys=(t,l)=>{const m=new Set(B),x=new Set(C);l?(m.add(t.id),t.tweets.forEach(c=>x.add(c.id))):(m.delete(t.id),t.tweets.forEach(c=>x.delete(c.id))),A(m),$(x)},ws=t=>{const l=new Set(le);l.has(t)?l.delete(t):l.add(t),ge(l)},js=async()=>{var m,x,c;if(C.size===0){E("Please select at least one tweet to save");return}if(!u||!u.tweets){E("No tweets available to save");return}const t=localStorage.getItem("auth-method"),l=t?Ve.getToken(t):null;if(!l){E("Please log in to save tweets");return}N(!0);try{const b=[...Array.isArray(u.tweets)?u.tweets:[],...Array.isArray(u.threads)?u.threads.flatMap(I=>I.tweets||[]):[]].filter(I=>I&&I.id&&C.has(I.id)).map(I=>({...I,thread_id:I.thread_id||I.conversation_id,thread_position:I.thread_position,savedAt:new Date().toISOString(),userId:(i==null?void 0:i.id)||"anonymous",username:u.username,profileImageUrl:u.profileImageUrl}));if(b.length===0){E("No valid tweets found to save");return}const v=await ae.post("https://api.brandout.ai/api/twitter/save",{tweets:b,username:u.username,options:{preserveExisting:!0,skipDuplicates:!0,preserveThreadOrder:!0}},{headers:{Authorization:`Bearer ${l}`,"Content-Type":"application/json"}});if(v.data.success)K(`Saved ${v.data.count} tweets successfully!`),v.data.skippedCount>0&&h({title:"Note",description:`${v.data.skippedCount} duplicate tweets were skipped.`}),$(new Set),A(new Set),ze();else throw new Error(v.data.message||"Failed to save tweets")}catch(w){console.error("Error saving tweets:",w),((m=w.response)==null?void 0:m.status)===401?E("Please log in to save tweets"):E(((c=(x=w.response)==null?void 0:x.data)==null?void 0:c.message)||"Failed to save tweets. Please try again.")}finally{N(!1)}},Ns=async()=>{var m,x,c;if(le.size===0){E("Please select at least one LinkedIn post to save");return}if(!W||!W.posts){E("No LinkedIn posts available to save");return}const t=localStorage.getItem("auth-method"),l=t?Ve.getToken(t):null;if(!l){E("Please log in to save posts");return}console.log("Saving LinkedIn posts with auth method:",t),console.log("Selected posts count:",le.size),N(!0);try{const w=W.posts.filter(v=>le.has(v.id)),b={posts:w,profileData:W.profileData};console.log("Sending request to backend:",{url:"https://api.brandout.ai/api/api/linkedin/save-scraped-posts",postsCount:w.length,profileData:W.profileData});const j=await ae.post("https://api.brandout.ai/api/linkedin/save-scraped-posts",b,{headers:{Authorization:`Bearer ${l}`}});if(console.log("Backend response:",j.data),ge(new Set),j.data.success){const v=j.data.count,I=j.data.skippedCount;console.log(`Successfully saved ${v} posts, skipped ${I}`),v>0&&K(`Successfully saved ${v} LinkedIn post${v!==1?"s":""}`),I>0&&h({title:"Note",description:`${I} duplicate post${I!==1?"s were":" was"} skipped.`}),console.log("Reloading saved posts..."),await ze(),console.log("Saved posts reloaded")}}catch(w){console.error("Error saving LinkedIn posts:",w),console.error("Error response:",(m=w.response)==null?void 0:m.data),E(((c=(x=w.response)==null?void 0:x.data)==null?void 0:c.message)||"Failed to save LinkedIn posts")}finally{N(!1)}},ks=async()=>{if(ee.size===0||!P){E("Please select at least one video");return}N(!0);try{const t=P.videos.filter(j=>ee.has(j.id)),l=new Date().toISOString(),m=t.map(j=>({...j,language:"English",is_generated:!1,savedAt:l,status:"ready",videoId:j.id,savedTimestamp:l,userId:(i==null?void 0:i.id)||"anonymous"}));let x=!1;try{const j="https://api.brandout.ai/api",v=j.endsWith("/api")?`${j}/youtube/save-videos`:`${j}/api/youtube/save-videos`,I=await ae.post(v,{videos:m,userId:(i==null?void 0:i.id)||"anonymous"});I.data.success?(x=!0,K(`Saved ${I.data.count} videos to cloud!`)):(console.warn("Backend save warning:",I.data.message),E("Failed to save videos to cloud: "+I.data.message))}catch(j){console.error("Error saving videos to backend:",j),E("Failed to save videos to cloud. Saving locally as backup.")}let c=[];try{const j=localStorage.getItem("savedYoutubeVideos");j&&(c=JSON.parse(j))}catch(j){console.error("Error parsing existing saved videos:",j)}const w=new Map;c.forEach(j=>{w.set(j.id||j.videoId,j)}),m.forEach(j=>{w.set(j.id||j.videoId,j)});const b=Array.from(w.values());if(localStorage.setItem("savedYoutubeVideos",JSON.stringify(b)),K(x?"Videos saved successfully to cloud and local storage!":`Saved ${m.length} videos to local storage as backup`),te(new Set),x)try{const j="https://api.brandout.ai/api",v=j.endsWith("/api")?`${j}/youtube-carousels`:`${j}/api/youtube-carousels`,I=await ae.post(v,{videos:m,userId:(i==null?void 0:i.id)||"anonymous"});I.data.success&&K(`Created ${I.data.count} carousel(s)!`)}catch(j){console.error("Error creating carousels:",j),E("Failed to create carousels, but videos were saved successfully.")}s("/dashboard/request-carousel")}catch(t){console.error("Error saving videos:",t),E("Failed to save videos. Please try again.")}finally{N(!1)}},Ss=async()=>{var t,l;if(!_&&!(P!=null&&P.videos.length)){E("No content available to generate an image");return}Y(!0);try{const m=P!=null&&P.videos.length?P.videos[0].title:_.substring(0,200),x="https://api.brandout.ai/api",c=x.endsWith("/api")?`${x}/cloudinary/generate`:`${x}/api/cloudinary/generate`,w=await ae.post(c,{prompt:`Create a professional, high-quality image based on this content: ${m}`,size:"1024x1024",style:"vivid"});if(w.data&&w.data.success){const b=w.data.data;G(b.secure_url),Gs({id:b.public_id,url:b.url,secure_url:b.secure_url,public_id:b.public_id,title:"Generated from YouTube: "+(((t=P==null?void 0:P.videos[0])==null?void 0:t.title)||"content"),tags:["ai-generated","youtube","linkedin"],uploadedAt:new Date().toISOString(),type:"ai-generated",width:b.width,height:b.height}),K("Image generated successfully!")}else throw new Error(((l=w.data)==null?void 0:l.message)||"Failed to generate image")}catch(m){console.error("Error generating image:",m),E("Failed to generate image. Please try again.")}finally{Y(!1)}},Cs=async t=>{try{lt(w=>{const b=new Set(w);return b.add(t),b}),nt(t),it(w=>({...w,[t]:0}));const l="https://api.brandout.ai/api",m=l.endsWith("/api")?`${l}/youtube/transcript`:`${l}/api/youtube/transcript`,x=await fetch(m,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({videoId:t,useScraperApi:!0})});if(!x.ok){const w=await x.json();throw new Error(w.message||"Failed to fetch transcript")}const c=await x.json();if(c.success){const w=P==null?void 0:P.videos.find(b=>b.id===t);w?(await _s(w,c.transcript,c.language||"Unknown",c.is_generated||!1),K("Successfully retrieved and saved the video transcript.")):E("Could not find the video data for the transcript.");return}else throw new Error(c.message||"Failed to fetch transcript")}catch(l){console.error("Error fetching transcript:",l),E(l instanceof Error?l.message:"Failed to fetch transcript")}finally{lt(l=>{const m=new Set(l);return m.delete(t),m}),it(l=>({...l,[t]:0})),nt("")}},_s=async(t,l,m,x,c=null)=>{var w;try{const b=c||[l],j=new Date().toISOString(),v={...t,transcript:l,formattedTranscript:b,language:m,is_generated:x,savedAt:j,status:"ready",videoId:t.id,savedTimestamp:j,userId:(i==null?void 0:i.id)||"anonymous"};try{const U=localStorage.getItem("savedYoutubeVideos");let Q=U?JSON.parse(U):[];const ce=Q.findIndex(H=>H.id===v.id);ce>=0?Q[ce]=v:Q.push(v),localStorage.setItem("savedYoutubeVideos",JSON.stringify(Q)),console.log("Saved transcript to localStorage successfully"),ct(H=>{const de=new Set(H);return de.add(t.id),de})}catch(U){console.error("Error saving to localStorage:",U),E("Error saving locally: "+(U.message||"Unknown error"))}let I=!1;try{const U="https://api.brandout.ai/api",Q=U.endsWith("/api")?`${U}/youtube/save-video-transcript`:`${U}/api/youtube/save-video-transcript`,ce=await ae.post(Q,{video:v,userId:(i==null?void 0:i.id)||"anonymous"},{timeout:1e4});if(ce.data.success){I=!0,K("Video saved to cloud with transcript!");try{const H=U.endsWith("/api")?`${U}/youtube-carousels`:`${U}/api/youtube-carousels`;ae.post(H,{videos:[v],userId:(i==null?void 0:i.id)||"anonymous"},{timeout:1e4}).then(de=>{de.data.success&&console.log("Created carousel for the video")}).catch(de=>{console.error("Error creating carousel:",de)})}catch(H){console.error("Error setting up carousel creation:",H)}}else console.warn("Backend save warning:",ce.data.message)}catch(U){let Q="Unknown error";U.code==="ERR_NETWORK"?Q="Network connection error. API server may be down.":U.response?(Q=`Status ${U.response.status}: ${U.response.statusText}`,(w=U.response.data)!=null&&w.message&&(Q+=` - ${U.response.data.message}`)):U.message&&(Q=U.message),console.error("Error saving to backend:",Q)}return s("/dashboard/request-carousel"),!0}catch(b){return console.error("Fatal error in handleSaveVideoWithTranscript:",b),E("Failed to save the video with transcript: "+(b.message||"Unknown error")),!1}},Is=t=>{if(be.has(t)){const l=ns[t]||0;return l>0?`Retry ${l}...`:"Loading..."}return be.size>0?"Please wait...":ot.has(t)?"Transcript Available":"Get Transcript"};d.useEffect(()=>{n(""),g(null),k(null),$(new Set),a!=="youtube"&&(localStorage.getItem("youtubeChannelResult")||(ne(null),te(new Set))),a!=="linkedin"&&(localStorage.getItem("linkedinResult")||(ue(null),ge(new Set)))},[a]),d.useEffect(()=>{a==="youtube"&&os()},[a]),d.useEffect(()=>{a==="linkedin"&&cs()},[a]),d.useEffect(()=>{a==="twitter"&&ds()},[a]),d.useEffect(()=>{a!=="youtube"&&a!=="linkedin"&&a!=="twitter"&&(g(null),D("")),a==="youtube"&&q&&r===""&&n(q.startsWith("@")?q:`@${q}`),a==="linkedin"&&se&&r===""&&n(se),a==="twitter"&&Z&&r===""&&n(Z.startsWith("@")?Z:`@${Z}`)},[a,q,se,Z,r]),d.useEffect(()=>{if(P){const t=new Set(P.videos.map(l=>l.id));te(l=>{const m=new Set;return l.forEach(x=>{t.has(x)&&m.add(x)}),m})}},[P]),d.useEffect(()=>{var t,l;try{const m=localStorage.getItem("youtubeChannelResult"),x=localStorage.getItem("lastSearchedChannel");m&&ne(JSON.parse(m)),x&&je(x);const c=localStorage.getItem("linkedinResult"),w=localStorage.getItem("lastSearchedLinkedInProfile");if(c){const v=JSON.parse(c);ue(v),console.log(`Loaded ${v.totalPosts} LinkedIn posts from cache for ${v.profileData.name}`)}w&&Le(w);const b=localStorage.getItem("twitterResult"),j=localStorage.getItem("lastSearchedTwitterUser");if(b){const v=JSON.parse(b);if(v&&typeof v=="object"){const I={tweets:Array.isArray(v.tweets)?v.tweets:[],threads:Array.isArray(v.threads)?v.threads:[],username:v.username||"",profileImageUrl:v.profileImageUrl||"",totalCount:typeof v.totalCount=="number"?v.totalCount:((t=v.tweets)==null?void 0:t.length)||0,categories:v.categories||{all:v.totalCount||((l=v.tweets)==null?void 0:l.length)||0,normal:0,thread:0,long:0}};k(I),S(I.threads),console.log(`Loaded ${I.totalCount} tweets from cache for @${I.username}`)}else console.warn("Invalid Twitter data structure, clearing cache"),localStorage.removeItem("twitterResult")}j&&Ne(j)}catch(m){console.error("Error loading data from localStorage:",m)}},[]),d.useEffect(()=>{const t=()=>{P&&ft(P),W&&bt(W),u&&vt(u)};return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)}},[P,W,u]);const Ts=t=>{te(l=>{const m=new Set(l);return m.has(t)?m.delete(t):m.add(t),m})};d.useEffect(()=>{try{const t=localStorage.getItem("savedYoutubeVideos");if(t){const l=JSON.parse(t),m=new Set;l.forEach(x=>{x.transcript&&typeof x.transcript=="string"&&x.transcript.trim().length>0&&m.add(x.id)}),ct(m)}}catch(t){console.error("Error checking for videos with transcripts:",t)}},[]),V.useEffect(()=>{const t=document.createElement("style");return t.textContent=Sa,document.head.appendChild(t),()=>{document.head.removeChild(t)}},[]);const Es=`
    @layer components {
      .glass-card {
        @apply bg-white/70 backdrop-blur-sm border border-white/20 shadow-sm;
      }
      
      .tweet-card {
        @apply relative p-4 sm:p-6 rounded-2xl glass-card transition-all duration-300 hover:shadow-md overflow-hidden mb-4;
      }
      
      .tweet-thread {
        @apply relative p-4 sm:p-6 rounded-2xl glass-card transition-all duration-300 hover:shadow-md overflow-hidden mb-4 border-l-4 border-blue-500;
      }
      
      .thread-item {
        @apply border-l-2 border-blue-500/30 pl-6 py-3 ml-3 relative;
      }
      
      .thread-item:first-child {
        @apply pt-1;
      }
      
      .thread-item:last-child {
        @apply pb-1;
      }
      
      .thread-container {
        @apply pl-3 relative;
      }
      
      .thread-container::before {
        content: '';
        @apply absolute top-0 bottom-0 left-3 w-0.5 bg-blue-500/30 rounded;
      }
      
      .thread-item::before {
        content: '';
        @apply absolute left-[-4px] top-4 w-2 h-2 rounded-full bg-blue-500/50;
      }
      
      .thread-item + .thread-item {
        @apply mt-2;
      }
      
      .thread-container:empty::before {
        @apply hidden;
      }
      
      .show-more-button {
        @apply text-blue-500 text-sm font-medium transition-colors duration-200 hover:text-blue-700 flex items-center gap-1;
      }
      
      .checkbox-container {
        @apply absolute top-6 right-6 flex items-center gap-2;
      }
      
      .custom-checkbox {
        @apply h-5 w-5 rounded-md border border-input bg-white transition-colors hover:cursor-pointer;
      }
      
      .custom-checkbox-checked {
        @apply bg-blue-500 border-blue-500;
      }
      
      /* LinkedIn Masonry Layout Styles - Fixed alignment */
      .masonry-container {
        column-fill: balance;
        column-gap: 1.5rem;
        orphans: 1;
        widows: 1;
      }
      
      .masonry-container .linkedin-post-card {
        display: inline-block;
        width: 100%;
        margin: 0 0 1.5rem 0;
        break-inside: avoid;
        page-break-inside: avoid;
        -webkit-column-break-inside: avoid;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }
      
      .masonry-container .linkedin-post-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      }
      
      /* Responsive masonry columns */
      @media (max-width: 768px) {
        .masonry-container {
          column-count: 1;
          column-width: auto;
        }
      }
      
      @media (min-width: 768px) and (max-width: 1024px) {
        .masonry-container {
          column-count: 2;
          column-width: auto;
        }
      }
      
      @media (min-width: 1024px) {
        .masonry-container {
          column-count: 3;
          column-width: auto;
        }
      }
      
      /* Smooth image loading for masonry */
      .masonry-container img {
        transition: opacity 0.3s ease;
      }
      
      .masonry-container img:not([src]) {
        opacity: 0;
      }
    }

    /* Animations */
    .animate-enter {
      animation: fade-in 0.3s ease-out, scale-in 0.2s ease-out;
    }

    .animate-content-expand {
      overflow: hidden;
      transition: max-height 0.3s ease-out;
    }

    .media-container {
      @apply rounded-lg overflow-hidden relative;
      aspect-ratio: auto;
      max-height: 400px;
    }

    .media-container img, .media-container video {
      @apply w-full h-auto object-contain;
      max-height: 400px;
    }

    .profile-media-container {
      @apply rounded-lg overflow-hidden relative;
      aspect-ratio: 1 / 1;
      max-height: 150px;
    }

    .profile-media-container img {
      @apply w-full h-full object-contain;
    }

    /* Image lazy loading blur effect */
    .lazy-image {
      @apply transition-opacity duration-500 opacity-0;
    }

    .lazy-image.loaded {
      @apply opacity-100;
    }

    .lazy-image.loading {
      @apply bg-gray-200 animate-pulse;
    }
    
    /* Pinterest-style masonry for LinkedIn posts */
    .linkedin-masonry {
      columns: 1;
      column-gap: 1.5rem;
    }
    
    @media (min-width: 768px) {
      .linkedin-masonry {
        columns: 2;
      }
    }
    
    @media (min-width: 1024px) {
      .linkedin-masonry {
        columns: 3;
      }
    }
    
    .linkedin-masonry .linkedin-post-card {
      break-inside: avoid;
      margin-bottom: 1.5rem;
      width: 100%;
      display: inline-block;
    }
  `;V.useEffect(()=>{const t=document.createElement("style");return t.textContent=Es,document.head.appendChild(t),()=>{document.head.removeChild(t)}},[]);const $s=({isOpen:t,onClose:l,savedTwitterPosts:m,savedLinkedInPosts:x})=>t?e.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-75 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl h-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(_e,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Saved Posts"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[m.length+x.length," total saved posts"]})]})]}),e.jsx(T,{variant:"outline",size:"sm",onClick:l,className:"p-2",children:e.jsx(Pt,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex-1 overflow-auto p-6",children:m.length===0&&x.length===0?e.jsxs("div",{className:"text-center py-16 text-gray-500",children:[e.jsx(_e,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No saved posts yet"}),e.jsx("p",{children:"Start by scraping and saving some content!"})]}):e.jsxs(Ye,{defaultValue:"twitter",className:"w-full",children:[e.jsxs(He,{className:"grid w-full grid-cols-2 mb-6",children:[e.jsxs(pe,{value:"twitter",className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),"Twitter (",m.length,")"]}),e.jsxs(pe,{value:"linkedin",className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4"}),"LinkedIn (",x.length,")"]})]}),e.jsx(kt,{value:"twitter",children:m.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No saved Twitter posts"}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map((c,w)=>e.jsx("div",{className:"w-full",children:e.jsx(_t,{tweet:c,isSelected:!1,onSelectToggle:()=>{}})},`${c.id}-${c.savedAt||w}`))})}),e.jsx(kt,{value:"linkedin",children:x.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No saved LinkedIn posts"}):e.jsx("div",{className:"masonry-container columns-1 md:columns-2 xl:columns-3 gap-6",children:x.map((c,w)=>{const b=c.postData||c;return e.jsxs(ie,{className:"linkedin-post-card bg-white border border-gray-200 hover:shadow-lg transition-all duration-200 break-inside-avoid mb-6",children:[e.jsx(xe,{className:"p-4 pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("img",{src:b.authorAvatar||"https://via.placeholder.com/40",alt:b.author,className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm text-gray-900",children:b.author}),e.jsx("p",{className:"text-xs text-gray-600 line-clamp-2",children:b.authorHeadline}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Saved • ",new Date(b.savedAt||c.createdAt).toLocaleDateString()]})]})]})}),e.jsx(oe,{className:"p-4 pt-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"linkedin-post-content",children:(()=>{const[j,v]=V.useState(!1),I=b.content||"";return I.length>250&&!j?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"whitespace-pre-line break-words",children:[I.substring(0,250),"..."]}),e.jsx("button",{className:"text-blue-500 hover:text-blue-600 text-xs mt-1",onClick:()=>v(!0),children:"Show more"})]}):e.jsx("p",{className:"whitespace-pre-line break-words",children:I})})()}),b.media&&b.media.length>0&&e.jsx("div",{className:"relative",children:b.media.length===1?e.jsx("div",{className:"rounded-lg overflow-hidden bg-gray-100",children:e.jsx("img",{src:b.media[0].url,alt:"Post media",className:"w-full object-cover cursor-pointer hover:opacity-95 transition-opacity",style:{height:"auto",maxHeight:"400px"},onClick:()=>window.open(b.media[0].url,"_blank")})}):e.jsx("div",{className:"grid grid-cols-2 gap-2",children:b.media.slice(0,4).map((j,v)=>e.jsx("img",{src:j.url,alt:`Media ${v+1}`,className:"w-full h-24 object-cover rounded cursor-pointer hover:opacity-95 transition-opacity",onClick:()=>window.open(j.url,"_blank")},v))})}),b.documents&&b.documents.length>0&&e.jsx("div",{className:"space-y-3",children:b.documents.map((j,v)=>{var I;return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:j.title})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(I=j.fileType)==null?void 0:I.toUpperCase()," • ",j.totalPageCount," pages"]}),e.jsxs(T,{variant:"outline",size:"sm",className:"mt-2 w-full",onClick:()=>gt(j.url,j.title),children:[e.jsx(Hs,{className:"h-4 w-4 mr-2"}),"View Document"]})]},v)})})]})}),e.jsx(Ce,{className:"p-4 pt-0",children:e.jsx("div",{className:"w-full space-y-3",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 border-t border-gray-100 pt-2",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-blue-600",children:"👍"}),e.jsx("span",{className:"text-red-500",children:"❤️"}),e.jsx("span",{className:"text-green-600",children:"💡"}),b.likes||0]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{children:[b.comments||0," comments"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[b.shares||0," reposts"]})]})]})})})]},`saved-${b.id}-${w}`)})})})]})})]})}):null;return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Content Scraper"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Extract content from YouTube channels to repurpose for LinkedIn"})]}),e.jsxs(T,{variant:"outline",onClick:()=>pt(!0),className:"gap-2 whitespace-nowrap",children:[e.jsx(_e,{className:"h-4 w-4"}),"View Saved Posts (",ut.length+xt.length,")"]})]}),e.jsx($s,{isOpen:ls,onClose:()=>pt(!1),savedTwitterPosts:ut,savedLinkedInPosts:xt}),e.jsxs(ie,{className:"mb-8",children:[e.jsxs(xe,{children:[e.jsx(ve,{children:"Input Source"}),e.jsx(wt,{children:"Enter a YouTube channel URL or handle"})]}),e.jsx(oe,{children:e.jsxs(Ye,{defaultValue:"youtube",value:a,onValueChange:t=>{f(t),t!=="youtube"&&t!=="linkedin"&&t!=="twitter"&&(g(null),D(""))},className:"w-full",children:[e.jsxs(He,{className:"grid grid-cols-4 w-full mb-6",children:[e.jsxs(pe,{value:"youtube",className:"flex items-center gap-2",children:[e.jsx(ke,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"YouTube"})]}),e.jsxs(pe,{value:"linkedin",className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"LinkedIn"})]}),e.jsxs(pe,{value:"twitter",className:"flex items-center gap-2",children:[e.jsx(Ue,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Twitter"})]}),e.jsxs(pe,{value:"web",className:"flex items-center gap-2 relative opacity-70",disabled:!0,children:[e.jsx(Ds,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Web"}),e.jsx("span",{className:"absolute -top-2 -right-2 bg-amber-500 text-white text-[10px] px-1 rounded-full",children:"Soon"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Vs,{type:"text",placeholder:a==="youtube"?"Enter YouTube channel URL or @handle (e.g., @channelname)":a==="linkedin"?"Enter LinkedIn username (e.g., johndoe or linkedin.com/in/johndoe)":a==="twitter"?"Enter Twitter username (e.g., @username or twitter.com/username)":"Enter URL to scrape content",value:r,onChange:t=>n(t.target.value),className:"w-full"})}),e.jsx(T,{onClick:gs,disabled:p||!r||a==="linkedin"&&dt,className:"min-w-[120px]",children:p||a==="linkedin"&&dt?e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"mr-2 h-4 w-4 animate-spin"}),a==="linkedin"?"Scraping...":"Loading"]}):e.jsxs(e.Fragment,{children:[e.jsx(jt,{className:"mr-2 h-4 w-4"}),a==="youtube"?"Get Videos":a==="linkedin"?"Scrape Profile":a==="twitter"?"Get Tweets":"Scrape Content"]})})]})]})})]}),a==="twitter"&&u&&e.jsxs("div",{className:"w-full space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 bg-white/90 backdrop-blur-sm rounded-xl shadow-md p-4 border border-gray-100 gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 min-w-0 flex-1",children:[u.profileImageUrl&&e.jsx("img",{src:u.profileImageUrl,alt:u.username||"User",className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full border-2 border-blue-500/20 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("h3",{className:"font-bold text-base sm:text-lg truncate",children:["@",u.username||"Unknown"]}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:[u.totalCount||0," tweets scraped"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:()=>{const t=new Set([...Array.isArray(u.tweets)?u.tweets.map(l=>l.id):[],...Array.isArray(u.threads)?u.threads.flatMap(l=>(l.tweets||[]).map(m=>m.id)):[]]);$(t),A(new Set((u.threads||[]).map(l=>l.id)))},disabled:p,className:"bg-white hover:bg-blue-50 text-xs whitespace-nowrap",children:"Select All"}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>{$(new Set),A(new Set)},disabled:p||C.size===0,className:"bg-white hover:bg-blue-50 text-xs whitespace-nowrap",children:"Clear Selection"}),e.jsx(T,{variant:"default",size:"sm",onClick:js,disabled:p||C.size===0,className:"gap-2 bg-blue-600 hover:bg-blue-700 text-xs whitespace-nowrap",children:p?e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"h-3 w-3 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"h-3 w-3"}),"Save (",C.size,")"]})})]})]}),e.jsx(Na,{selectedCategory:R,onCategoryChange:F,tweetCounts:u.categories}),e.jsx("div",{className:"space-y-6",children:(()=>{const t=[];if(u.tweets&&Array.isArray(u.tweets)){const l=u.tweets.filter(m=>R==="normal"?!m.is_long:R==="long"?m.is_long:R!=="thread");t.push(...l)}return u.threads&&Array.isArray(u.threads)&&(R==="all"||R==="thread")&&t.push(...u.threads),t.sort((l,m)=>{var w,b;const x=new Date("tweets"in l?((w=l.tweets[0])==null?void 0:w.created_at)||l.created_at:l.created_at||"");return new Date("tweets"in m?((b=m.tweets[0])==null?void 0:b.created_at)||m.created_at:m.created_at||"").getTime()-x.getTime()}),t.length===0?e.jsxs("div",{className:"text-center py-10 bg-white/50 rounded-xl border border-gray-200",children:[e.jsxs("p",{className:"text-gray-500",children:["No ",R," content found."]}),e.jsx(T,{onClick:()=>F("all"),variant:"link",className:"text-blue-500 mt-2",children:"Show all content"})]}):e.jsx("div",{className:"columns-1 md:columns-2 gap-6",children:t.map(l=>e.jsx("div",{className:"break-inside-avoid mb-6 w-full",children:"tweets"in l?e.jsx(ja,{thread:l,selectedTweets:C,onSelectToggle:yt,onSelectThread:ys}):e.jsx(_t,{tweet:l,isSelected:C.has(l.id),onSelectToggle:yt})},"tweets"in l?`thread-${l.id}`:`tweet-${l.id}`))})})()})]}),a==="youtube"&&P&&e.jsxs("div",{className:"space-y-6",children:[be.size>0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 text-blue-800 px-4 py-3 rounded-lg flex items-center mb-4",children:[e.jsx(me,{className:"h-4 w-4 mr-2 animate-spin"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Fetching transcript..."}),e.jsx("p",{className:"text-sm",children:"Please wait while we retrieve the transcript. This may take a few moments."})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ke,{className:"h-8 w-8"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:P.channelName}),e.jsxs("p",{className:"text-sm text-gray-500",children:[P.videos.length," videos found"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:()=>te(new Set(P.videos.map(t=>t.id))),disabled:p,className:"text-xs whitespace-nowrap",children:"Select All"}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>te(new Set),disabled:p||ee.size===0,className:"text-xs whitespace-nowrap",children:"Clear Selection"}),e.jsx(T,{variant:"default",size:"sm",onClick:ks,disabled:p||ee.size===0,className:"text-xs gap-1 whitespace-nowrap",children:p?e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"h-3 w-3 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"h-3 w-3"}),"Save (",ee.size,")"]})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.videos.map(t=>e.jsxs(ie,{className:`overflow-hidden ${ee.has(t.id)?"border-primary":""}`,children:[e.jsxs("div",{className:"h-40 bg-gray-100 dark:bg-gray-800 relative",children:[e.jsx("img",{src:t.thumbnail,alt:t.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-2 right-2 bg-black/70 text-white text-xs px-1 rounded",children:t.duration!=="N/A"?t.duration:"N/A"})]}),e.jsx(xe,{className:"p-4 pb-2",children:e.jsx(ve,{className:"text-sm line-clamp-2",children:t.title})}),e.jsxs(oe,{className:"p-4 pt-0",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:[t.view_count.toLocaleString()," views"]}),e.jsx("span",{children:new Date(t.upload_date).toLocaleDateString()})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 truncate",children:t.channelName||"Unknown Channel"})]}),e.jsxs(Ce,{className:"p-3 pt-0 flex flex-col gap-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 w-full",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>window.open(t.url,"_blank"),className:"w-full",children:[e.jsx(ke,{className:"h-4 w-4 mr-1"}),"Watch"]}),e.jsx(T,{variant:ee.has(t.id)?"secondary":"outline",size:"sm",onClick:()=>Ts(t.id),className:"w-full",children:ee.has(t.id)?"Selected":"Select"})]}),e.jsx(T,{variant:ot.has(t.id)?"secondary":"default",size:"sm",className:`w-full ${be.size>0?"opacity-70":""}`,onClick:()=>Cs(t.id),disabled:be.size>0,children:Is(t.id)})]})]},t.id))})]}),a==="linkedin"&&W&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(ie,{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200",children:e.jsx(oe,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4 min-w-0 flex-1",children:[W.profileData.avatar&&e.jsx("img",{src:W.profileData.avatar,alt:W.profileData.name,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full border-4 border-white shadow-lg flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 truncate",children:W.profileData.name}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1 line-clamp-2 break-words",children:W.profileData.headline}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ye,{className:"h-3 w-3 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[W.totalPosts," posts"]})]}),e.jsx("span",{className:"hidden sm:inline",children:"•"}),e.jsxs("span",{className:"truncate",children:["@",W.profileData.username]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:()=>ge(new Set(W.posts.map(t=>t.id))),disabled:p,className:"bg-white text-xs whitespace-nowrap",children:"Select All"}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>ge(new Set),disabled:p||le.size===0,className:"bg-white text-xs whitespace-nowrap",children:"Clear Selection"}),e.jsx(T,{variant:"default",size:"sm",onClick:Ns,disabled:p||le.size===0,className:"gap-2 bg-blue-600 hover:bg-blue-700 text-xs whitespace-nowrap",children:p?e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"h-3 w-3 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"h-3 w-3"}),"Save (",le.size,")"]})})]})]})})}),e.jsx("div",{className:"masonry-container columns-1 md:columns-2 lg:columns-3 gap-6",children:W.posts.map((t,l)=>e.jsxs(ie,{className:`linkedin-post-card bg-white border border-gray-200 hover:shadow-lg transition-all duration-200 break-inside-avoid ${le.has(t.id)?"ring-2 ring-blue-500 border-blue-500":""}`,children:[e.jsx(xe,{className:"p-4 pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("img",{src:t.authorAvatar||"https://via.placeholder.com/40",alt:t.author,className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold text-sm text-gray-900 truncate",children:t.author}),t.isRepost&&e.jsx(Os,{variant:"secondary",className:"text-xs px-1 py-0",children:"Repost"})]}),e.jsx("p",{className:"text-xs text-gray-600 line-clamp-2 break-words",children:t.authorHeadline}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[t.dateRelative," • 🌐"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>ws(t.id),className:"h-6 w-6 p-0 hover:bg-blue-50",children:le.has(t.id)?e.jsx("div",{className:"h-4 w-4 rounded bg-blue-600 text-white flex items-center justify-center text-xs",children:"✓"}):e.jsx("div",{className:"h-4 w-4 rounded border-2 border-gray-300 hover:border-blue-500"})}),e.jsx(T,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-gray-400 hover:text-gray-600",children:"•••"})]})]})}),e.jsx(oe,{className:"p-4 pt-0",children:e.jsxs("div",{className:"space-y-3 linkedin-post-content",children:[e.jsx("div",{className:"text-sm text-gray-800 leading-relaxed",children:t.content.length>300?e.jsxs("div",{children:[e.jsxs("div",{id:`truncated-content-${t.id}`,children:[e.jsxs("p",{className:"whitespace-pre-line break-words overflow-hidden",children:[t.content.substring(0,300),"..."]}),e.jsx(T,{variant:"link",size:"sm",className:"p-0 h-auto text-xs text-gray-500 hover:text-blue-600 mt-1",onClick:()=>{const m=document.getElementById(`truncated-content-${t.id}`),x=document.getElementById(`full-content-${t.id}`),c=document.getElementById(`see-more-btn-${t.id}`);m&&x&&c&&(x.style.display==="none"||!x.style.display?(m.style.display="none",x.style.display="block",c.textContent="see less"):(m.style.display="block",x.style.display="none",c.textContent="see more"))},children:e.jsx("span",{id:`see-more-btn-${t.id}`,children:"see more"})})]}),e.jsx("div",{id:`full-content-${t.id}`,style:{display:"none"},children:e.jsx("p",{className:"whitespace-pre-line break-words overflow-hidden mt-2",children:t.content})})]}):e.jsx("p",{className:"whitespace-pre-line break-words overflow-hidden",children:t.content})}),t.media&&t.media.length>0&&e.jsx("div",{className:"relative",children:t.media.length===1?e.jsx("div",{className:"rounded-lg overflow-hidden bg-gray-100",children:e.jsx("img",{src:t.media[0].url,alt:"Post media",className:"w-full object-cover cursor-pointer hover:opacity-95 transition-opacity",style:{height:"auto",maxHeight:"400px"},onClick:()=>window.open(t.media[0].url,"_blank")})}):e.jsx(_a,{post:t})}),t.documents&&t.documents.length>0&&e.jsx("div",{className:"space-y-3",children:t.documents.map((m,x)=>e.jsx(Ca,{document:m,postId:t.id,onOpenPdf:gt},`${t.id}-doc-${x}`))})]})}),e.jsx(Ce,{className:"p-4 pt-0",children:e.jsxs("div",{className:"w-full space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 border-b border-gray-100 pb-2",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-blue-600",children:"👍"}),e.jsx("span",{className:"text-red-500",children:"❤️"}),e.jsx("span",{className:"text-green-600",children:"💡"}),t.likes||0]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{children:[t.comments||0," comments"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[t.shares||0," reposts"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(T,{variant:"ghost",size:"sm",className:"text-gray-600 hover:bg-gray-100 px-3 py-1 h-8",children:[e.jsx("span",{className:"mr-1",children:"👍"}),e.jsx("span",{className:"text-xs",children:"Like"})]}),e.jsxs(T,{variant:"ghost",size:"sm",className:"text-gray-600 hover:bg-gray-100 px-3 py-1 h-8",children:[e.jsx(Ie,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"Comment"})]}),e.jsxs(T,{variant:"ghost",size:"sm",className:"text-gray-600 hover:bg-gray-100 px-3 py-1 h-8",children:[e.jsx(Nt,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"Repost"})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>Me(t.content),className:"text-gray-500 hover:text-blue-600 hover:bg-blue-50 px-2 py-1 h-8",children:e.jsx(De,{className:"h-3 w-3"})}),t.url&&e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>window.open(t.url,"_blank"),className:"text-gray-500 hover:text-blue-600 hover:bg-blue-50 px-2 py-1 h-8",children:e.jsx(ye,{className:"h-3 w-3"})})]})]})]})})]},`${t.id}-${l}`))})]}),a!=="twitter"&&a!=="youtube"&&y&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs(ie,{children:[e.jsxs(xe,{children:[e.jsx(ve,{children:"Extracted Content"}),e.jsxs(wt,{children:["Content extracted from ",a==="linkedin"?"LinkedIn":a==="website"?"website":"YouTube video"]})]}),e.jsxs(oe,{children:[e.jsx("div",{className:"border border-gray-200 dark:border-gray-800 rounded-lg p-4 mb-4 bg-white dark:bg-gray-900",children:e.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-line",children:y.content})}),e.jsx(ya,{type:"single",collapsible:!0,className:"mb-4",children:e.jsxs(ts,{value:"key-points",children:[e.jsx(ss,{className:"text-base font-medium",children:"Key Points"}),e.jsx(as,{children:e.jsx("ul",{className:"list-disc pl-5 space-y-2",children:y.keyPoints.map((t,l)=>e.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:t},l))})})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border border-gray-200 dark:border-gray-800 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Detected Tone"}),e.jsx("div",{className:"text-gray-700 dark:text-gray-300",children:y.tone})]}),e.jsxs("div",{className:"border border-gray-200 dark:border-gray-800 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Details"}),e.jsxs("div",{className:"text-gray-700 dark:text-gray-300 flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Word count:"}),e.jsx("span",{children:y.wordCount})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Read time:"}),e.jsxs("span",{children:[y.estimatedReadTime," min"]})]})]})]})]})]}),e.jsxs(Ce,{className:"flex justify-between border-t border-gray-200 dark:border-gray-800 pt-4",children:[e.jsxs(T,{variant:"outline",size:"sm",className:"gap-1",onClick:()=>Me(y.content),children:[e.jsx(De,{className:"h-4 w-4"}),"Copy Content"]}),e.jsxs(T,{variant:"outline",size:"sm",className:"gap-1",onClick:bs,children:[e.jsx(Se,{className:"h-4 w-4"}),"Save to Vault"]})]})]})}),e.jsxs("div",{children:[e.jsxs(ie,{className:"mb-6",children:[e.jsx(xe,{className:"pb-3",children:e.jsxs(ve,{className:"flex items-center gap-2 text-base",children:[e.jsx(Bs,{className:"h-4 w-4 text-amber-500"}),"Suggested Hook"]})}),e.jsxs(oe,{children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-3",children:y.suggestedHook}),e.jsxs(T,{variant:"outline",size:"sm",className:"w-full gap-1",onClick:()=>Me(y.suggestedHook),children:[e.jsx(De,{className:"h-4 w-4"}),"Copy Hook"]})]})]}),e.jsxs(ie,{className:"bg-primary-50 dark:bg-primary-900/20",children:[e.jsx(xe,{className:"pb-3",children:e.jsx(ve,{className:"text-base",children:"Generate LinkedIn Post"})}),e.jsxs(oe,{className:"pb-3",children:[e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-4",children:"Use the extracted content to create an engaging LinkedIn post with AI assistance."}),e.jsxs(T,{className:"w-full gap-2 mb-3",onClick:vs,children:[e.jsx(Ws,{className:"h-4 w-4"}),"Create Post"]}),e.jsxs(T,{variant:"outline",className:"w-full gap-2",onClick:()=>s("/dashboard/ai"),children:[e.jsx(Ie,{className:"h-4 w-4"}),"Expand with AI Writer"]})]})]})]})]}),!y&&!p&&!P&&!W&&!u&&e.jsx(ie,{children:e.jsx(oe,{className:"pt-6",children:e.jsxs("div",{className:"text-center max-w-xl mx-auto",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary-50 dark:bg-primary-900/20 mb-4",children:a==="youtube"?e.jsx(ke,{className:"h-8 w-8 text-primary"}):a==="linkedin"?e.jsx(ye,{className:"h-8 w-8 text-primary"}):a==="twitter"?e.jsx(Ue,{className:"h-8 w-8 text-primary"}):e.jsx(jt,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:a==="youtube"?"Extract Content from YouTube Channels":a==="linkedin"?"Scrape LinkedIn Profiles":a==="twitter"?"Extract Tweets from Twitter":"Extract Content from Social Media"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:a==="youtube"?"Paste a YouTube channel handle (starting with @) or URL to extract videos and transcripts for your LinkedIn content.":a==="linkedin"?"Enter a LinkedIn username to scrape their profile and recent posts for content inspiration.":a==="twitter"?"Enter a Twitter username to fetch their recent tweets and threads for content analysis and inspiration.":"Select a platform above and enter the appropriate URL or username to start scraping content."}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[a==="youtube"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-xs font-medium",children:"1"}),e.jsx("span",{children:"Enter a YouTube channel handle (e.g., @channelname) in the input field above"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-xs font-medium",children:"2"}),e.jsx("span",{children:'Click "Get Videos" to fetch content from the channel'})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-xs font-medium",children:"3"}),e.jsx("span",{children:"Select videos and fetch transcripts to create LinkedIn content"})]})]}),a==="linkedin"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-xs font-medium",children:"1"}),e.jsx("span",{children:"Enter a LinkedIn username (e.g., johndoe) in the input field above"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-xs font-medium",children:"2"}),e.jsx("span",{children:'Click "Scrape Profile" to fetch their posts and profile data'})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-xs font-medium",children:"3"}),e.jsx("span",{children:"Select posts to save for content inspiration and analysis"})]})]}),a==="twitter"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-xs font-medium",children:"1"}),e.jsx("span",{children:"Enter a Twitter username (e.g., @username) in the input field above"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-xs font-medium",children:"2"}),e.jsx("span",{children:'Click "Get Tweets" to fetch their recent tweets and threads'})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-xs font-medium",children:"3"}),e.jsx("span",{children:"Select tweets and threads to save for content inspiration and analysis"})]})]})]})]})})}),_&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-md font-medium mb-2",children:"Generated Image"}),e.jsx("div",{className:"flex justify-between mt-4",children:e.jsx(T,{variant:"outline",onClick:Ss,disabled:L,className:"gap-2",children:L?e.jsxs(e.Fragment,{children:[e.jsx(me,{className:"h-4 w-4 animate-spin"}),"Generating Image..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ys,{className:"h-4 w-4"}),"Generate Image"]})})}),O&&e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"relative rounded-md overflow-hidden",children:e.jsx("img",{src:O,alt:"Generated image",className:"w-full max-h-[250px] object-cover"})}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsxs(T,{variant:"outline",onClick:()=>s("/dashboard/images"),className:"gap-2",children:[e.jsx(_e,{className:"h-4 w-4"}),"View in Gallery"]}),e.jsxs(T,{onClick:()=>s("/dashboard/post",{state:{content:_,image:O}}),className:"gap-2",children:[e.jsx(Nt,{className:"h-4 w-4"}),"Create Post with Image"]})]})]})]}),e.jsx(ka,{isOpen:Pe.isOpen,onClose:is,documentUrl:Pe.documentUrl,documentTitle:Pe.documentTitle})]})};export{Va as default};
