import{j as e}from"./ui-vendor-yLFRes2f.js";import{u as ce,d as oe,r as n}from"./react-vendor-DWSrZqKN.js";import{a as de,c as i,bk as G,b as x,aw as f,g as me,s as J,V as pe,R as ue,H as xe,S as he,e as K,Y as fe,a0 as ye,a1 as be,a2 as ge,ae as je,aS as v,N as I,aa as ve}from"./index-CqPKG3Vx.js";import{f as R,a as b}from"./utils-vendor-DFcOAB1P.js";import{C as Ne}from"./checkbox-MKWF4r35.js";const Me=()=>{const N=ce(),F=oe(),{user:m,token:p}=de(),[U,we]=n.useState(!1),[w,y]=n.useState(null),[C,Q]=n.useState(!1),[X,T]=n.useState(!0),[L,Z]=n.useState(!1),[ee,k]=n.useState(!1),[Y,P]=n.useState(!1),[t,$]=n.useState({planId:"expired",planName:"No Plan",status:"expired",expiresAt:null,usedCredits:0,totalCredits:0}),[Ce,ke]=n.useState([{id:"pm-1",type:"card",lastFour:"4242",expiryDate:"04/25",brand:"Visa",isDefault:!0},{id:"pm-2",type:"paypal",email:"user@example.com",isDefault:!1}]),[Pe,De]=n.useState([{id:"inv-001",amount:100,date:new Date("2023-10-15"),status:"paid",downloadUrl:"/invoices/inv-001.pdf"},{id:"inv-002",amount:100,date:new Date("2023-09-15"),status:"paid",downloadUrl:"/invoices/inv-002.pdf"},{id:"inv-003",amount:100,date:new Date("2023-08-15"),status:"paid",downloadUrl:"/invoices/inv-003.pdf"}]),[c,z]=n.useState({cardNumber:"",expiryDate:"",cvc:"",cardholderName:"",isDefault:!0});n.useEffect(()=>{const s=new URLSearchParams(F.search),r=s.get("success"),a=s.get("canceled"),d=s.get("session_id");r==="true"&&d?(console.log("Returned from Stripe with session ID:",d),W(d).then(()=>{console.log("Session verified successfully")}).catch(l=>{console.error("Error verifying session:",l),i.error("Error verifying your payment. Please contact support if you were charged.")}),N("/settings/billing",{replace:!0})):a==="true"&&(i.info("Payment was canceled. You can try again when ready."),N("/settings/billing",{replace:!0}))},[F,N]);const g=async()=>{var s;try{T(!0);const r=await b.get("https://api.brandout.ai/api/user-limits/me",{headers:{Authorization:`Bearer ${p}`}});if(r.data.success){const a=r.data.data;console.log("User subscription data:",a),$({planId:a.planId||"expired",planName:a.planName||"No Plan",status:a.status||"inactive",expiresAt:a.expiresAt?new Date(a.expiresAt):null,usedCredits:a.count||0,totalCredits:a.limit||0}),P(a.autoPay||!1)}else console.error("Failed to fetch subscription:",(s=r.data)==null?void 0:s.message),$({planId:"expired",planName:"No Plan",status:"inactive",expiresAt:null,usedCredits:0,totalCredits:0})}catch(r){console.error("Error fetching subscription:",r),$({planId:"expired",planName:"No Plan",status:"inactive",expiresAt:null,usedCredits:0,totalCredits:0})}finally{T(!1)}},E=[{id:"trial",name:"Trial",price:20,billingPeriod:"monthly",features:["3 Monthly Credits for AI-Generated Content","Valid for 7 days","Content Scraper","Standard Support"],limitations:{workspaces:1,posts:3,carousels:3}},{id:"basic",name:"Basic",price:100,billingPeriod:"monthly",features:["10 Monthly Credits for AI-Generated Content","Content Scraper","Priority Support","Full Access to Templates"],limitations:{workspaces:1,posts:10,carousels:10},isPopular:!0},{id:"premium",name:"Premium",price:200,billingPeriod:"monthly",features:["25 Monthly Credits for AI-Generated Content","Content Scraper","Priority Support","Full Access to Templates","White Label Options"],limitations:{workspaces:1,posts:25,carousels:25}},{id:"custom",name:"Custom",price:200,billingPeriod:"monthly",features:["Custom Number of AI Credits","Content Scraper","Priority Support","Full Access to Templates","White Label Options","Dedicated Account Manager"],limitations:{workspaces:1,posts:1/0,carousels:1/0}}],O=[{id:"pack-5",credits:5,price:50},{id:"pack-10",credits:10,price:85,isPopular:!0},{id:"pack-20",credits:20,price:160}];n.useEffect(()=>{g()},[]);const u=E.find(s=>s.id===t.planId),V=t.totalCredits>0?t.usedCredits/t.totalCredits*100:0,se=[{day:"1",credits:0},{day:"5",credits:2},{day:"10",credits:3},{day:"15",credits:5},{day:"20",credits:7},{day:"25",credits:7},{day:"30",credits:7}],ae=async s=>{try{console.log("Updating user plan with:",s),await b.post(`https://api.brandout.ai/api/user-limits/${m==null?void 0:m.id}/update-plan`,s,{headers:{Authorization:`Bearer ${p}`}}),g(),i.success("Your plan has been updated successfully")}catch(r){console.error("Error updating user plan:",r),i.error("Failed to update your plan. Please try again.")}},re=async s=>{var r;try{y(s);const a={expired:0,trial:1,basic:2,premium:3,custom:4},d=a[t.planId]||0,D=(a[s]||0)<d,S=t.expiresAt&&new Date(t.expiresAt)>new Date;if(D&&S){i.error("Plan downgrade is not allowed during an active subscription period. You can downgrade once your current subscription expires."),y(null);return}if(s==="trial"){const M=new Date;let B=new Date(M);B.setDate(B.getDate()+7);const H={planId:"trial",limit:3,expiresAt:B.toISOString(),planName:"Trial"};await ae(H),await g(),i.success(`Successfully changed to ${H.planName} plan`),y(null);return}const o="https://api.brandout.ai/api",A=o.endsWith("/api")?`${o}/stripe/create-checkout-session`:`${o}/api/stripe/create-checkout-session`;if(!E.find(M=>M.id===s))throw new Error("Invalid plan selected");const _=t.totalCredits-t.usedCredits,q={planId:s,billingPeriod:U?"annual":"monthly",productType:"subscription",mode:"subscription",recurring:U?"year":"month",remainingCredits:_>0?_:0,currentPlanId:t.planId,successUrl:window.location.origin+window.location.pathname+"?success=true&session_id={CHECKOUT_SESSION_ID}",cancelUrl:window.location.origin+window.location.pathname+"?canceled=true"};console.log("Sending plan upgrade request to:",A),console.log("With data:",q);const h=await b.post(A,q,{headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});if(console.log("Plan upgrade response:",h.data),h.data&&h.data.url)window.location.href=h.data.url;else if(h.data&&h.data.sessionUrl)window.location.href=h.data.sessionUrl;else throw new Error("No checkout URL returned")}catch(a){console.error("Error changing plan:",a),a.response?(console.error("Response status:",a.response.status),console.error("Response data:",a.response.data),i.error(`Error: ${((r=a.response.data)==null?void 0:r.message)||"Server error"}`)):i.error("Failed to change plan. Please try again."),y(null)}},te=async s=>{var r;if(!m||!m.id){i.error("You must be logged in to purchase credits");return}y(s);try{const a=O.find(A=>A.id===s),d=(a==null?void 0:a.credits)||parseInt(s.split("-")[1])||0,l="https://api.brandout.ai/api",D=l.endsWith("/api")?`${l}/stripe/create-checkout-session`:`${l}/api/stripe/create-checkout-session`,S={planId:s,productType:"credit-pack",mode:"payment",credits:d,price:a==null?void 0:a.price,successUrl:window.location.origin+window.location.pathname+"?success=true&session_id={CHECKOUT_SESSION_ID}",cancelUrl:window.location.origin+window.location.pathname+"?canceled=true"};console.log("Sending credit pack request to:",D),console.log("With data:",JSON.stringify(S,null,2));const o=await b.post(D,S,{headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});if(console.log("Response from server:",o.data),o.data&&o.data.url)window.location.href=o.data.url;else if(o.data&&o.data.sessionUrl)window.location.href=o.data.sessionUrl;else throw new Error("No checkout URL returned from server")}catch(a){console.error("Error creating checkout session:",a),a.response?(console.error("Response status:",a.response.status),console.error("Response data:",a.response.data),i.error(`Error: ${((r=a.response.data)==null?void 0:r.message)||"Server error"}`)):a.request?i.error("No response received from server. Please check your internet connection."):i.error("Failed to create checkout session. Please try again later."),y(null)}},W=async s=>{try{const r="https://api.brandout.ai/api",a=r.endsWith("/api")?`${r}/stripe/verify-session`:`${r}/api/stripe/verify-session`,d=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify({sessionId:s})}),l=await d.json();if(d.ok&&l.success)await g(),l.productType==="credit-pack"||l.type==="credit-pack"?i.success(`Your payment was successful! ${l.credits||""} credits have been added to your account.`):l.transferredCredits&&l.transferredCredits>0?i.success(`Your plan has been successfully upgraded! ${l.transferredCredits} credits from your previous plan have been transferred.`):i.success("Your plan has been successfully upgraded!");else throw new Error(l.message||"Failed to verify session")}catch(r){console.error("Error verifying session:",r),i.error("Failed to verify payment. Please contact support if your payment was successful.")}};n.useEffect(()=>{const r=new URLSearchParams(window.location.search).get("session_id");r&&(W(r),window.history.replaceState({},document.title,window.location.pathname))},[]),n.useEffect(()=>{(m==null?void 0:m.role)==="admin"&&Z(!0)},[m]);const j=(s,r)=>{z(a=>({...a,[s]:r}))},ie=async()=>{try{if(!p){i.error("Authentication required. Please log in again.");return}if(!c.cardNumber||!c.expiryDate||!c.cvc||!c.cardholderName){i.error("Please fill in all card details");return}const s=c.cardNumber.slice(-4),r="https://api.brandout.ai/api",a=r.endsWith("/api")?`${r}/payment-methods`:`${r}/api/payment-methods`;await b.post(a,{type:"card",lastFour:s,expiryDate:c.expiryDate,cardholderName:c.cardholderName,isDefault:c.isDefault},{headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}}),k(!1),i.success("Payment card added successfully"),z({cardNumber:"",expiryDate:"",cvc:"",cardholderName:"",isDefault:!0}),await g()}catch(s){console.error("Error saving card information:",s),i.error("Failed to save card information. Please try again.")}},le=()=>{L&&N("/admin/billing")},ne=async s=>{try{P(s),(await b.post("https://api.brandout.ai/api/users/subscription/auto-pay",{autoPay:s},{headers:{Authorization:`Bearer ${p}`}})).data.success?i.success(`Auto-renewal ${s?"enabled":"disabled"} successfully`):(i.error("Failed to update auto-renewal setting"),P(!s))}catch(r){console.error("Error toggling auto-pay:",r),i.error("Failed to update auto-renewal setting"),P(!s)}};return e.jsxs("div",{className:"w-full pb-12",children:[e.jsxs("div",{className:"relative w-full bg-primary/5 border-b border-primary/10 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-primary/10",children:e.jsx("div",{className:"h-full bg-primary",style:{width:`${V}%`}})}),e.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(G,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-black",children:"Billing Dashboard"}),e.jsx("p",{className:"text-black/70",children:"Manage your subscription, credits and payments"})]})]}),L&&e.jsx(x,{variant:"outline",className:"ml-auto",onClick:le,children:"Admin View"}),u?e.jsx("div",{className:"w-full sm:w-auto py-2 px-4 rounded-lg bg-white border border-primary/10 shadow-sm flex flex-col sm:flex-row items-center gap-4",children:e.jsxs("div",{className:"flex flex-col items-center sm:items-start",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-sm text-black/70",children:"Your Plan:"}),e.jsx("span",{className:"font-semibold text-black",children:u.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{variant:"outline",className:"bg-primary/5 border-primary/10 text-black/70",children:t.status==="cancelled"?"Cancelled":"Active"}),e.jsx("span",{className:"text-xs text-black/50",children:"•"}),e.jsxs("span",{className:"text-xs text-black/70",children:["Renews ",R(t.expiresAt||new Date,"MMM d")]})]})]})}):e.jsx("div",{className:"w-full sm:w-auto py-2 px-4 rounded-lg bg-white border border-primary/10 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{variant:"outline",className:"bg-destructive/10 text-destructive border-destructive/20",children:"No Active Plan"}),e.jsx("span",{className:"text-sm",children:"Choose a plan to get started"})]})})]})})]}),e.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-primary/10 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"border-b border-primary/10 px-5 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-black",children:"Credits Usage"}),e.jsx(f,{variant:"outline",className:"border-primary/10 text-primary bg-primary/5",children:"This Billing Cycle"})]}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative w-32 h-32",children:[e.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#e2e8f0",strokeWidth:"10"}),e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"currentColor",strokeWidth:"10",strokeDasharray:"282.7",strokeDashoffset:282.7*(1-V/100),strokeLinecap:"round",className:"text-primary transition-all duration-700 ease-out",transform:"rotate(-90 50 50)"})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-3xl font-bold text-black",children:t.usedCredits}),e.jsx("span",{className:"text-xs text-black/70",children:"Used Credits"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center pt-3",children:[e.jsxs("div",{className:"bg-primary/5 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-black/70",children:"Total"}),e.jsx("div",{className:"text-xl font-semibold text-black",children:t.totalCredits})]}),e.jsxs("div",{className:"bg-primary/5 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-black/70",children:"Remaining"}),e.jsx("div",{className:"text-xl font-semibold text-black",children:t.totalCredits-t.usedCredits})]})]}),e.jsxs("div",{className:"pt-6 pb-2",children:[e.jsx("div",{className:"text-sm font-medium text-black mb-3",children:"Usage Over Time"}),e.jsx("div",{className:"h-24 flex items-end",children:se.map((s,r)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsx("div",{className:"w-4/5 bg-primary/20 hover:bg-primary/40 rounded-t transition-all",style:{height:`${s.credits/t.totalCredits*100}%`}}),e.jsx("div",{className:"text-[10px] text-black/60 mt-1",children:s.day})]},r))})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-primary/10 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"border-b border-primary/10 px-5 py-4",children:e.jsx("h2",{className:"text-lg font-semibold text-black",children:"Need More Credits?"})}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsx("div",{className:"space-y-3",children:O.map(s=>e.jsxs("div",{className:`
                      group relative border rounded-xl p-4 transition-all
                      ${s.isPopular?"border-primary bg-primary/5":"border-primary/10 hover:border-primary/30 hover:bg-primary/5"}
                    `,children:[s.isPopular&&e.jsx("div",{className:"absolute -top-2 -right-2 rotate-12",children:e.jsx(f,{className:"bg-primary text-white shadow-sm",children:"Best Value"})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(me,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-black",children:[s.credits," Credits"]}),e.jsxs("div",{className:"text-black/70",children:["$",s.price]})]})]}),e.jsx(x,{variant:"outline",size:"sm",onClick:()=>te(s.id),disabled:w!==null,className:"border-primary/20 text-primary hover:bg-primary/10",children:w===s.id?e.jsx(J,{className:"h-4 w-4 animate-spin"}):e.jsx("span",{children:"Buy"})})]})]},s.id))}),e.jsxs("div",{className:"bg-primary/5 text-xs text-black/70 p-3 rounded-lg",children:[e.jsx("p",{children:"Credits expire at the end of your billing cycle or when your plan expires. Each credit can be used for one AI post or carousel."}),e.jsxs("p",{className:"mt-1",children:[e.jsx("span",{className:"font-medium",children:"Note:"})," Additional credits purchased on the trial plan will also expire when your trial ends."]})]}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsxs(x,{variant:"outline",onClick:()=>k(!0),className:"w-full",children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),"Add Payment Method"]})})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx("div",{className:"bg-white rounded-2xl border border-primary/10 shadow-sm overflow-hidden",children:e.jsxs("div",{className:"border-b border-primary/10 px-5 py-4 flex justify-between items-center flex-wrap gap-2",children:[e.jsx("h2",{className:"text-lg font-semibold text-black",children:"Your Subscription"}),e.jsx("div",{className:"flex items-center justify-center space-x-4 mb-8",children:e.jsx("span",{className:U?"text-gray-500":"font-semibold",children:"Monthly"})}),e.jsx("div",{className:" border border-blue-200 dark:border-blue-800 rounded-lg p-4 text-sm text-blue-800 dark:text-blue-300 mb-6",children:e.jsxs("div",{className:"flex",children:[e.jsx("svg",{className:"h-5 w-5 text-blue-500 mr-2 shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{children:"Plan Change Policy:"}),e.jsx("p",{children:"You can upgrade your plan at any time to get immediate access to additional features and credits."}),e.jsx("p",{className:"mt-1",children:"However, downgrades are only possible at the end of your current billing period. If you request a downgrade, it will automatically take effect once your current subscription expires."})]})]})})]})}),e.jsxs("div",{className:"px-5 py-6",children:[u?e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:`
                    border-2 rounded-lg p-5 relative
                    ${t.status==="cancelled"?"border-black/20":"border-primary"}
                  `,children:[t.status!=="cancelled"&&e.jsx("div",{className:"absolute -top-3 left-3 px-2 bg-white",children:e.jsx(f,{className:"bg-primary text-white",children:"Current Plan"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-black",children:u.name}),e.jsxs("div",{className:"mt-1 text-xl font-bold text-black",children:["$",u.price,e.jsxs("span",{className:"text-sm font-normal text-black/70",children:["/",u.billingPeriod==="annual"?"year":"month"]})]}),e.jsx("div",{className:"mt-3 text-black/70",children:t.status==="cancelled"?e.jsxs("div",{className:"flex items-center text-black/70",children:[e.jsx(pe,{className:"h-4 w-4 mr-1.5"}),"Access until ",R(t.expiresAt||new Date,"MMMM d, yyyy")]}):e.jsxs("div",{className:"flex items-center text-black/70",children:[e.jsx(ue,{className:"h-4 w-4 mr-1.5"}),"Renews on ",R(t.expiresAt||new Date,"MMMM d, yyyy")]})})]}),e.jsxs("div",{className:"sm:text-right",children:[e.jsxs("div",{className:"mt-3 bg-primary/5 px-3 py-2 inline-block rounded-lg text-center",children:[e.jsxs("div",{className:"text-sm font-medium text-black",children:[u.limitations.carousels," Credits"]}),e.jsxs("div",{className:"text-xs text-black/70",children:["per ",u.billingPeriod==="annual"?"year":"month"]})]}),t.status!=="cancelled"&&e.jsxs("div",{className:"mt-3 flex justify-end items-center gap-2",children:[e.jsxs("div",{className:"text-sm text-right",children:[e.jsx("span",{className:"font-medium text-black",children:"Auto-renewal"}),e.jsx("p",{className:"text-xs text-black/70",children:Y?"Your subscription will automatically renew":"Your subscription will expire at the end of period"})]}),e.jsx(xe,{checked:Y,onCheckedChange:ne,disabled:X})]})]})]})]})}):e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-5 text-center",children:[e.jsx("h3",{className:"text-xl font-bold text-black mb-2",children:"No Active Plan"}),e.jsx("p",{className:"text-black/70 mb-4",children:"Purchase a plan to start using our services"}),e.jsx(x,{onClick:()=>window.location.href="#plans",children:"View Available Plans"})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-black",children:"Available Plans"}),e.jsx(x,{variant:"ghost",size:"sm",onClick:()=>Q(!C),className:"text-primary hover:text-primary/70 hover:bg-primary/5",children:C?"Simple View":"Detailed View"})]}),e.jsx("div",{className:"space-y-4",children:E.map(s=>e.jsxs("div",{className:`
                        relative border rounded-xl transition-all overflow-hidden
                        ${s.id===t.planId?"border-primary":"border-primary/10 hover:border-primary/30"}
                      `,children:[e.jsxs("div",{className:"p-4 gap-4 grid grid-cols-12",children:[e.jsxs("div",{className:"col-span-12 sm:col-span-3 flex flex-row sm:flex-col justify-between sm:justify-start items-center sm:items-start mb-2 sm:mb-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2",children:[e.jsx("h4",{className:"text-lg font-semibold text-black",children:s.name}),s.isPopular&&e.jsx(f,{className:"bg-primary text-white",children:"Popular"})]}),e.jsx("div",{className:"text-right sm:text-left mt-0 sm:mt-2",children:s.id==="custom"?e.jsx("span",{className:"font-semibold text-black",children:"Custom"}):e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"font-semibold text-black",children:["$",s.price]}),e.jsxs("span",{className:"text-sm text-black/70",children:["/",s.billingPeriod==="annual"?"yr":"mo"]})]})})]}),e.jsx("div",{className:`col-span-12 sm:col-span-6 ${C?"block":"hidden sm:block"}`,children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(he,{className:"h-4 w-4 text-primary flex-shrink-0"}),e.jsx("span",{className:"text-sm text-black",children:s.limitations.carousels===1/0?"Unlimited Credits":`${s.limitations.carousels} Credits`})]}),s.features.slice(0,3).map((r,a)=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(K,{className:"h-4 w-4 text-primary flex-shrink-0"}),e.jsx("span",{className:"text-sm text-black truncate",children:r})]},a))]})}),e.jsx("div",{className:"col-span-12 sm:col-span-3 flex justify-end items-center",children:s.id===t.planId?e.jsx(f,{variant:"outline",className:"bg-primary/5 border-primary/10 text-primary",children:"Current Plan"}):e.jsx(x,{variant:s.id==="custom"?"outline":"default",size:"sm",disabled:w!==null,onClick:()=>s.id==="custom"?window.open("mailto:sales@yourcompany.com","_blank"):re(s.id),className:s.id==="custom"?"border-primary/20 text-primary hover:bg-primary/5":"",children:w===s.id?e.jsx(J,{className:"h-4 w-4 animate-spin"}):s.id==="custom"?e.jsx("span",{children:"Contact Us"}):s.id==="trial"?e.jsx("span",{children:"Start Trial"}):e.jsx("span",{children:"Upgrade"})})})]}),C&&e.jsx("div",{className:"border-t border-primary/10 bg-primary/5 p-4",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:s.features.map((r,a)=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(K,{className:"h-4 w-4 text-primary flex-shrink-0"}),e.jsx("span",{className:"text-sm text-black",children:r})]},a))})})]},s.id))})]})]})]})]})}),e.jsx(fe,{open:ee,onOpenChange:k,children:e.jsxs(ye,{children:[e.jsxs(be,{children:[e.jsx(ge,{children:"Add Payment Card"}),e.jsx(je,{children:"Add a new payment method to your account"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"cardholderName",children:"Cardholder Name"}),e.jsx(I,{id:"cardholderName",value:c.cardholderName,onChange:s=>j("cardholderName",s.target.value),placeholder:"John Doe"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"cardNumber",children:"Card Number"}),e.jsx(I,{id:"cardNumber",value:c.cardNumber,onChange:s=>j("cardNumber",s.target.value.replace(/\D/g,"")),placeholder:"1234 5678 9012 3456",maxLength:16})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"expiryDate",children:"Expiry Date"}),e.jsx(I,{id:"expiryDate",value:c.expiryDate,onChange:s=>j("expiryDate",s.target.value),placeholder:"MM/YY",maxLength:5})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(v,{htmlFor:"cvc",children:"CVC"}),e.jsx(I,{id:"cvc",value:c.cvc,onChange:s=>j("cvc",s.target.value.replace(/\D/g,"")),placeholder:"123",maxLength:3})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ne,{id:"defaultCard",checked:c.isDefault,onCheckedChange:s=>j("isDefault",!!s)}),e.jsx(v,{htmlFor:"defaultCard",children:"Set as default payment method"})]})]}),e.jsxs(ve,{children:[e.jsx(x,{variant:"outline",onClick:()=>k(!1),children:"Cancel"}),e.jsx(x,{onClick:ie,children:"Add Card"})]})]})})]})};export{Me as default};
