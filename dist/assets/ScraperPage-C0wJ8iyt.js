import{c as It,d as Ge,j as e,p as Et,a as we,f as $t,h as $s,g as At,b as As,e as Ls}from"./ui-vendor-yLFRes2f.js";import{r as c,R as V,u as Ps}from"./react-vendor-DWSrZqKN.js";import{k as pe,b4 as Fs,G as qe,m as Je,aA as De,aB as Ve,aC as Oe,s as xe,l as Lt,aX as _e,R as Pt,a3 as Be,a4 as We,a5 as me,q as Rs,a as Ms,aI as Us,b as T,aq as oe,ar as he,as as ve,at as vt,au as ce,aR as Se,L as ye,T as Me,ax as zs,N as Ds,a7 as yt,aV as jt,aF as Ce,aw as Vs,A as wt,n as Ue,i as Os,g as Bs,I as Ws,J as je,X as Ft,a6 as Nt,b1 as ze,F as de,a$ as Ys,b5 as Hs,D as kt,b6 as Gs}from"./index-CqPKG3Vx.js";import{a as ee}from"./utils-vendor-DFcOAB1P.js";import{C as Ye}from"./checkbox-MKWF4r35.js";import{H as Rt}from"./heart-DZF6e_5t.js";import{T as qs,R as Js}from"./text-g9YR7XQA.js";import{F as ue}from"./folder-DWkz83gx.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zs=pe("ListFilter",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M7 12h10",key:"b7w52i"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ks=pe("MessagesSquare",[["path",{d:"M14 9a2 2 0 0 1-2 2H6l-4 4V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2z",key:"p1xzt8"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v11l-4-4h-6a2 2 0 0 1-2-2v-1",key:"1cx29u"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=pe("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xs=pe("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=pe("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=pe("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);var Ie="Collapsible",[ta,Ut]=It(Ie),[sa,Ze]=ta(Ie),zt=c.forwardRef((s,l)=>{const{__scopeCollapsible:d,open:a,defaultOpen:f,disabled:n,onOpenChange:r,...j}=s,[N,v]=Ge({prop:a,defaultProp:f??!1,onChange:r,caller:Ie});return e.jsx(sa,{scope:d,disabled:n,contentId:Et(),open:N,onOpenToggle:c.useCallback(()=>v(p=>!p),[v]),children:e.jsx(we.div,{"data-state":Xe(N),"data-disabled":n?"":void 0,...j,ref:l})})});zt.displayName=Ie;var Dt="CollapsibleTrigger",Vt=c.forwardRef((s,l)=>{const{__scopeCollapsible:d,...a}=s,f=Ze(Dt,d);return e.jsx(we.button,{type:"button","aria-controls":f.contentId,"aria-expanded":f.open||!1,"data-state":Xe(f.open),"data-disabled":f.disabled?"":void 0,disabled:f.disabled,...a,ref:l,onClick:$t(s.onClick,f.onOpenToggle)})});Vt.displayName=Dt;var Ke="CollapsibleContent",Ot=c.forwardRef((s,l)=>{const{forceMount:d,...a}=s,f=Ze(Ke,s.__scopeCollapsible);return e.jsx($s,{present:d||f.open,children:({present:n})=>e.jsx(aa,{...a,ref:l,present:n})})});Ot.displayName=Ke;var aa=c.forwardRef((s,l)=>{const{__scopeCollapsible:d,present:a,children:f,...n}=s,r=Ze(Ke,d),[j,N]=c.useState(a),v=c.useRef(null),p=At(l,v),y=c.useRef(0),w=y.current,E=c.useRef(0),R=E.current,L=r.open||j,F=c.useRef(L),z=c.useRef(void 0);return c.useEffect(()=>{const k=requestAnimationFrame(()=>F.current=!1);return()=>cancelAnimationFrame(k)},[]),As(()=>{const k=v.current;if(k){z.current=z.current||{transitionDuration:k.style.transitionDuration,animationName:k.style.animationName},k.style.transitionDuration="0s",k.style.animationName="none";const Y=k.getBoundingClientRect();y.current=Y.height,E.current=Y.width,F.current||(k.style.transitionDuration=z.current.transitionDuration,k.style.animationName=z.current.animationName),N(a)}},[r.open,a]),e.jsx(we.div,{"data-state":Xe(r.open),"data-disabled":r.disabled?"":void 0,id:r.contentId,hidden:!L,...n,ref:p,style:{"--radix-collapsible-content-height":w?`${w}px`:void 0,"--radix-collapsible-content-width":R?`${R}px`:void 0,...s.style},children:L&&f})});function Xe(s){return s?"open":"closed"}var na=zt,ra=Vt,la=Ot,le="Accordion",ia=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Qe,oa,ca]=Ls(le),[Ee,Ua]=It(le,[ca,Ut]),et=Ut(),Bt=V.forwardRef((s,l)=>{const{type:d,...a}=s,f=a,n=a;return e.jsx(Qe.Provider,{scope:s.__scopeAccordion,children:d==="multiple"?e.jsx(ua,{...n,ref:l}):e.jsx(ma,{...f,ref:l})})});Bt.displayName=le;var[Wt,da]=Ee(le),[Yt,ha]=Ee(le,{collapsible:!1}),ma=V.forwardRef((s,l)=>{const{value:d,defaultValue:a,onValueChange:f=()=>{},collapsible:n=!1,...r}=s,[j,N]=Ge({prop:d,defaultProp:a??"",onChange:f,caller:le});return e.jsx(Wt,{scope:s.__scopeAccordion,value:V.useMemo(()=>j?[j]:[],[j]),onItemOpen:N,onItemClose:V.useCallback(()=>n&&N(""),[n,N]),children:e.jsx(Yt,{scope:s.__scopeAccordion,collapsible:n,children:e.jsx(Ht,{...r,ref:l})})})}),ua=V.forwardRef((s,l)=>{const{value:d,defaultValue:a,onValueChange:f=()=>{},...n}=s,[r,j]=Ge({prop:d,defaultProp:a??[],onChange:f,caller:le}),N=V.useCallback(p=>j((y=[])=>[...y,p]),[j]),v=V.useCallback(p=>j((y=[])=>y.filter(w=>w!==p)),[j]);return e.jsx(Wt,{scope:s.__scopeAccordion,value:r,onItemOpen:N,onItemClose:v,children:e.jsx(Yt,{scope:s.__scopeAccordion,collapsible:!0,children:e.jsx(Ht,{...n,ref:l})})})}),[xa,$e]=Ee(le),Ht=V.forwardRef((s,l)=>{const{__scopeAccordion:d,disabled:a,dir:f,orientation:n="vertical",...r}=s,j=V.useRef(null),N=At(j,l),v=oa(d),y=Fs(f)==="ltr",w=$t(s.onKeyDown,E=>{var i;if(!ia.includes(E.key))return;const R=E.target,L=v().filter(S=>{var D;return!((D=S.ref.current)!=null&&D.disabled)}),F=L.findIndex(S=>S.ref.current===R),z=L.length;if(F===-1)return;E.preventDefault();let k=F;const Y=0,M=z-1,q=()=>{k=F+1,k>M&&(k=Y)},X=()=>{k=F-1,k<Y&&(k=M)};switch(E.key){case"Home":k=Y;break;case"End":k=M;break;case"ArrowRight":n==="horizontal"&&(y?q():X());break;case"ArrowDown":n==="vertical"&&q();break;case"ArrowLeft":n==="horizontal"&&(y?X():q());break;case"ArrowUp":n==="vertical"&&X();break}const U=k%z;(i=L[U].ref.current)==null||i.focus()});return e.jsx(xa,{scope:d,disabled:a,direction:f,orientation:n,children:e.jsx(Qe.Slot,{scope:d,children:e.jsx(we.div,{...r,"data-orientation":n,ref:N,onKeyDown:a?void 0:w})})})}),Te="AccordionItem",[pa,tt]=Ee(Te),Gt=V.forwardRef((s,l)=>{const{__scopeAccordion:d,value:a,...f}=s,n=$e(Te,d),r=da(Te,d),j=et(d),N=Et(),v=a&&r.value.includes(a)||!1,p=n.disabled||s.disabled;return e.jsx(pa,{scope:d,open:v,disabled:p,triggerId:N,children:e.jsx(na,{"data-orientation":n.orientation,"data-state":Qt(v),...j,...f,ref:l,disabled:p,open:v,onOpenChange:y=>{y?r.onItemOpen(a):r.onItemClose(a)}})})});Gt.displayName=Te;var qt="AccordionHeader",Jt=V.forwardRef((s,l)=>{const{__scopeAccordion:d,...a}=s,f=$e(le,d),n=tt(qt,d);return e.jsx(we.h3,{"data-orientation":f.orientation,"data-state":Qt(n.open),"data-disabled":n.disabled?"":void 0,...a,ref:l})});Jt.displayName=qt;var He="AccordionTrigger",Zt=V.forwardRef((s,l)=>{const{__scopeAccordion:d,...a}=s,f=$e(le,d),n=tt(He,d),r=ha(He,d),j=et(d);return e.jsx(Qe.ItemSlot,{scope:d,children:e.jsx(ra,{"aria-disabled":n.open&&!r.collapsible||void 0,"data-orientation":f.orientation,id:n.triggerId,...j,...a,ref:l})})});Zt.displayName=He;var Kt="AccordionContent",Xt=V.forwardRef((s,l)=>{const{__scopeAccordion:d,...a}=s,f=$e(le,d),n=tt(Kt,d),r=et(d);return e.jsx(la,{role:"region","aria-labelledby":n.triggerId,"data-orientation":f.orientation,...r,...a,ref:l,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...s.style}})});Xt.displayName=Kt;function Qt(s){return s?"open":"closed"}var ga=Bt,fa=Gt,ba=Jt,es=Zt,ts=Xt;const va=ga,ss=c.forwardRef(({className:s,...l},d)=>e.jsx(fa,{ref:d,className:qe("border-b",s),...l}));ss.displayName="AccordionItem";const as=c.forwardRef(({className:s,children:l,...d},a)=>e.jsx(ba,{className:"flex",children:e.jsxs(es,{ref:a,className:qe("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s),...d,children:[l,e.jsx(Je,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));as.displayName=es.displayName;const ns=c.forwardRef(({className:s,children:l,...d},a)=>e.jsx(ts,{ref:a,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...d,children:e.jsx("div",{className:qe("pb-4 pt-0",s),children:l})}));ns.displayName=ts.displayName;const St=s=>{const l=new Map,d=new Map,a=new Set;s.forEach(r=>d.set(r.id,r)),console.log(`Organizing ${s.length} tweets into threads`);const f=new Map;s.forEach(r=>{if(r.is_self_thread&&r.conversation_id)f.has(r.conversation_id)||f.set(r.conversation_id,new Set),f.get(r.conversation_id).add(r.id),r.in_reply_to_tweet_id&&d.has(r.in_reply_to_tweet_id)&&f.get(r.conversation_id).add(r.in_reply_to_tweet_id);else if(r.in_reply_to_tweet_id&&r.in_reply_to_user_id){const j=d.get(r.in_reply_to_tweet_id);if(j&&j.author.id===r.author.id){const N=r.conversation_id||r.thread_id||r.in_reply_to_tweet_id;f.has(N)||f.set(N,new Set),f.get(N).add(r.id),f.get(N).add(r.in_reply_to_tweet_id)}}}),f.forEach((r,j)=>{if(r.size>1){console.log(`Found self-thread with ID ${j} containing ${r.size} tweets`);const N=Array.from(r).map(v=>d.get(v)).filter(v=>v!==void 0);N.sort((v,p)=>{if(v.thread_position!==void 0&&p.thread_position!==void 0)return v.thread_position-p.thread_position;if(v.thread_index!==void 0&&p.thread_index!==void 0)return v.thread_index-p.thread_index;try{return new Date(v.created_at).getTime()-new Date(p.created_at).getTime()}catch{return Number(BigInt(v.id)-BigInt(p.id))}}),N.length>1&&(N.forEach((v,p)=>{v.thread_position=p,v.thread_index=p,a.add(v.id)}),l.set(j,N))}}),s.forEach(r=>{if(a.has(r.id))return;const j=r.conversation_id||r.thread_id||r.id,N=s.filter(w=>!a.has(w.id)&&(w.conversation_id&&w.conversation_id===j||w.thread_id&&w.thread_id===j||w.in_reply_to_tweet_id&&d.has(w.in_reply_to_tweet_id)&&w.author.id===r.author.id));if(N.length<=1){a.add(r.id),l.has("standalone")||l.set("standalone",[]),l.get("standalone").push(r);return}const v=[],p=new Map;N.forEach(w=>{w.in_reply_to_tweet_id&&(p.has(w.in_reply_to_tweet_id)||p.set(w.in_reply_to_tweet_id,[]),p.get(w.in_reply_to_tweet_id).push(w))});let y=N.find(w=>!w.in_reply_to_tweet_id||!N.some(E=>E.id===w.in_reply_to_tweet_id));if(y||(N.sort((w,E)=>{try{return new Date(w.created_at).getTime()-new Date(E.created_at).getTime()}catch{return Number(BigInt(w.id)-BigInt(E.id))}}),y=N[0]),y){v.push(y),a.add(y.id);const w=(E,R=0)=>{if(R>10)return[];if(!p.has(E))return[];const L=[],F=p.get(E).sort((z,k)=>{try{return new Date(z.created_at).getTime()-new Date(k.created_at).getTime()}catch{return Number(BigInt(z.id)-BigInt(k.id))}});for(const z of F)a.has(z.id)||(L.push(z),a.add(z.id),L.push(...w(z.id,R+1)));return L};v.push(...w(y.id))}else{const w=[...N].sort((E,R)=>{try{return new Date(E.created_at).getTime()-new Date(R.created_at).getTime()}catch{return Number(BigInt(E.id)-BigInt(R.id))}});v.push(...w),w.forEach(E=>a.add(E.id))}v.length>1?(v.forEach((w,E)=>{w.thread_position=E,w.thread_index=E}),l.set(j,v)):v.length===1&&(l.has("standalone")||l.set("standalone",[]),l.get("standalone").push(v[0]))}),s.forEach(r=>{a.has(r.id)||(l.has("standalone")||l.set("standalone",[]),l.get("standalone").push(r),a.add(r.id))});const n=[];return l.forEach((r,j)=>{j==="standalone"?n.push(...r):r.length>1&&n.push({id:j,tweets:r,author:r[0].author,created_at:r[0].created_at})}),console.log(`Organized tweets into ${n.filter(r=>"tweets"in r).length} threads and ${n.filter(r=>!("tweets"in r)).length} standalone tweets`),n.sort((r,j)=>{const N="tweets"in r?new Date(r.tweets[0].created_at).getTime():new Date(r.created_at).getTime();return("tweets"in j?new Date(j.tweets[0].created_at).getTime():new Date(j.created_at).getTime())-N})},rs=({media:s})=>!s||s.length===0?null:s.length>1?e.jsx("div",{className:`grid gap-2 mt-4 rounded-xl overflow-hidden ${s.length===2||s.length===3,"grid-cols-2"}`,children:s.map((l,d)=>e.jsx("div",{className:`${s.length===3&&d===0?"row-span-2":s.length===4&&d<2?"col-span-1":""} overflow-hidden relative`,children:e.jsx(Ct,{media:l})},l.media_key))}):e.jsx("div",{className:"mt-4 rounded-xl overflow-hidden relative",children:e.jsx(Ct,{media:s[0]})}),Ct=({media:s})=>{var p;const[l,d]=c.useState(!1),[a,f]=c.useState(!1),n=c.useRef(null);c.useEffect(()=>{s.type==="photo"&&n.current&&n.current.complete&&d(!0)},[s.type]);const r=()=>{d(!0)},j=()=>{f(!0),console.error(`Failed to load media: ${s.url}`)},v=((p=s.url)==null?void 0:p.includes("profile_images"))?"profile-media-container":"media-container";return s.type==="video"||s.type==="animated_gif"?e.jsxs("div",{className:"media-container relative",children:[!l&&e.jsx("div",{className:"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center",children:e.jsx("span",{className:"text-sm text-gray-600",children:"Loading video..."})}),e.jsx("video",{ref:n,src:s.url,poster:s.preview_image_url,controls:s.type==="video",autoPlay:s.type==="animated_gif",loop:s.type==="animated_gif",muted:s.type==="animated_gif",playsInline:!0,className:"w-full h-auto object-contain",onLoadedData:r,onError:j}),a&&e.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:e.jsx("span",{className:"text-sm text-gray-500",children:"Video unavailable"})})]}):e.jsxs("div",{className:v+" relative",children:[e.jsx("img",{ref:n,src:s.url,alt:s.alt_text||"Tweet media",loading:"lazy",className:`w-full transition-opacity duration-500 ${l?"opacity-100":"opacity-0"}`,onLoad:r,onError:j}),!l&&!a&&e.jsx("div",{className:"absolute inset-0 bg-gray-200 animate-pulse"}),a&&e.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:e.jsx("span",{className:"text-sm text-gray-500",children:"Image unavailable"})})]})},_t=({tweet:s,isSelected:l,onSelectToggle:d})=>{var R,L,F,z,k,Y;const[a,f]=c.useState(!1),[n,r]=c.useState(null),[j,N]=c.useState(!1);c.useEffect(()=>{if(!(a||n)&&!s.savedAt&&s.full_text&&s.full_text.length>s.text.length+20){r({...s,full_text:s.full_text});return}},[s,a,n]);const v=M=>{try{const q=new Date(M),U=(new Date().getTime()-q.getTime())/(1e3*60*60);return U<1?`${Math.floor(U*60)}m`:U<24?`${Math.floor(U)}h`:`${Math.floor(U/24)}d`}catch{return M}},p=M=>{if(!M)return!1;if(M.endsWith("…")||M.endsWith("...")||M.includes("… https://")||M.includes("... https://"))return!0;const X=/[\u0900-\u097F\u0600-\u06FF\u0590-\u05FF\u3040-\u30FF\u3400-\u4DBF\u4E00-\u9FFF]/.test(M)?180:240;return M.length>=X},y=c.useMemo(()=>{const M=(n==null?void 0:n.full_text)||s.full_text||s.text||"";return p(M)||s.is_long===!0},[s,n]),w=async()=>{var M;if(j){N(!1);return}if(N(!0),s.full_text||s.text,s.full_text&&s.full_text.length>(((M=s.text)==null?void 0:M.length)||0)+10){console.log(`Using tweet's full_text property for ${s.id}`),r({...s,full_text:s.full_text});return}if(s.savedAt){console.log(`Showing saved tweet content for ${s.id}`);return}console.log(`Tweet ${s.id} expanded - showing available content`)},E=M=>{const q=n;let X="";q!=null&&q.full_text?X=q.full_text:M.full_text?X=M.full_text:X=M.text;let U=X;if(U=U.replace(/\s*(https:\/\/t\.co\/\w{10,})\s*$/g,""),/https?:\/\/(?:bit\.ly|tinyurl|goo\.gl|t\.co)\/\w+/.test(U)||(U=U.replace(/(\s*[…\.]{3,})$/g,"")),j)return U;if(y||U.length>240){const i=Math.min(220,U.length/2);let S=U.substring(0,i);const D=/https?:\/\/[^\s]+/g,$=U.match(D)||[];for(const O of $){const G=U.indexOf(O);G<i&&G+O.length>i&&(G+O.length<i+30?S=U.substring(0,G+O.length):S=U.substring(0,G))}const H=S.lastIndexOf(" ");return H>i*.8&&(S=S.substring(0,H)),S+"..."}return U};return e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden w-full",children:e.jsx("div",{className:"px-3 py-3 h-full flex flex-col",children:e.jsxs("div",{className:"flex space-x-3 flex-1",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs(De,{className:"h-10 w-10",children:[e.jsx(Ve,{src:(R=s.author)==null?void 0:R.profile_image_url,alt:(L=s.author)==null?void 0:L.name,className:"object-cover"}),e.jsx(Oe,{className:"bg-gray-200 text-gray-600 text-sm font-medium",children:((z=(F=s.author)==null?void 0:F.name)==null?void 0:z.charAt(0))||"U"})]})}),e.jsxs("div",{className:"flex-1 min-w-0 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center space-x-1 min-w-0 text-sm",children:[e.jsx("span",{className:"font-bold text-gray-900 truncate",children:(k=s.author)==null?void 0:k.name}),e.jsxs("span",{className:"text-gray-500 text-xs",children:["@",(Y=s.author)==null?void 0:Y.username]}),e.jsx("span",{className:"text-gray-400 text-xs",children:"·"}),e.jsx("span",{className:"text-gray-500 text-xs",children:v(s.created_at)}),s.savedAt&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-400 text-xs",children:"·"}),e.jsx("span",{className:"text-green-600 text-xs bg-green-50 px-1.5 py-0.5 rounded-full font-medium",children:"Saved"})]})]}),e.jsx("div",{className:"flex items-center space-x-1 flex-shrink-0",children:e.jsx(Ye,{checked:l,onCheckedChange:()=>d(s),className:"h-4 w-4"})})]}),e.jsx("div",{className:"mb-3 flex-1",children:e.jsx("div",{className:"text-gray-900 text-sm leading-5 whitespace-pre-wrap break-words",children:a?e.jsxs("div",{className:"flex items-center text-gray-500 text-xs",children:[e.jsx(xe,{className:"animate-spin h-3 w-3 mr-2"}),"Loading..."]}):e.jsxs(e.Fragment,{children:[E(s),(y||s.text.length>240)&&e.jsx("button",{onClick:w,className:"mt-2 text-blue-500 hover:text-blue-600 text-xs font-normal inline-flex items-center space-x-1 transition-colors",disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"animate-spin h-3 w-3"}),e.jsx("span",{children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:j?"Show less":"Show more"}),j?e.jsx(Lt,{className:"h-3 w-3"}):e.jsx(Je,{className:"h-3 w-3"})]})})]})})}),s.media&&s.media.length>0&&e.jsx("div",{className:"mb-3 rounded-xl overflow-hidden border border-gray-200",children:e.jsx(rs,{media:s.media})}),e.jsxs("div",{className:"flex items-center justify-between max-w-xs mt-auto",children:[e.jsxs("button",{className:"flex items-center space-x-1 text-gray-400 hover:text-blue-500 hover:bg-blue-50 px-2 py-1 rounded-full transition-colors group text-xs",children:[e.jsx(_e,{className:"h-3 w-3 group-hover:text-blue-500"}),e.jsx("span",{className:"group-hover:text-blue-500",children:s.reply_count||0})]}),e.jsxs("button",{className:"flex items-center space-x-1 text-gray-400 hover:text-green-500 hover:bg-green-50 px-2 py-1 rounded-full transition-colors group text-xs",children:[e.jsx(Pt,{className:"h-3 w-3 group-hover:text-green-500"}),e.jsx("span",{className:"group-hover:text-green-500",children:s.retweet_count||0})]}),e.jsxs("button",{className:"flex items-center space-x-1 text-gray-400 hover:text-red-500 hover:bg-red-50 px-2 py-1 rounded-full transition-colors group text-xs",children:[e.jsx(Rt,{className:"h-3 w-3 group-hover:text-red-500"}),e.jsx("span",{className:"group-hover:text-red-500",children:s.favorite_count||0})]}),e.jsxs("button",{className:"flex items-center space-x-1 text-gray-400 hover:text-blue-500 hover:bg-blue-50 px-2 py-1 rounded-full transition-colors group text-xs",children:[e.jsx(Mt,{className:"h-3 w-3 group-hover:text-blue-500"}),e.jsx("span",{className:"group-hover:text-blue-500",children:s.quote_count||0})]})]})]})]})})})},Tt=({thread:s,selectedTweets:l=new Set,onSelectToggle:d=()=>{},onSelectThread:a=()=>{}})=>{var U;const[f,n]=c.useState(!0),[r,j]=c.useState(s.tweets),[N,v]=c.useState(new Set),[p,y]=c.useState(new Set),[w,E]=c.useState(new Map);if(!s||!s.tweets||s.tweets.length===0)return console.error("Thread is empty or missing tweets array"),null;c.useEffect(()=>{s.tweets.some(i=>i.savedAt)||s.tweets.forEach(i=>{i.full_text&&i.full_text.length>i.text.length+20&&(E(S=>new Map(S).set(i.id,i)),N.has(i.id)||v(S=>new Set(S).add(i.id)))})},[s.tweets]);const R=i=>{try{const S=new Date(i),$=(new Date().getTime()-S.getTime())/(1e3*60*60);return $<1?`${Math.floor($*60)}m`:$<24?`${Math.floor($)}h`:`${Math.floor($/24)}d`}catch{return i}},L=s.tweets.every(i=>l.has(i.id));s.tweets.some(i=>l.has(i.id));const F=()=>{a(s,!L)},z=s.tweets[0],k=s.author||z.author,Y=i=>{if(!i)return!1;if(i.endsWith("…")||i.endsWith("...")||i.includes("… https://")||i.includes("... https://"))return!0;const D=/[\u0900-\u097F\u0600-\u06FF\u0590-\u05FF\u3040-\u30FF\u3400-\u4DBF\u4E00-\u9FFF]/.test(i)?180:240;return i.length>=D},M=i=>{const S=i.full_text||i.text||"";return Y(S)||i.is_long===!0},q=async i=>{var O;const S=s.tweets.find(G=>G.id===i);if(!S){console.error(`Tweet with ID ${i} not found in thread`);return}const D=new Set(N);if(N.has(i)){D.delete(i),v(D);return}D.add(i),v(D);const $=w.get(i),H=S.full_text||S.text||"";if($&&$.full_text&&$.full_text.length>H.length+20){console.log(`Using existing full tweet content for ${i}`);return}if(S.full_text&&S.full_text.length>(((O=S.text)==null?void 0:O.length)||0)+10){console.log(`Using tweet's full_text property for ${i}`),E(G=>new Map(G).set(i,{...S,full_text:S.full_text}));return}if(S.savedAt){console.log(`Showing saved tweet content for ${i}`);return}console.log(`Tweet ${i} expanded - showing available content`)},X=i=>{const S=w.get(i.id);let D="";S!=null&&S.full_text?D=S.full_text:i.full_text?D=i.full_text:D=i.text;let $=D;if($=$.replace(/\s*(https:\/\/t\.co\/\w{10,})\s*$/g,""),/https?:\/\/(?:bit\.ly|tinyurl|goo\.gl|t\.co)\/\w+/.test($)||($=$.replace(/(\s*[…\.]{3,})$/g,"")),N.has(i.id))return $;if(M(i)||$.length>240){const H=Math.min(220,$.length/2);let O=$.substring(0,H);const G=/https?:\/\/[^\s]+/g,A=$.match(G)||[];for(const Q of A){const te=$.indexOf(Q);te<H&&te+Q.length>H&&(te+Q.length<H+30?O=$.substring(0,te+Q.length):O=$.substring(0,te))}const ie=O.lastIndexOf(" ");return ie>H*.8&&(O=O.substring(0,ie)),O+"..."}return $};return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-2xl shadow-sm hover:shadow-md transition-all duration-200 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 border-b border-gray-100 bg-gray-50/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(De,{className:"h-8 w-8",children:[e.jsx(Ve,{src:k==null?void 0:k.profile_image_url,alt:(k==null?void 0:k.name)||"Thread author",className:"object-cover"}),e.jsx(Oe,{className:"bg-gray-200 text-gray-600 text-xs font-medium",children:((U=k==null?void 0:k.name)==null?void 0:U.charAt(0))||"T"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-1 text-sm",children:[e.jsx("h3",{className:"font-bold text-gray-900 truncate",children:(k==null?void 0:k.name)||"Thread Author"}),e.jsxs("span",{className:"text-gray-500",children:["@",(k==null?void 0:k.username)||"user"]}),e.jsx("span",{className:"text-gray-400",children:"·"}),e.jsx("span",{className:"text-gray-500",children:R(z.created_at)})]}),e.jsx("div",{className:"flex items-center space-x-1 mt-0.5",children:e.jsxs("div",{className:"flex items-center space-x-1 text-xs bg-blue-100 text-blue-800 px-2 py-0.5 rounded-full",children:[e.jsx("span",{className:"font-semibold",children:s.tweets.length}),e.jsx("span",{children:"tweets"})]})})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Ye,{checked:L,onCheckedChange:()=>F(),className:"h-4 w-4"}),e.jsx("button",{onClick:F,className:"text-xs text-gray-500 hover:text-blue-600 hover:bg-blue-50 px-2 py-1 rounded-md transition-colors",children:e.jsx(Xs,{className:"h-3 w-3"})})]})]})}),e.jsx("div",{className:"relative",children:r.map((i,S)=>{var D,$,H,O,G,A;return e.jsxs("div",{className:"relative",children:[S<r.length-1&&e.jsx("div",{className:"absolute left-7 top-12 w-0.5 h-[calc(100%-48px)] bg-gray-300 z-0"}),e.jsx("div",{className:"relative z-10 px-4 py-3 hover:bg-gray-50/30 transition-colors",children:e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("div",{className:"flex-shrink-0 relative",children:[e.jsxs(De,{className:"h-8 w-8 ring-1 ring-white relative z-10",children:[e.jsx(Ve,{src:(D=i.author)==null?void 0:D.profile_image_url,alt:($=i.author)==null?void 0:$.name,className:"object-cover"}),e.jsx(Oe,{className:"bg-gray-200 text-gray-600 text-xs font-medium",children:((O=(H=i.author)==null?void 0:H.name)==null?void 0:O.charAt(0))||"U"})]}),e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 h-4 w-4 bg-blue-500 text-white text-xs font-bold rounded-full flex items-center justify-center z-20 border border-white",children:S+1})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsxs("div",{className:"flex items-center space-x-1 min-w-0 text-sm",children:[e.jsx("span",{className:"font-semibold text-gray-900 truncate",children:(G=i.author)==null?void 0:G.name}),e.jsxs("span",{className:"text-gray-500 text-xs",children:["@",(A=i.author)==null?void 0:A.username]}),e.jsx("span",{className:"text-gray-400 text-xs",children:"·"}),e.jsx("span",{className:"text-gray-500 text-xs",children:R(i.created_at)})]}),e.jsx("div",{className:"flex items-center space-x-1 flex-shrink-0",children:e.jsx(Ye,{checked:l.has(i.id),onCheckedChange:()=>d(i),className:"h-3 w-3"})})]}),e.jsx("div",{className:"mb-2",children:e.jsx("div",{className:"text-gray-900 text-sm leading-5 whitespace-pre-wrap break-words",children:p.has(i.id)?e.jsxs("div",{className:"flex items-center text-gray-500 text-xs",children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-blue-500 mr-2"}),"Loading..."]}):e.jsxs(e.Fragment,{children:[X(i),(M(i)||(i.full_text||i.text||"").length>240||w.has(i.id))&&e.jsx("button",{onClick:()=>q(i.id),className:"mt-1 text-blue-500 hover:text-blue-600 text-xs font-normal inline-flex items-center space-x-1 transition-colors",disabled:p.has(i.id),children:p.has(i.id)?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-2 w-2 border-b-2 border-blue-500"}),e.jsx("span",{children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:N.has(i.id)?"Show less":"Show more"}),N.has(i.id)?e.jsx(Lt,{className:"h-3 w-3"}):e.jsx(Je,{className:"h-3 w-3"})]})})]})})}),i.media&&i.media.length>0&&e.jsx("div",{className:"mb-2 rounded-xl overflow-hidden border border-gray-200",children:e.jsx(rs,{media:i.media})}),e.jsxs("div",{className:"flex items-center justify-between max-w-xs",children:[e.jsxs("button",{className:"flex items-center space-x-1 text-gray-400 hover:text-blue-500 hover:bg-blue-50 px-2 py-1 rounded-full transition-colors group text-xs",children:[e.jsx(_e,{className:"h-3 w-3 group-hover:text-blue-500"}),e.jsx("span",{className:"group-hover:text-blue-500",children:i.reply_count||0})]}),e.jsxs("button",{className:"flex items-center space-x-1 text-gray-400 hover:text-green-500 hover:bg-green-50 px-2 py-1 rounded-full transition-colors group text-xs",children:[e.jsx(Pt,{className:"h-3 w-3 group-hover:text-green-500"}),e.jsx("span",{className:"group-hover:text-green-500",children:i.retweet_count||0})]}),e.jsxs("button",{className:"flex items-center space-x-1 text-gray-400 hover:text-red-500 hover:bg-red-50 px-2 py-1 rounded-full transition-colors group text-xs",children:[e.jsx(Rt,{className:"h-3 w-3 group-hover:text-red-500"}),e.jsx("span",{className:"group-hover:text-red-500",children:i.favorite_count||0})]}),e.jsxs("button",{className:"flex items-center space-x-1 text-gray-400 hover:text-blue-500 hover:bg-blue-50 px-2 py-1 rounded-full transition-colors group text-xs",children:[e.jsx(Mt,{className:"h-3 w-3 group-hover:text-blue-500"}),e.jsx("span",{className:"group-hover:text-blue-500",children:i.quote_count||0})]})]})]})]})})]},i.id)})})]})},ya=({selectedCategory:s,onCategoryChange:l,tweetCounts:d={},categoryCounts:a={}})=>{const f=Object.keys(d).length>0?d:a,n=[{value:"all",label:"All Tweets",icon:e.jsx(Zs,{className:"h-4 w-4"})},{value:"normal",label:"Regular",icon:e.jsx(qs,{className:"h-4 w-4"})},{value:"thread",label:"Threads",icon:e.jsx(Rs,{className:"h-4 w-4"})},{value:"long",label:"Long",icon:e.jsx(Ks,{className:"h-4 w-4"})}];return e.jsx("div",{className:"mb-6",children:e.jsx(Be,{value:s,onValueChange:r=>l(r),children:e.jsx(We,{className:"w-full justify-start overflow-x-auto flex-nowrap px-1 bg-white border border-gray-200",children:n.map(r=>e.jsxs(me,{value:r.value,className:"flex items-center gap-2 px-4 py-2 whitespace-nowrap text-sm data-[state=active]:bg-blue-500 data-[state=active]:text-white hover:bg-blue-50 hover:text-blue-700 data-[state=active]:hover:bg-blue-600 data-[state=active]:hover:text-white transition-colors",children:[r.icon,e.jsx("span",{children:r.label}),e.jsx("span",{className:"ml-1 rounded-full bg-gray-100 data-[state=active]:bg-blue-400 px-2 py-0.5 text-xs font-medium text-gray-700 data-[state=active]:text-white",children:f&&f[r.value]?f[r.value]:0})]},r.value))})})})},ja=({isOpen:s,onClose:l,documentUrl:d,documentTitle:a})=>{const[f,n]=c.useState(100),[r,j]=c.useState(0),[N,v]=c.useState(!1);if(V.useEffect(()=>{s&&(v(!1),n(100),j(0))},[s]),!s)return null;const p=()=>n(F=>Math.min(F+25,200)),y=()=>n(F=>Math.max(F-25,50)),w=()=>j(F=>(F+90)%360),E=()=>{const F=document.createElement("a");F.href=d,F.download=a,F.click()},R=d.includes("cloudinary.com")&&d.includes("auth_token"),L=()=>R?`${d}#toolbar=1&navpanes=1&scrollbar=1&view=FitH`:`${d}#toolbar=1&navpanes=1&scrollbar=1&view=FitH`;return e.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-75 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl h-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(de,{className:"h-5 w-5 text-blue-600"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:a})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:y,disabled:f<=50,className:"p-2",children:e.jsx(ea,{className:"h-4 w-4"})}),e.jsxs("span",{className:"text-sm text-gray-600 min-w-[60px] text-center",children:[f,"%"]}),e.jsx(T,{variant:"outline",size:"sm",onClick:p,disabled:f>=200,className:"p-2",children:e.jsx(Qs,{className:"h-4 w-4"})}),e.jsx(T,{variant:"outline",size:"sm",onClick:w,className:"p-2",children:e.jsx(Js,{className:"h-4 w-4"})}),e.jsx(T,{variant:"outline",size:"sm",onClick:E,className:"p-2",children:e.jsx(kt,{className:"h-4 w-4"})}),e.jsx(T,{variant:"outline",size:"sm",onClick:l,className:"p-2",children:e.jsx(Ft,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:"flex-1 overflow-auto bg-gray-100 p-4",children:e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{style:{transform:`scale(${f/100}) rotate(${r}deg)`,transformOrigin:"center top"},className:"transition-transform duration-200",children:N?e.jsxs("div",{className:"w-[800px] h-[1000px] border border-gray-300 rounded shadow-lg bg-white flex flex-col items-center justify-center",children:[e.jsx(de,{className:"h-16 w-16 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Document Preview Unavailable"}),e.jsx("p",{className:"text-sm text-gray-500 text-center mb-4 px-4",children:"This document cannot be previewed in the browser. You can download it to view the content."}),e.jsxs(T,{onClick:E,className:"flex items-center gap-2",children:[e.jsx(kt,{className:"h-4 w-4"}),"Download Document"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("iframe",{src:L(),className:"w-[800px] h-[1000px] border border-gray-300 rounded shadow-lg bg-white",title:a,onLoad:F=>{const z=F.target;try{R&&setTimeout(()=>{var k;try{const Y=z.contentDocument||((k=z.contentWindow)==null?void 0:k.document);(!Y||Y.body.innerHTML.includes("error")||Y.body.innerHTML.trim()==="")&&v(!0)}catch{}},2e3)}catch{v(!0)}},onError:()=>{console.warn("PDF iframe failed to load"),v(!0)}}),R&&e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Loading document..."})]})})]})})})})]})})},wa=`
  .linkedin-post-card {
    transition: all 0.2s ease-in-out;
  }
  
  .linkedin-post-card:hover {
    transform: translateY(-2px);
  }
  
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .break-words {
    word-wrap: break-word;
    word-break: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
  }
  
  .text-overflow-ellipsis {
    text-overflow: ellipsis;
    white-space: nowrap;
    overflow: hidden;
  }
  
  .snap-x {
    scroll-snap-type: x mandatory;
  }
  
  .snap-start {
    scroll-snap-align: start;
  }
  
  .carousel-dots {
    transition: all 0.2s ease;
  }
  
  .carousel-dots:hover {
    transform: scale(1.2);
  }
  
  .linkedin-post-content {
    max-width: 100%;
    overflow: hidden;
  }
  
  .linkedin-post-content p {
    margin: 0;
    line-height: 1.5;
  }
  
  .document-carousel {
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
  }
  
  .document-carousel:hover {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  }
`,Na=({document:s,postId:l,onOpenPdf:d})=>{var N,v;const[a,f]=V.useState(0),n=s.coverPages||[],r=V.useCallback(()=>{const p=[];return n.forEach(y=>{y.imageUrls&&Array.isArray(y.imageUrls)?p.push(...y.imageUrls):(y.url||y.image||typeof y=="string")&&p.push(y.url||y.image||y)}),p},[n]);V.useEffect(()=>{const p=document.getElementById(`doc-carousel-${l}-${s.title}`);if(!p)return;const y=()=>{const w=p.scrollLeft,E=p.offsetWidth,R=Math.round(w/E);f(R)};return p.addEventListener("scroll",y),()=>p.removeEventListener("scroll",y)},[l,s.title]);const j=p=>{const y=document.getElementById(`doc-carousel-${l}-${s.title}`);y&&y.scrollTo({left:p*y.offsetWidth,behavior:"smooth"})};return!n||n.length===0?e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50 hover:bg-gray-100 transition-colors cursor-pointer",onClick:()=>s.url&&d(s.url,s.title),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(de,{className:"h-8 w-8 text-blue-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 break-words line-clamp-2",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.totalPageCount&&e.jsxs("span",{className:"text-xs text-gray-500 bg-gray-200 px-2 py-1 rounded",children:[s.totalPageCount," pages"]}),e.jsx("span",{className:"text-xs text-gray-500 bg-blue-100 text-blue-700 px-2 py-1 rounded",children:((N=s.fileType)==null?void 0:N.toUpperCase())||"PDF"})]})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(T,{variant:"ghost",size:"sm",className:"text-blue-600 hover:bg-blue-50",children:"View"})})]})}):e.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden bg-white document-carousel",children:[e.jsx("div",{className:"p-3 border-b border-gray-100 bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4 text-blue-600 flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 break-words line-clamp-2",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.totalPageCount&&e.jsxs("span",{className:"text-xs text-gray-500",children:[s.totalPageCount," pages"]}),e.jsx("span",{className:"text-xs text-gray-400",children:"•"}),e.jsx("span",{className:"text-xs text-gray-500",children:((v=s.fileType)==null?void 0:v.toUpperCase())||"PDF"})]})]})]})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{id:`doc-carousel-${l}-${s.title}`,className:"flex overflow-x-auto scrollbar-hide snap-x snap-mandatory",children:r().map((y,w)=>e.jsx("div",{className:"flex-none w-full snap-start",children:e.jsxs("div",{className:"relative bg-gray-100",children:[e.jsx("img",{src:y,alt:`Page ${w+1} of ${s.title}`,className:"w-full h-64 object-contain cursor-pointer hover:opacity-95 transition-opacity",onClick:()=>s.url&&d(s.url,s.title),onError:E=>{const R=E.target;R.style.display="none";const L=R.nextElementSibling;L&&(L.style.display="flex")}}),e.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",style:{display:"none"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(de,{className:"h-12 w-12 text-gray-400 mx-auto mb-2"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Page ",w+1]})]})})]})},`${l}-doc-page-${w}`))}),(()=>{const p=r();return p.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>j(Math.max(0,a-1)),className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white rounded-full w-8 h-8 flex items-center justify-center transition-all",disabled:a===0,children:"‹"}),e.jsx("button",{onClick:()=>j(Math.min(p.length-1,a+1)),className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white rounded-full w-8 h-8 flex items-center justify-center transition-all",disabled:a===p.length-1,children:"›"})]})})(),(()=>{const p=r();return p.length>1&&e.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded-full",children:[a+1," / ",p.length]})})()]}),e.jsxs("div",{className:"p-3 bg-gray-50 border-t border-gray-100",children:[(()=>{const p=r();return s.totalPageCount&&p.length<s.totalPageCount&&e.jsxs("div",{className:"mb-3 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-blue-700 flex items-center gap-2",children:[e.jsx(de,{className:"h-3 w-3"}),e.jsxs("span",{children:["Showing ",p.length," of ",s.totalPageCount," pages.",e.jsx("button",{onClick:()=>s.url&&d(s.url,s.title),className:"ml-1 text-blue-600 hover:underline font-medium",children:"View full document"})]})]})})(),e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>s.url&&d(s.url,s.title),className:"w-full text-blue-600 border-blue-200 hover:bg-blue-50",children:[e.jsx(de,{className:"h-3 w-3 mr-1"}),"View Full Document"]})]}),(()=>{const p=r();return p.length>1&&e.jsx("div",{className:"flex justify-center py-2 gap-1 bg-gray-50",children:p.map((y,w)=>e.jsx("button",{className:`w-1.5 h-1.5 rounded-full transition-all carousel-dots ${w===a?"bg-blue-600 scale-110":"bg-gray-300 hover:bg-gray-500"}`,onClick:()=>j(w)},`doc-dot-${w}`))})})()]})},ka=({post:s})=>{const[l,d]=V.useState(0);V.useEffect(()=>{const f=document.getElementById(`carousel-${s.id}`);if(!f)return;const n=()=>{const r=f.scrollLeft,j=f.offsetWidth,N=Math.round(r/j);d(N)};return f.addEventListener("scroll",n),()=>f.removeEventListener("scroll",n)},[s.id]);const a=f=>{const n=document.getElementById(`carousel-${s.id}`);n&&n.scrollTo({left:f*n.offsetWidth,behavior:"smooth"})};return e.jsxs("div",{className:"relative",children:[e.jsx("div",{id:`carousel-${s.id}`,className:"flex overflow-x-auto scrollbar-hide snap-x snap-mandatory rounded-lg",children:s.media.map((f,n)=>e.jsx("div",{className:"flex-none w-full snap-start",children:e.jsx("img",{src:f.url,alt:`Post media ${n+1}`,className:"w-full h-48 object-cover cursor-pointer hover:opacity-95 transition-opacity",onClick:()=>window.open(f.url,"_blank")})},`${s.id}-media-${n}`))}),s.media.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>a(Math.max(0,l-1)),className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white rounded-full w-8 h-8 flex items-center justify-center transition-all",disabled:l===0,children:"‹"}),e.jsx("button",{onClick:()=>a(Math.min(s.media.length-1,l+1)),className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-black/50 hover:bg-black/70 text-white rounded-full w-8 h-8 flex items-center justify-center transition-all",disabled:l===s.media.length-1,children:"›"})]}),s.media.length>1&&e.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded-full",children:[l+1," / ",s.media.length]}),s.media.length>1&&e.jsx("div",{className:"flex justify-center mt-2 gap-1",children:s.media.map((f,n)=>e.jsx("button",{className:`w-2 h-2 rounded-full transition-all carousel-dots ${n===l?"bg-blue-600 scale-110":"bg-gray-300 hover:bg-gray-500"}`,onClick:()=>a(n)},`dot-${n}`))})]})},za=()=>{const s=Ps(),{user:l}=Ms(),{toast:d}=Us(),[a,f]=c.useState("youtube"),[n,r]=c.useState(""),[j,N]=c.useState(!1),[v,p]=c.useState(null),[y,w]=c.useState(null),[E,R]=c.useState(new Set),[L,F]=c.useState("all"),[z,k]=c.useState([]),[Y,M]=c.useState(new Set),[q,X]=c.useState({format:"short",tone:"professional"}),[U,i]=c.useState(!1),[S,D]=c.useState(""),[$,H]=c.useState(!1),[O,G]=c.useState(null),[A,ie]=c.useState(null),[Q,te]=c.useState(new Set),[Sa,st]=c.useState(!1),[Ca,at]=c.useState(""),[ge,nt]=c.useState(new Set),[ls,rt]=c.useState({}),[J,Ne]=c.useState(""),[ae,lt]=c.useState(""),[it,ot]=c.useState(new Set),[ne,fe]=c.useState(null),[_a,ct]=c.useState(new Set),[dt,ht]=c.useState(!1),[Ae,mt]=c.useState({isOpen:!1,documentUrl:"",documentTitle:""}),[Z,ut]=c.useState(""),[Ta,Ia]=c.useState(!1),[xt,Le]=c.useState([]),[is,Pe]=c.useState([]),[pt,Fe]=c.useState([]),[os,ke]=c.useState(!1),be=async()=>{var g,b,u,h;const t="https://api.brandout.ai/api",o=localStorage.getItem("auth-method"),x=o?je.getToken(o):null;if(!x){console.warn("No auth token found");return}const m={Authorization:`Bearer ${x}`};console.log("Loading saved posts with API URL:",t);try{const C=t.endsWith("/api")?`${t}/twitter/saved`:`${t}/api/twitter/saved`,_=await ee.get(C,{headers:m});if(_.data.success){const I=_.data.data||[],W=St(I),re=[],B=[];W.forEach(se=>{"tweets"in se?B.push(se):re.push(se)}),Le(re),Pe(B)}else console.warn("Failed to load saved Twitter posts:",_.data.message),Le([]),Pe([])}catch(C){console.error("Error loading saved Twitter posts:",C),((g=C.response)==null?void 0:g.status)===401&&P("Please log in to view saved posts"),Le([]),Pe([])}try{const C=t.endsWith("/api")?`${t}/linkedin/saved-posts`:`${t}/api/linkedin/saved-posts`,_=await ee.get(C,{headers:m});_.data.success?(Fe(_.data.data||[]),console.log("Loaded LinkedIn posts:",((b=_.data.data)==null?void 0:b.length)||0)):(console.warn("Failed to load saved LinkedIn posts:",_.data.message),Fe([]))}catch(C){console.error("Error loading saved LinkedIn posts:",C),console.error("LinkedIn posts error response:",(u=C.response)==null?void 0:u.data),((h=C.response)==null?void 0:h.status)===401&&P("Please log in to view saved posts"),Fe([])}};c.useEffect(()=>{be().catch(t=>{console.error("Error in loadSavedPosts:",t),P("Failed to load saved posts")})},[]);const K=t=>{d({description:t,variant:"default"})},P=t=>{d({description:t,variant:"destructive"})},gt=(t,o)=>{mt({isOpen:!0,documentUrl:t,documentTitle:o})},cs=()=>{mt({isOpen:!1,documentUrl:"",documentTitle:""})},ft=t=>{try{localStorage.setItem("youtubeChannelResult",JSON.stringify(t)),localStorage.setItem("lastSearchedChannel",t.channelName)}catch(o){console.error("Error saving YouTube channel to localStorage:",o)}},ds=()=>{try{const t=localStorage.getItem("youtubeChannelResult"),o=localStorage.getItem("lastSearchedChannel");t&&ie(JSON.parse(t)),o&&Ne(o)}catch(t){console.error("Error loading YouTube channel from localStorage:",t)}};c.useEffect(()=>{a==="youtube"&&n&&J&&!n.includes(J)&&ie(null)},[a,n,J]),c.useEffect(()=>{a==="linkedin"&&n&&ae&&!n.includes(ae)&&fe(null)},[a,n,ae]),c.useEffect(()=>{a==="twitter"&&n&&Z&&!n.includes(Z)&&w(null)},[a,n,Z]),c.useEffect(()=>{a==="youtube"&&J&&!n&&r(J.startsWith("@")?J:`@${J}`)},[a,J,n]),c.useEffect(()=>{a==="linkedin"&&ae&&!n&&r(ae)},[a,ae,n]),c.useEffect(()=>{a==="twitter"&&Z&&!n&&r(Z.startsWith("@")?Z:`@${Z}`)},[a,Z,n]);const hs=()=>{ie(null),Ne(""),localStorage.removeItem("youtubeChannelResult"),localStorage.removeItem("lastSearchedChannel")},ms=()=>{fe(null),lt(""),localStorage.removeItem("linkedinResult"),localStorage.removeItem("lastSearchedLinkedInProfile")},us=()=>{w(null),ut(""),R(new Set),M(new Set),localStorage.removeItem("twitterResult"),localStorage.removeItem("lastSearchedTwitterUser")},xs=async()=>{var o,x;if(!n){P("Please enter a LinkedIn username or profile URL");return}let t=n.trim();if(t.includes("linkedin.com/in/")){const m=t.match(/linkedin\.com\/in\/([^\/\?]+)/);t=m?m[1]:t}else if(t.includes("linkedin.com/company/")){const m=t.match(/linkedin\.com\/company\/([^\/\?]+)/);t=m?m[1]:t}t=t.replace("@","").replace(/\/+$/,""),ae&&ae!==t&&ms(),ht(!0),fe(null),ct(new Set);try{const m="https://api.brandout.ai/api",g=localStorage.getItem("token"),b={"Content-Type":"application/json"};g&&(b.Authorization=`Bearer ${g}`);const u=await ee.post(`${m}/linkedin/scrape-profile`,{username:t},{headers:b});u.data.success?(fe(u.data),lt(t),K(`Successfully scraped ${u.data.totalPosts} posts from ${t}`),await js(u.data)):P(u.data.message||"Failed to scrape LinkedIn profile")}catch(m){console.error("LinkedIn scraping error:",m),P(((x=(o=m.response)==null?void 0:o.data)==null?void 0:x.message)||"Failed to scrape LinkedIn profile")}finally{ht(!1)}},ps=async()=>{var o,x,m;if(!n){P("Please enter a YouTube channel URL or @handle");return}let t=n;if(n.includes("youtube.com/"))if(n.includes("/channel/"))t=((o=n.split("/channel/")[1])==null?void 0:o.split("/")[0])||n;else if(n.includes("/c/")||n.includes("/user/"))t=((x=n.split(/\/c\/|\/user\//)[1])==null?void 0:x.split("/")[0])||n;else{const g=n.split("/");for(let b=0;b<g.length;b++)if(g[b].startsWith("@")){t=g[b];break}}J&&J!==t&&hs(),st(!0);try{const g=await Gs.post("/youtube/channel",{channelName:t});if(g.data&&g.data.success){let b=t;g.data.data&&g.data.data.length>0&&g.data.data[0].channelName&&(b=g.data.data[0].channelName);const u={videos:g.data.data,channelName:b};ie(u),Ne(t),ft(u),K(`Found ${g.data.data.length} videos from ${b}`)}else throw new Error(((m=g.data)==null?void 0:m.message)||"Failed to fetch channel videos")}catch(g){console.error("Error fetching YouTube channel:",g),P("Failed to fetch channel videos. Please try again.")}finally{st(!1)}},gs=async()=>{if(!n){P("Please enter a valid URL");return}N(!0);try{a==="twitter"?await fs():a==="youtube"?n.includes("/channel/")||n.includes("/@")||n.startsWith("@")?await ps():P("Please enter a YouTube channel URL or @handle"):a==="linkedin"?await xs():(await new Promise(t=>setTimeout(t,2e3)),p({content:"This is sample extracted content. In a real implementation, this would be the content scraped from the provided URL.",keyPoints:["Sample key point 1","Sample key point 2","Sample key point 3"],tone:"Professional",suggestedHook:"Here's an interesting insight from the content...",estimatedReadTime:2,wordCount:150}),K("Content scraped successfully!"))}catch(t){console.error(`Error scraping content from ${a}:`,t),P(`Failed to scrape content from ${a}. Please try again.`)}finally{N(!1)}},fs=async()=>{var o,x,m;if(!n){P("Please enter a Twitter username or profile URL");return}let t=n.trim();if(t.includes("twitter.com/")||t.includes("x.com/")){const g=t.split("/");t=g[g.length-1],t=t.split("?")[0]}if(t=t.replace("@","").replace(/\/+$/,""),!t){P("Please enter a valid Twitter username");return}Z&&Z!==t&&us();try{const g="https://api.brandout.ai/api",b=g.endsWith("/api")?`${g}/twitter/user/${t}`:`${g}/api/twitter/user/${t}`,u=await ee.get(b);if(u.data&&u.data.success){const h=u.data.data,C=St(h),_=[],I=[];C.forEach(B=>{"tweets"in B?_.push(B):I.push(B)});const W={all:h.length,normal:I.length,thread:_.reduce((B,se)=>B+se.tweets.length,0),long:h.filter(B=>B.is_long||B.full_text&&B.full_text.length>280).length},re={tweets:I,threads:_,username:t,profileImageUrl:(x=(o=h[0])==null?void 0:o.author)==null?void 0:x.profile_image_url,totalCount:h.length,categories:W};w(re),k(_),ut(t),K(`Successfully retrieved ${h.length} tweets from @${t}`),await ws(re,h)}else throw new Error(((m=u.data)==null?void 0:m.message)||"Failed to fetch tweets")}catch(g){console.error("Error fetching tweets:",g),P("Failed to fetch tweets. Please try again.")}},Re=t=>{navigator.clipboard.writeText(t),K("Copied to clipboard!")},bs=()=>{K("Saved to Inspiration Vault!")},vs=()=>{s("/dashboard/post")},bt=async t=>{var o,x;try{const m=localStorage.getItem("auth-method"),g=m?je.getToken(m):null;if(!g){P("Please log in to delete posts");return}const b="https://api.brandout.ai/api",u=b.endsWith("/api")?`${b}/twitter/${t}`:`${b}/api/twitter/${t}`,h=await ee.delete(u,{headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"}});h.data.success?(K("Tweet deleted successfully"),be()):P(h.data.message||"Failed to delete tweet")}catch(m){console.error("Error deleting tweet:",m),P(((x=(o=m.response)==null?void 0:o.data)==null?void 0:x.message)||"Failed to delete tweet")}},ys=async t=>{var o,x;try{const m=localStorage.getItem("auth-method"),g=m?je.getToken(m):null;if(!g||!(l!=null&&l.id)){P("Please log in to delete posts");return}const b="https://api.brandout.ai/api",u=b.endsWith("/api")?`${b}/saved-posts/${t}`:`${b}/api/saved-posts/${t}`,h=await ee.delete(u,{headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"},data:{userId:l.id}});h.data.success?(K("LinkedIn post deleted successfully"),be()):P(h.data.message||"Failed to delete LinkedIn post")}catch(m){console.error("Error deleting LinkedIn post:",m),P(((x=(o=m.response)==null?void 0:o.data)==null?void 0:x.message)||"Failed to delete LinkedIn post")}},js=async t=>{const o=localStorage.getItem("auth-method"),x=o?je.getToken(o):null;if(!x||!(l!=null&&l.id)){console.log("Skipping LinkedIn auto-save: User not logged in");return}try{if(console.log(`Auto-saving ${t.posts.length} LinkedIn posts from ${t.profileData.username}...`),t.posts.length===0){console.log("No LinkedIn posts to auto-save");return}const m={posts:t.posts,profileData:t.profileData,options:{autoSave:!0}},g="https://api.brandout.ai/api",b=g.endsWith("/api")?`${g}/linkedin/save-scraped-posts`:`${g}/api/linkedin/save-scraped-posts`,u=await ee.post(b,m,{headers:{Authorization:`Bearer ${x}`,"Content-Type":"application/json"}});u.data.success&&(console.log(`Auto-saved ${u.data.count} LinkedIn posts successfully!`),d({title:"Auto-saved",description:`${u.data.count} LinkedIn posts auto-saved to your collection`,duration:3e3}),be())}catch(m){console.error("Error auto-saving LinkedIn posts:",m)}},ws=async(t,o)=>{const x=localStorage.getItem("auth-method"),m=x?je.getToken(x):null;if(!m||!(l!=null&&l.id)){console.log("Skipping auto-save: User not logged in");return}try{console.log(`Auto-saving ${o.length} tweets from @${t.username}...`);const b=[...Array.isArray(t.tweets)?t.tweets:[],...Array.isArray(t.threads)?t.threads.flatMap(_=>_.tweets||[]):[]].map(_=>({..._,thread_id:_.thread_id||_.conversation_id,thread_position:_.thread_position,savedAt:new Date().toISOString(),userId:l.id,username:t.username,profileImageUrl:t.profileImageUrl}));if(b.length===0){console.log("No tweets to auto-save");return}const u="https://api.brandout.ai/api",h=u.endsWith("/api")?`${u}/twitter/save`:`${u}/api/twitter/save`,C=await ee.post(h,{tweets:b,username:t.username,options:{preserveExisting:!0,skipDuplicates:!0,preserveThreadOrder:!0,autoSave:!0}},{headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}});C.data.success&&(console.log(`Auto-saved ${C.data.count} tweets successfully!`),d({title:"Auto-saved",description:`${C.data.count} tweets auto-saved to your collection`,duration:3e3}),be())}catch(g){console.error("Error auto-saving tweets:",g)}},Ns=async()=>{if(Q.size===0||!A){P("Please select at least one video");return}N(!0);try{const t=A.videos.filter(h=>Q.has(h.id)),o=new Date().toISOString(),x=t.map(h=>({...h,language:"English",is_generated:!1,savedAt:o,status:"ready",videoId:h.id,savedTimestamp:o,userId:(l==null?void 0:l.id)||"anonymous"}));let m=!1;try{const h="https://api.brandout.ai/api",C=h.endsWith("/api")?`${h}/youtube/save-videos`:`${h}/api/youtube/save-videos`,_=await ee.post(C,{videos:x,userId:(l==null?void 0:l.id)||"anonymous"});_.data.success?(m=!0,K(`Saved ${_.data.count} videos to cloud!`)):(console.warn("Backend save warning:",_.data.message),P("Failed to save videos to cloud: "+_.data.message))}catch(h){console.error("Error saving videos to backend:",h),P("Failed to save videos to cloud. Saving locally as backup.")}let g=[];try{const h=localStorage.getItem("savedYoutubeVideos");h&&(g=JSON.parse(h))}catch(h){console.error("Error parsing existing saved videos:",h)}const b=new Map;g.forEach(h=>{b.set(h.id||h.videoId,h)}),x.forEach(h=>{b.set(h.id||h.videoId,h)});const u=Array.from(b.values());if(localStorage.setItem("savedYoutubeVideos",JSON.stringify(u)),K(m?"Videos saved successfully to cloud and local storage!":`Saved ${x.length} videos to local storage as backup`),te(new Set),m)try{const h="https://api.brandout.ai/api",C=h.endsWith("/api")?`${h}/youtube-carousels`:`${h}/api/youtube-carousels`,_=await ee.post(C,{videos:x,userId:(l==null?void 0:l.id)||"anonymous"});_.data.success&&K(`Created ${_.data.count} carousel(s)!`)}catch(h){console.error("Error creating carousels:",h),P("Failed to create carousels, but videos were saved successfully.")}s("/dashboard/request-carousel")}catch(t){console.error("Error saving videos:",t),P("Failed to save videos. Please try again.")}finally{N(!1)}},ks=async()=>{var t,o;if(!S&&!(A!=null&&A.videos.length)){P("No content available to generate an image");return}H(!0);try{const x=A!=null&&A.videos.length?A.videos[0].title:S.substring(0,200),m="https://api.brandout.ai/api",g=m.endsWith("/api")?`${m}/cloudinary/generate`:`${m}/api/cloudinary/generate`,b=await ee.post(g,{prompt:`Create a professional, high-quality image based on this content: ${x}`,size:"1024x1024",style:"vivid"});if(b.data&&b.data.success){const u=b.data.data;G(u.secure_url),Hs({id:u.public_id,url:u.url,secure_url:u.secure_url,public_id:u.public_id,title:"Generated from YouTube: "+(((t=A==null?void 0:A.videos[0])==null?void 0:t.title)||"content"),tags:["ai-generated","youtube","linkedin"],uploadedAt:new Date().toISOString(),type:"ai-generated",width:u.width,height:u.height}),K("Image generated successfully!")}else throw new Error(((o=b.data)==null?void 0:o.message)||"Failed to generate image")}catch(x){console.error("Error generating image:",x),P("Failed to generate image. Please try again.")}finally{H(!1)}},Ss=async t=>{try{nt(b=>{const u=new Set(b);return u.add(t),u}),at(t),rt(b=>({...b,[t]:0}));const o="https://api.brandout.ai/api",x=o.endsWith("/api")?`${o}/youtube/transcript`:`${o}/api/youtube/transcript`,m=await fetch(x,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({videoId:t,useScraperApi:!0})});if(!m.ok){const b=await m.json();throw new Error(b.message||"Failed to fetch transcript")}const g=await m.json();if(g.success){const b=A==null?void 0:A.videos.find(u=>u.id===t);b?(await Cs(b,g.transcript,g.language||"Unknown",g.is_generated||!1),K("Successfully retrieved and saved the video transcript.")):P("Could not find the video data for the transcript.");return}else throw new Error(g.message||"Failed to fetch transcript")}catch(o){console.error("Error fetching transcript:",o),P(o instanceof Error?o.message:"Failed to fetch transcript")}finally{nt(o=>{const x=new Set(o);return x.delete(t),x}),rt(o=>({...o,[t]:0})),at("")}},Cs=async(t,o,x,m,g=null)=>{var b;try{const u=g||[o],h=new Date().toISOString(),C={...t,transcript:o,formattedTranscript:u,language:x,is_generated:m,savedAt:h,status:"ready",videoId:t.id,savedTimestamp:h,userId:(l==null?void 0:l.id)||"anonymous"};try{const I=localStorage.getItem("savedYoutubeVideos");let W=I?JSON.parse(I):[];const re=W.findIndex(B=>B.id===C.id);re>=0?W[re]=C:W.push(C),localStorage.setItem("savedYoutubeVideos",JSON.stringify(W)),console.log("Saved transcript to localStorage successfully"),ot(B=>{const se=new Set(B);return se.add(t.id),se})}catch(I){console.error("Error saving to localStorage:",I),P("Error saving locally: "+(I.message||"Unknown error"))}let _=!1;try{const I="https://api.brandout.ai/api",W=I.endsWith("/api")?`${I}/youtube/save-video-transcript`:`${I}/api/youtube/save-video-transcript`,re=await ee.post(W,{video:C,userId:(l==null?void 0:l.id)||"anonymous"},{timeout:1e4});if(re.data.success){_=!0,K("Video saved to cloud with transcript!");try{const B=I.endsWith("/api")?`${I}/youtube-carousels`:`${I}/api/youtube-carousels`;ee.post(B,{videos:[C],userId:(l==null?void 0:l.id)||"anonymous"},{timeout:1e4}).then(se=>{se.data.success&&console.log("Created carousel for the video")}).catch(se=>{console.error("Error creating carousel:",se)})}catch(B){console.error("Error setting up carousel creation:",B)}}else console.warn("Backend save warning:",re.data.message)}catch(I){let W="Unknown error";I.code==="ERR_NETWORK"?W="Network connection error. API server may be down.":I.response?(W=`Status ${I.response.status}: ${I.response.statusText}`,(b=I.response.data)!=null&&b.message&&(W+=` - ${I.response.data.message}`)):I.message&&(W=I.message),console.error("Error saving to backend:",W)}return s("/dashboard/request-carousel"),!0}catch(u){return console.error("Fatal error in handleSaveVideoWithTranscript:",u),P("Failed to save the video with transcript: "+(u.message||"Unknown error")),!1}},_s=t=>{if(ge.has(t)){const o=ls[t]||0;return o>0?`Retry ${o}...`:"Loading..."}return ge.size>0?"Please wait...":it.has(t)?"Transcript Available":"Get Transcript"};c.useEffect(()=>{r(""),p(null),w(null),R(new Set),a!=="youtube"&&(localStorage.getItem("youtubeChannelResult")||(ie(null),te(new Set))),a!=="linkedin"&&(localStorage.getItem("linkedinResult")||(fe(null),ct(new Set)))},[a]),c.useEffect(()=>{a==="youtube"&&ds()},[a]),c.useEffect(()=>{a!=="youtube"&&a!=="linkedin"&&a!=="twitter"&&(p(null),D("")),a==="youtube"&&J&&n===""&&r(J.startsWith("@")?J:`@${J}`),a==="linkedin"&&ae&&n===""&&r(ae),a==="twitter"&&Z&&n===""&&r(Z.startsWith("@")?Z:`@${Z}`)},[a,J,ae,Z,n]),c.useEffect(()=>{if(A){const t=new Set(A.videos.map(o=>o.id));te(o=>{const x=new Set;return o.forEach(m=>{t.has(m)&&x.add(m)}),x})}},[A]),c.useEffect(()=>{try{const t=localStorage.getItem("youtubeChannelResult"),o=localStorage.getItem("lastSearchedChannel");t&&ie(JSON.parse(t)),o&&Ne(o)}catch(t){console.error("Error loading data from localStorage:",t)}},[]),c.useEffect(()=>{const t=()=>{A&&ft(A)};return window.addEventListener("beforeunload",t),()=>{window.removeEventListener("beforeunload",t)}},[A,ne,y]);const Ts=t=>{te(o=>{const x=new Set(o);return x.has(t)?x.delete(t):x.add(t),x})};c.useEffect(()=>{try{const t=localStorage.getItem("savedYoutubeVideos");if(t){const o=JSON.parse(t),x=new Set;o.forEach(m=>{m.transcript&&typeof m.transcript=="string"&&m.transcript.trim().length>0&&x.add(m.id)}),ot(x)}}catch(t){console.error("Error checking for videos with transcripts:",t)}},[]),V.useEffect(()=>{const t=document.createElement("style");return t.textContent=wa,document.head.appendChild(t),()=>{document.head.removeChild(t)}},[]);const Is=`
    @layer components {
      .glass-card {
        @apply bg-white/70 backdrop-blur-sm border border-white/20 shadow-sm;
      }
      
      .tweet-card {
        @apply relative p-4 sm:p-6 rounded-2xl glass-card transition-all duration-300 hover:shadow-md overflow-hidden mb-4;
      }
      
      .tweet-thread {
        @apply relative p-4 sm:p-6 rounded-2xl glass-card transition-all duration-300 hover:shadow-md overflow-hidden mb-4 border-l-4 border-blue-500;
      }
      
      .thread-item {
        @apply border-l-2 border-blue-500/30 pl-6 py-3 ml-3 relative;
      }
      
      .thread-item:first-child {
        @apply pt-1;
      }
      
      .thread-item:last-child {
        @apply pb-1;
      }
      
      .thread-container {
        @apply pl-3 relative;
      }
      
      .thread-container::before {
        content: '';
        @apply absolute top-0 bottom-0 left-3 w-0.5 bg-blue-500/30 rounded;
      }
      
      .thread-item::before {
        content: '';
        @apply absolute left-[-4px] top-4 w-2 h-2 rounded-full bg-blue-500/50;
      }
      
      .thread-item + .thread-item {
        @apply mt-2;
      }
      
      .thread-container:empty::before {
        @apply hidden;
      }
      
      .show-more-button {
        @apply text-blue-500 text-sm font-medium transition-colors duration-200 hover:text-blue-700 flex items-center gap-1;
      }
      
      .checkbox-container {
        @apply absolute top-6 right-6 flex items-center gap-2;
      }
      
      .custom-checkbox {
        @apply h-5 w-5 rounded-md border border-input bg-white transition-colors hover:cursor-pointer;
      }
      
      .custom-checkbox-checked {
        @apply bg-blue-500 border-blue-500;
      }
      
      /* LinkedIn Masonry Layout Styles - Fixed alignment */
      .masonry-container {
        column-fill: balance;
        column-gap: 1.5rem;
        orphans: 1;
        widows: 1;
      }
      
      .masonry-container .linkedin-post-card {
        display: inline-block;
        width: 100%;
        margin: 0 0 1.5rem 0;
        break-inside: avoid;
        page-break-inside: avoid;
        -webkit-column-break-inside: avoid;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      }
      
      .masonry-container .linkedin-post-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      }
      
      /* Responsive masonry columns */
      @media (max-width: 768px) {
        .masonry-container {
          column-count: 1;
          column-width: auto;
        }
      }
      
      @media (min-width: 768px) and (max-width: 1024px) {
        .masonry-container {
          column-count: 2;
          column-width: auto;
        }
      }
      
      @media (min-width: 1024px) {
        .masonry-container {
          column-count: 3;
          column-width: auto;
        }
      }
      
      /* Smooth image loading for masonry */
      .masonry-container img {
        transition: opacity 0.3s ease;
      }
      
      .masonry-container img:not([src]) {
        opacity: 0;
      }
    }

    /* Animations */
    .animate-enter {
      animation: fade-in 0.3s ease-out, scale-in 0.2s ease-out;
    }

    .animate-content-expand {
      overflow: hidden;
      transition: max-height 0.3s ease-out;
    }

    .media-container {
      @apply rounded-lg overflow-hidden relative;
      aspect-ratio: auto;
      max-height: 400px;
    }

    .media-container img, .media-container video {
      @apply w-full h-auto object-contain;
      max-height: 400px;
    }

    .profile-media-container {
      @apply rounded-lg overflow-hidden relative;
      aspect-ratio: 1 / 1;
      max-height: 150px;
    }

    .profile-media-container img {
      @apply w-full h-full object-contain;
    }

    /* Image lazy loading blur effect */
    .lazy-image {
      @apply transition-opacity duration-500 opacity-0;
    }

    .lazy-image.loaded {
      @apply opacity-100;
    }

    .lazy-image.loading {
      @apply bg-gray-200 animate-pulse;
    }
    
    /* Pinterest-style masonry for LinkedIn posts */
    .linkedin-masonry {
      columns: 1;
      column-gap: 1.5rem;
    }
    
    @media (min-width: 768px) {
      .linkedin-masonry {
        columns: 2;
      }
    }
    
    @media (min-width: 1024px) {
      .linkedin-masonry {
        columns: 3;
      }
    }
    
    .linkedin-masonry .linkedin-post-card {
      break-inside: avoid;
      margin-bottom: 1.5rem;
      width: 100%;
      display: inline-block;
    }
  `;V.useEffect(()=>{const t=document.createElement("style");return t.textContent=Is,document.head.appendChild(t),()=>{document.head.removeChild(t)}},[]);const Es=({isOpen:t,onClose:o,savedTwitterPosts:x,savedTwitterThreads:m,savedLinkedInPosts:g})=>t?e.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-75 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl h-full max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(ue,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Saved Posts"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[x.length+m.reduce((b,u)=>b+u.tweets.length,0)+g.length," total saved posts"]})]})]}),e.jsx(T,{variant:"outline",size:"sm",onClick:o,className:"p-2",children:e.jsx(Ft,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex-1 overflow-auto p-6",children:x.length===0&&g.length===0?e.jsxs("div",{className:"text-center py-16 text-gray-500",children:[e.jsx(ue,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No saved posts yet"}),e.jsx("p",{children:"Start by scraping and saving some content!"})]}):e.jsxs(Be,{defaultValue:"twitter",className:"w-full",children:[e.jsxs(We,{className:"grid w-full grid-cols-2 mb-6",children:[e.jsxs(me,{value:"twitter",className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4"}),"Twitter (",x.length+m.reduce((b,u)=>b+u.tweets.length,0),")"]}),e.jsxs(me,{value:"linkedin",className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4"}),"LinkedIn (",g.length,")"]})]}),e.jsx(Nt,{value:"twitter",children:x.length===0&&m.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No saved Twitter posts"}):e.jsx("div",{className:"columns-1 md:columns-2 gap-6",children:(()=>{const b=[...x,...m];return b.sort((u,h)=>{var I,W;const C=new Date("tweets"in u?((I=u.tweets[0])==null?void 0:I.created_at)||u.created_at:u.created_at||"");return new Date("tweets"in h?((W=h.tweets[0])==null?void 0:W.created_at)||h.created_at:h.created_at||"").getTime()-C.getTime()}),b.map((u,h)=>e.jsx("div",{className:"break-inside-avoid mb-6 w-full relative",children:"tweets"in u?e.jsxs("div",{className:"relative",children:[e.jsx(Tt,{thread:u,selectedTweets:new Set,onSelectToggle:()=>{},onSelectThread:()=>{}}),e.jsx(T,{variant:"destructive",size:"sm",onClick:()=>{u.tweets.forEach(C=>bt(C.id))},className:"absolute top-2 right-2 h-8 w-8 p-0 bg-red-500 hover:bg-red-600 opacity-80 hover:opacity-100",children:e.jsx(ze,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"relative",children:[e.jsx(_t,{tweet:u,isSelected:!1,onSelectToggle:()=>{}}),e.jsx(T,{variant:"destructive",size:"sm",onClick:()=>{bt(u.id)},className:"absolute top-2 right-2 h-8 w-8 p-0 bg-red-500 hover:bg-red-600 opacity-80 hover:opacity-100",children:e.jsx(ze,{className:"h-4 w-4"})})]})},"tweets"in u?`saved-thread-${u.id}`:`saved-tweet-${u.id}`))})()})}),e.jsx(Nt,{value:"linkedin",children:g.length===0?e.jsx("p",{className:"text-gray-500 text-center py-8",children:"No saved LinkedIn posts"}):e.jsx("div",{className:"masonry-container columns-1 md:columns-2 xl:columns-3 gap-6",children:g.map((b,u)=>{const h=b.postData||b;return e.jsxs(oe,{className:"linkedin-post-card bg-white border border-gray-200 hover:shadow-lg transition-all duration-200 break-inside-avoid mb-6 relative",children:[e.jsx(T,{variant:"destructive",size:"sm",onClick:()=>{ys(b._id||b.id)},className:"absolute top-2 right-2 h-8 w-8 p-0 bg-red-500 hover:bg-red-600 opacity-80 hover:opacity-100 z-10",children:e.jsx(ze,{className:"h-4 w-4"})}),e.jsx(he,{className:"p-4 pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("img",{src:h.authorAvatar||"https://via.placeholder.com/40",alt:h.author,className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm text-gray-900",children:h.author}),e.jsx("p",{className:"text-xs text-gray-600 line-clamp-2",children:h.authorHeadline}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Saved • ",new Date(h.savedAt||b.createdAt).toLocaleDateString()]})]})]})}),e.jsx(ce,{className:"p-4 pt-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"linkedin-post-content",children:(()=>{const[C,_]=V.useState(!1),I=h.content||"";return I.length>250&&!C?e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"whitespace-pre-line break-words",children:[I.substring(0,250),"..."]}),e.jsx("button",{className:"text-blue-500 hover:text-blue-600 text-xs mt-1",onClick:()=>_(!0),children:"Show more"})]}):e.jsx("p",{className:"whitespace-pre-line break-words",children:I})})()}),h.media&&h.media.length>0&&e.jsx("div",{className:"relative",children:h.media.length===1?e.jsx("div",{className:"rounded-lg overflow-hidden bg-gray-100",children:e.jsx("img",{src:h.media[0].url,alt:"Post media",className:"w-full object-cover cursor-pointer hover:opacity-95 transition-opacity",style:{height:"auto",maxHeight:"400px"},onClick:()=>window.open(h.media[0].url,"_blank")})}):e.jsx("div",{className:"grid grid-cols-2 gap-2",children:h.media.slice(0,4).map((C,_)=>e.jsx("img",{src:C.url,alt:`Media ${_+1}`,className:"w-full h-24 object-cover rounded cursor-pointer hover:opacity-95 transition-opacity",onClick:()=>window.open(C.url,"_blank")},_))})}),h.documents&&h.documents.length>0&&e.jsx("div",{className:"space-y-3",children:h.documents.map((C,_)=>{var I;return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(de,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 truncate",children:C.title})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(I=C.fileType)==null?void 0:I.toUpperCase()," • ",C.totalPageCount," pages"]}),e.jsxs(T,{variant:"outline",size:"sm",className:"mt-2 w-full",onClick:()=>gt(C.url,C.title),children:[e.jsx(Ys,{className:"h-4 w-4 mr-2"}),"View Document"]})]},_)})})]})}),e.jsx(Ce,{className:"p-4 pt-0",children:e.jsx("div",{className:"w-full space-y-3",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 border-t border-gray-100 pt-2",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-blue-600",children:"👍"}),e.jsx("span",{className:"text-red-500",children:"❤️"}),e.jsx("span",{className:"text-green-600",children:"💡"}),h.likes||0]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{children:[h.comments||0," comments"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[h.shares||0," reposts"]})]})]})})})]},`saved-${h.id}-${u}`)})})})]})})]})}):null;return e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Content Scraper"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Extract content from YouTube channels to repurpose for LinkedIn"})]}),e.jsxs(T,{variant:"outline",onClick:()=>ke(!0),className:"gap-2 whitespace-nowrap",children:[e.jsx(ue,{className:"h-4 w-4"}),"View Saved Posts (",xt.length+pt.length,")"]})]}),e.jsx(Es,{isOpen:os,onClose:()=>ke(!1),savedTwitterPosts:xt,savedTwitterThreads:is,savedLinkedInPosts:pt}),e.jsxs(oe,{className:"mb-8",children:[e.jsxs(he,{children:[e.jsx(ve,{children:"Input Source"}),e.jsx(vt,{children:"Enter a YouTube channel URL or handle"})]}),e.jsx(ce,{children:e.jsxs(Be,{defaultValue:"youtube",value:a,onValueChange:t=>{f(t),t!=="youtube"&&t!=="linkedin"&&t!=="twitter"&&(p(null),D(""))},className:"w-full",children:[e.jsxs(We,{className:"grid grid-cols-4 w-full mb-6",children:[e.jsxs(me,{value:"youtube",className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"YouTube"})]}),e.jsxs(me,{value:"linkedin",className:"flex items-center gap-2",children:[e.jsx(ye,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"LinkedIn"})]}),e.jsxs(me,{value:"twitter",className:"flex items-center gap-2",children:[e.jsx(Me,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Twitter"})]}),e.jsxs(me,{value:"web",className:"flex items-center gap-2 relative opacity-70",disabled:!0,children:[e.jsx(zs,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Web"}),e.jsx("span",{className:"absolute -top-2 -right-2 bg-amber-500 text-white text-[10px] px-1 rounded-full",children:"Soon"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(Ds,{type:"text",placeholder:a==="youtube"?"Enter YouTube channel URL or @handle (e.g., @channelname)":a==="linkedin"?"Enter LinkedIn username (e.g., johndoe or linkedin.com/in/johndoe)":a==="twitter"?"Enter Twitter username (e.g., @username or twitter.com/username)":"Enter URL to scrape content",value:n,onChange:t=>r(t.target.value),className:"w-full"})}),e.jsx(T,{onClick:gs,disabled:j||!n||a==="linkedin"&&dt,className:"min-w-[120px]",children:j||a==="linkedin"&&dt?e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"mr-2 h-4 w-4 animate-spin"}),a==="linkedin"?"Scraping...":"Loading"]}):e.jsxs(e.Fragment,{children:[e.jsx(yt,{className:"mr-2 h-4 w-4"}),a==="youtube"?"Get Videos":a==="linkedin"?"Scrape Profile":a==="twitter"?"Get Tweets":"Scrape Content"]})})]})]})})]}),a==="twitter"&&y&&e.jsxs("div",{className:"w-full space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 bg-white/90 backdrop-blur-sm rounded-xl shadow-md p-4 border border-gray-100 gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 min-w-0 flex-1",children:[y.profileImageUrl&&e.jsx("img",{src:y.profileImageUrl,alt:y.username||"User",className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full border-2 border-blue-500/20 flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("h3",{className:"font-bold text-base sm:text-lg truncate",children:["@",y.username||"Unknown"]}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:[y.totalCount||0," tweets scraped"]})]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>ke(!0),className:"gap-2 bg-white hover:bg-blue-50 text-xs whitespace-nowrap",children:[e.jsx(ue,{className:"h-3 w-3"}),"View Saved Posts"]})})]}),e.jsx(ya,{selectedCategory:L,onCategoryChange:F,tweetCounts:y.categories}),e.jsx("div",{className:"space-y-6",children:(()=>{const t=[];if(y.tweets&&Array.isArray(y.tweets)){const o=y.tweets.filter(x=>L==="normal"?!x.is_long:L==="long"?x.is_long:L!=="thread");t.push(...o)}return y.threads&&Array.isArray(y.threads)&&(L==="all"||L==="thread")&&t.push(...y.threads),t.sort((o,x)=>{var b,u;const m=new Date("tweets"in o?((b=o.tweets[0])==null?void 0:b.created_at)||o.created_at:o.created_at||"");return new Date("tweets"in x?((u=x.tweets[0])==null?void 0:u.created_at)||x.created_at:x.created_at||"").getTime()-m.getTime()}),t.length===0?e.jsxs("div",{className:"text-center py-10 bg-white/50 rounded-xl border border-gray-200",children:[e.jsxs("p",{className:"text-gray-500",children:["No ",L," content found."]}),e.jsx(T,{onClick:()=>F("all"),variant:"link",className:"text-blue-500 mt-2",children:"Show all content"})]}):e.jsx("div",{className:"columns-1 md:columns-2 gap-6",children:t.map(o=>e.jsx("div",{className:"break-inside-avoid mb-6 w-full",children:"tweets"in o?e.jsx(Tt,{thread:o,selectedTweets:new Set,onSelectToggle:()=>{},onSelectThread:()=>{}}):e.jsx(_t,{tweet:o,isSelected:!1,onSelectToggle:()=>{}})},"tweets"in o?`thread-${o.id}`:`tweet-${o.id}`))})})()})]}),a==="youtube"&&A&&e.jsxs("div",{className:"space-y-6",children:[ge.size>0&&e.jsxs("div",{className:"bg-blue-50 border border-blue-200 text-blue-800 px-4 py-3 rounded-lg flex items-center mb-4",children:[e.jsx(xe,{className:"h-4 w-4 mr-2 animate-spin"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Fetching transcript..."}),e.jsx("p",{className:"text-sm",children:"Please wait while we retrieve the transcript. This may take a few moments."})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between mb-4 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Se,{className:"h-8 w-8"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:A.channelName}),e.jsxs("p",{className:"text-sm text-gray-500",children:[A.videos.length," videos found"]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[e.jsx(T,{variant:"outline",size:"sm",onClick:()=>te(new Set(A.videos.map(t=>t.id))),disabled:j,className:"text-xs whitespace-nowrap",children:"Select All"}),e.jsx(T,{variant:"outline",size:"sm",onClick:()=>te(new Set),disabled:j||Q.size===0,className:"text-xs whitespace-nowrap",children:"Clear Selection"}),e.jsx(T,{variant:"default",size:"sm",onClick:Ns,disabled:j||Q.size===0,className:"text-xs gap-1 whitespace-nowrap",children:j?e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"h-3 w-3 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(jt,{className:"h-3 w-3"}),"Save (",Q.size,")"]})})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:A.videos.map(t=>e.jsxs(oe,{className:`overflow-hidden ${Q.has(t.id)?"border-primary":""}`,children:[e.jsxs("div",{className:"h-40 bg-gray-100 dark:bg-gray-800 relative",children:[e.jsx("img",{src:t.thumbnail,alt:t.title,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-2 right-2 bg-black/70 text-white text-xs px-1 rounded",children:t.duration!=="N/A"?t.duration:"N/A"})]}),e.jsx(he,{className:"p-4 pb-2",children:e.jsx(ve,{className:"text-sm line-clamp-2",children:t.title})}),e.jsxs(ce,{className:"p-4 pt-0",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsxs("span",{children:[t.view_count.toLocaleString()," views"]}),e.jsx("span",{children:new Date(t.upload_date).toLocaleDateString()})]}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1 truncate",children:t.channelName||"Unknown Channel"})]}),e.jsxs(Ce,{className:"p-3 pt-0 flex flex-col gap-2",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2 w-full",children:[e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>window.open(t.url,"_blank"),className:"w-full",children:[e.jsx(Se,{className:"h-4 w-4 mr-1"}),"Watch"]}),e.jsx(T,{variant:Q.has(t.id)?"secondary":"outline",size:"sm",onClick:()=>Ts(t.id),className:"w-full",children:Q.has(t.id)?"Selected":"Select"})]}),e.jsx(T,{variant:it.has(t.id)?"secondary":"default",size:"sm",className:`w-full ${ge.size>0?"opacity-70":""}`,onClick:()=>Ss(t.id),disabled:ge.size>0,children:_s(t.id)})]})]},t.id))})]}),a==="linkedin"&&ne&&e.jsxs("div",{className:"space-y-6",children:[e.jsx(oe,{className:"bg-gradient-to-r from-blue-50 to-blue-100 border-blue-200",children:e.jsx(ce,{className:"p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center gap-3 sm:gap-4 min-w-0 flex-1",children:[ne.profileData.avatar&&e.jsx("img",{src:ne.profileData.avatar,alt:ne.profileData.name,className:"w-12 h-12 sm:w-16 sm:h-16 rounded-full border-4 border-white shadow-lg flex-shrink-0"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-bold text-gray-900 truncate",children:ne.profileData.name}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 mb-1 line-clamp-2 break-words",children:ne.profileData.headline}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-4 text-xs text-gray-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ye,{className:"h-3 w-3 flex-shrink-0"}),e.jsxs("span",{className:"truncate",children:[ne.totalPosts," posts"]})]}),e.jsx("span",{className:"hidden sm:inline",children:"•"}),e.jsxs("span",{className:"truncate",children:["@",ne.profileData.username]})]})]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:e.jsxs(T,{variant:"outline",size:"sm",onClick:()=>ke(!0),className:"gap-2 bg-white hover:bg-blue-50 text-xs whitespace-nowrap",children:[e.jsx(ue,{className:"h-3 w-3"}),"View Saved Posts"]})})]})})}),e.jsx("div",{className:"masonry-container columns-1 md:columns-2 lg:columns-3 gap-6",children:ne.posts.map((t,o)=>e.jsxs(oe,{className:"linkedin-post-card bg-white border border-gray-200 hover:shadow-lg transition-all duration-200 break-inside-avoid",children:[e.jsx(he,{className:"p-4 pb-3",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[e.jsx("img",{src:t.authorAvatar||"https://via.placeholder.com/40",alt:t.author,className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold text-sm text-gray-900 truncate",children:t.author}),t.isRepost&&e.jsx(Vs,{variant:"secondary",className:"text-xs px-1 py-0",children:"Repost"})]}),e.jsx("p",{className:"text-xs text-gray-600 line-clamp-2 break-words",children:t.authorHeadline}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[t.dateRelative," • 🌐"]})]})]})})}),e.jsx(ce,{className:"p-4 pt-0",children:e.jsxs("div",{className:"space-y-3 linkedin-post-content",children:[e.jsx("div",{className:"text-sm text-gray-800 leading-relaxed",children:t.content.length>300?e.jsxs("div",{children:[e.jsxs("div",{id:`truncated-content-${t.id}`,children:[e.jsxs("p",{className:"whitespace-pre-line break-words overflow-hidden",children:[t.content.substring(0,300),"..."]}),e.jsx(T,{variant:"link",size:"sm",className:"p-0 h-auto text-xs text-gray-500 hover:text-blue-600 mt-1",onClick:()=>{const x=document.getElementById(`truncated-content-${t.id}`),m=document.getElementById(`full-content-${t.id}`),g=document.getElementById(`see-more-btn-${t.id}`);x&&m&&g&&(m.style.display==="none"||!m.style.display?(x.style.display="none",m.style.display="block",g.textContent="see less"):(x.style.display="block",m.style.display="none",g.textContent="see more"))},children:e.jsx("span",{id:`see-more-btn-${t.id}`,children:"see more"})})]}),e.jsx("div",{id:`full-content-${t.id}`,style:{display:"none"},children:e.jsx("p",{className:"whitespace-pre-line break-words overflow-hidden mt-2",children:t.content})})]}):e.jsx("p",{className:"whitespace-pre-line break-words overflow-hidden",children:t.content})}),t.media&&t.media.length>0&&e.jsx("div",{className:"relative",children:t.media.length===1?e.jsx("div",{className:"rounded-lg overflow-hidden bg-gray-100",children:e.jsx("img",{src:t.media[0].url,alt:"Post media",className:"w-full object-cover cursor-pointer hover:opacity-95 transition-opacity",style:{height:"auto",maxHeight:"400px"},onClick:()=>window.open(t.media[0].url,"_blank")})}):e.jsx(ka,{post:t})}),t.documents&&t.documents.length>0&&e.jsx("div",{className:"space-y-3",children:t.documents.map((x,m)=>e.jsx(Na,{document:x,postId:t.id,onOpenPdf:gt},`${t.id}-doc-${m}`))})]})}),e.jsx(Ce,{className:"p-4 pt-0",children:e.jsxs("div",{className:"w-full space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 border-b border-gray-100 pb-2",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-blue-600",children:"👍"}),e.jsx("span",{className:"text-red-500",children:"❤️"}),e.jsx("span",{className:"text-green-600",children:"💡"}),t.likes||0]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{children:[t.comments||0," comments"]}),e.jsx("span",{children:"•"}),e.jsxs("span",{children:[t.shares||0," reposts"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs(T,{variant:"ghost",size:"sm",className:"text-gray-600 hover:bg-gray-100 px-3 py-1 h-8",children:[e.jsx("span",{className:"mr-1",children:"👍"}),e.jsx("span",{className:"text-xs",children:"Like"})]}),e.jsxs(T,{variant:"ghost",size:"sm",className:"text-gray-600 hover:bg-gray-100 px-3 py-1 h-8",children:[e.jsx(_e,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"Comment"})]}),e.jsxs(T,{variant:"ghost",size:"sm",className:"text-gray-600 hover:bg-gray-100 px-3 py-1 h-8",children:[e.jsx(wt,{className:"h-3 w-3 mr-1"}),e.jsx("span",{className:"text-xs",children:"Repost"})]})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>Re(t.content),className:"text-gray-500 hover:text-blue-600 hover:bg-blue-50 px-2 py-1 h-8",children:e.jsx(Ue,{className:"h-3 w-3"})}),t.url&&e.jsx(T,{variant:"ghost",size:"sm",onClick:()=>window.open(t.url,"_blank"),className:"text-gray-500 hover:text-blue-600 hover:bg-blue-50 px-2 py-1 h-8",children:e.jsx(ye,{className:"h-3 w-3"})})]})]})]})})]},`${t.id}-${o}`))})]}),a!=="twitter"&&a!=="youtube"&&v&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx("div",{className:"md:col-span-2",children:e.jsxs(oe,{children:[e.jsxs(he,{children:[e.jsx(ve,{children:"Extracted Content"}),e.jsxs(vt,{children:["Content extracted from ",a==="linkedin"?"LinkedIn":a==="website"?"website":"YouTube video"]})]}),e.jsxs(ce,{children:[e.jsx("div",{className:"border border-gray-200 dark:border-gray-800 rounded-lg p-4 mb-4 bg-white dark:bg-gray-900",children:e.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-line",children:v.content})}),e.jsx(va,{type:"single",collapsible:!0,className:"mb-4",children:e.jsxs(ss,{value:"key-points",children:[e.jsx(as,{className:"text-base font-medium",children:"Key Points"}),e.jsx(ns,{children:e.jsx("ul",{className:"list-disc pl-5 space-y-2",children:v.keyPoints.map((t,o)=>e.jsx("li",{className:"text-gray-700 dark:text-gray-300",children:t},o))})})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"border border-gray-200 dark:border-gray-800 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Detected Tone"}),e.jsx("div",{className:"text-gray-700 dark:text-gray-300",children:v.tone})]}),e.jsxs("div",{className:"border border-gray-200 dark:border-gray-800 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 mb-1",children:"Details"}),e.jsxs("div",{className:"text-gray-700 dark:text-gray-300 flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Word count:"}),e.jsx("span",{children:v.wordCount})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{children:"Read time:"}),e.jsxs("span",{children:[v.estimatedReadTime," min"]})]})]})]})]})]}),e.jsxs(Ce,{className:"flex justify-between border-t border-gray-200 dark:border-gray-800 pt-4",children:[e.jsxs(T,{variant:"outline",size:"sm",className:"gap-1",onClick:()=>Re(v.content),children:[e.jsx(Ue,{className:"h-4 w-4"}),"Copy Content"]}),e.jsxs(T,{variant:"outline",size:"sm",className:"gap-1",onClick:bs,children:[e.jsx(jt,{className:"h-4 w-4"}),"Save to Vault"]})]})]})}),e.jsxs("div",{children:[e.jsxs(oe,{className:"mb-6",children:[e.jsx(he,{className:"pb-3",children:e.jsxs(ve,{className:"flex items-center gap-2 text-base",children:[e.jsx(Os,{className:"h-4 w-4 text-amber-500"}),"Suggested Hook"]})}),e.jsxs(ce,{children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-300 text-sm mb-3",children:v.suggestedHook}),e.jsxs(T,{variant:"outline",size:"sm",className:"w-full gap-1",onClick:()=>Re(v.suggestedHook),children:[e.jsx(Ue,{className:"h-4 w-4"}),"Copy Hook"]})]})]}),e.jsxs(oe,{className:"bg-primary-50 dark:bg-primary-900/20",children:[e.jsx(he,{className:"pb-3",children:e.jsx(ve,{className:"text-base",children:"Generate LinkedIn Post"})}),e.jsxs(ce,{className:"pb-3",children:[e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300 mb-4",children:"Use the extracted content to create an engaging LinkedIn post with AI assistance."}),e.jsxs(T,{className:"w-full gap-2 mb-3",onClick:vs,children:[e.jsx(Bs,{className:"h-4 w-4"}),"Create Post"]}),e.jsxs(T,{variant:"outline",className:"w-full gap-2",onClick:()=>s("/dashboard/ai"),children:[e.jsx(_e,{className:"h-4 w-4"}),"Expand with AI Writer"]})]})]})]})]}),!v&&!j&&!A&&!ne&&!y&&e.jsx(oe,{children:e.jsx(ce,{className:"pt-6",children:e.jsxs("div",{className:"text-center max-w-xl mx-auto",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-primary-50 dark:bg-primary-900/20 mb-4",children:a==="youtube"?e.jsx(Se,{className:"h-8 w-8 text-primary"}):a==="linkedin"?e.jsx(ye,{className:"h-8 w-8 text-primary"}):a==="twitter"?e.jsx(Me,{className:"h-8 w-8 text-primary"}):e.jsx(yt,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:a==="youtube"?"Extract Content from YouTube Channels":a==="linkedin"?"Scrape LinkedIn Profiles":a==="twitter"?"Extract Tweets from Twitter":"Extract Content from Social Media"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:a==="youtube"?"Paste a YouTube channel handle (starting with @) or URL to extract videos and transcripts for your LinkedIn content.":a==="linkedin"?"Enter a LinkedIn username to scrape their profile and recent posts for content inspiration.":a==="twitter"?"Enter a Twitter username to fetch their recent tweets and threads for content analysis and inspiration.":"Select a platform above and enter the appropriate URL or username to start scraping content."}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[a==="youtube"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-xs font-medium",children:"1"}),e.jsx("span",{children:"Enter a YouTube channel handle (e.g., @channelname) in the input field above"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-xs font-medium",children:"2"}),e.jsx("span",{children:'Click "Get Videos" to fetch content from the channel'})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-xs font-medium",children:"3"}),e.jsx("span",{children:"Select videos and fetch transcripts to create LinkedIn content"})]})]}),a==="linkedin"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-xs font-medium",children:"1"}),e.jsx("span",{children:"Enter a LinkedIn username (e.g., johndoe) in the input field above"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-xs font-medium",children:"2"}),e.jsx("span",{children:'Click "Scrape Profile" to fetch their posts and profile data'})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-xs font-medium",children:"3"}),e.jsx("span",{children:"Select posts to save for content inspiration and analysis"})]})]}),a==="twitter"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-xs font-medium",children:"1"}),e.jsx("span",{children:"Enter a Twitter username (e.g., @username) in the input field above"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-xs font-medium",children:"2"}),e.jsx("span",{children:'Click "Get Tweets" to fetch their recent tweets and threads'})]}),e.jsxs("div",{className:"flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-primary-100 dark:bg-primary-900/30 flex items-center justify-center text-xs font-medium",children:"3"}),e.jsx("span",{children:"Select tweets and threads to save for content inspiration and analysis"})]})]})]})]})})}),S&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-md font-medium mb-2",children:"Generated Image"}),e.jsx("div",{className:"flex justify-between mt-4",children:e.jsx(T,{variant:"outline",onClick:ks,disabled:$,className:"gap-2",children:$?e.jsxs(e.Fragment,{children:[e.jsx(xe,{className:"h-4 w-4 animate-spin"}),"Generating Image..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ws,{className:"h-4 w-4"}),"Generate Image"]})})}),O&&e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"relative rounded-md overflow-hidden",children:e.jsx("img",{src:O,alt:"Generated image",className:"w-full max-h-[250px] object-cover"})}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsxs(T,{variant:"outline",onClick:()=>s("/dashboard/images"),className:"gap-2",children:[e.jsx(ue,{className:"h-4 w-4"}),"View in Gallery"]}),e.jsxs(T,{onClick:()=>s("/dashboard/post",{state:{content:S,image:O}}),className:"gap-2",children:[e.jsx(wt,{className:"h-4 w-4"}),"Create Post with Image"]})]})]})]}),e.jsx(ja,{isOpen:Ae.isOpen,onClose:cs,documentUrl:Ae.documentUrl,documentTitle:Ae.documentTitle})]})};export{za as default};
