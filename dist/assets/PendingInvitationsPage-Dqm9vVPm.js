import{j as e}from"./ui-vendor-yLFRes2f.js";import{u as D,d as E,r as c}from"./react-vendor-DWSrZqKN.js";import{k as g,J as x,T as N,U as L,s as P,b as h,Q as O,V as Y}from"./index-CisuWjtJ.js";import{a as n,m as u}from"./utils-vendor-DFcOAB1P.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=g("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=g("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=g("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=g("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]);function Z(){const o=D(),v=E(),[I,s]=c.useState(!0),[y,p]=c.useState([]),[f,l]=c.useState(null),[k,m]=c.useState(!1),z={initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{duration:.5}}},S={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.3}}},$={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};c.useEffect(()=>{const a=new URLSearchParams(v.search).get("token");a&&A(a)},[v]);const A=async t=>{try{m(!0);const a="https://api.brandout.ai/api",i=(await n.post(`${a}/teams/invitations/verify-token`,{token:t})).data.data,d=x.getToken(localStorage.getItem("auth-method")||void 0);if(!d){localStorage.setItem("pendingInvitationToken",t),o("/login",{state:{returnTo:`/invitations?token=${t}`}});return}try{if((await n.get(`${a}/users/me`,{headers:{Authorization:`Bearer ${d}`}})).data.data.email.toLowerCase()===i.email.toLowerCase()){const R={id:t,teamId:i.teamId,teamName:i.teamName,role:i.role,createdAt:new Date().toISOString()};p(b=>b.some(B=>B.teamId===i.teamId)?b:[...b,R]),m(!1),s(!1)}else l(`This invitation was sent to ${i.email}, but you're logged in with a different email.`),m(!1),s(!1)}catch(j){console.error("Failed to get user information:",j),l("Failed to verify your account. Please try logging in again."),m(!1),s(!1)}}catch(a){console.error("Failed to process invitation token:",a),l("Invalid or expired invitation link."),m(!1),s(!1)}},C=async()=>{try{s(!0);const t=x.getToken(localStorage.getItem("auth-method")||void 0);if(!t){o("/login");return}const r=await n.get("https://api.brandout.ai/api/teams/invitations",{headers:{Authorization:`Bearer ${t}`}});p(r.data.data),s(!1)}catch(t){console.error("Failed to fetch invitations:",t),l("Failed to load invitations"),s(!1)}};c.useEffect(()=>{C()},[]);const T=async t=>{try{s(!0);const a=x.getToken(localStorage.getItem("auth-method")||void 0);if(!a){o("/login");return}const r="https://api.brandout.ai/api";if(t.length>30){const d=(await n.get(`${r}/users/me`,{headers:{Authorization:`Bearer ${a}`}})).data.data.email;await n.post(`${r}/teams/invitations/accept-by-token`,{token:t,email:d})}else await n.post(`${r}/teams/invitations/${t}/accept`,{},{headers:{Authorization:`Bearer ${a}`}});o("/dashboard")}catch(a){console.error("Failed to accept invitation:",a),l("Failed to accept invitation"),s(!1)}},U=async t=>{try{s(!0);const a=x.getToken(localStorage.getItem("auth-method")||void 0);if(!a){o("/login");return}const r="https://api.brandout.ai/api";if(t.length>30){const d=(await n.get(`${r}/users/me`,{headers:{Authorization:`Bearer ${a}`}})).data.data.email;await n.post(`${r}/teams/invitations/decline-by-token`,{token:t,email:d})}else await n.post(`${r}/teams/invitations/${t}/decline`,{},{headers:{Authorization:`Bearer ${a}`}});p(y.filter(i=>i.id!==t)),s(!1)}catch(a){console.error("Failed to decline invitation:",a),l("Failed to decline invitation"),s(!1)}},F=()=>{localStorage.setItem("skippedInvitations","true"),o("/dashboard")},M=t=>new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background text-foreground p-6 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 -z-10",children:[e.jsx("div",{className:"absolute top-0 -left-[40%] w-[80%] h-[80%] rounded-full bg-blue-100 dark:bg-blue-900/30 blur-[120px]"}),e.jsx("div",{className:"absolute bottom-0 -right-[40%] w-[80%] h-[80%] rounded-full bg-blue-200 dark:bg-blue-800/20 blur-[120px]"}),e.jsx("div",{className:"absolute inset-0 bg-[url('/patterns/dots.svg')] opacity-5"})]}),e.jsxs("div",{className:"hidden sm:block",children:[e.jsx(u.div,{className:"absolute opacity-10 pointer-events-none",animate:{y:[0,-15,0],x:[0,10,0],rotate:[0,5,0]},transition:{repeat:1/0,duration:8,ease:"easeInOut"},style:{top:"15%",right:"10%"},children:e.jsx(N,{size:80,className:"text-blue-500"})}),e.jsx(u.div,{className:"absolute opacity-10 pointer-events-none",animate:{y:[0,20,0],x:[0,-15,0],rotate:[0,-5,0]},transition:{repeat:1/0,duration:10,ease:"easeInOut",delay:1},style:{bottom:"20%",left:"8%"},children:e.jsx(L,{size:60,className:"text-blue-500"})})]}),e.jsx(u.div,{className:"max-w-md w-full bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 sm:p-8 border border-gray-200 dark:border-gray-700",variants:z,initial:"initial",animate:"animate",children:I||k?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(P,{className:"h-8 w-8 text-blue-500 animate-spin mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:k?"Processing invitation link...":"Loading invitations..."})]}):f?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 p-4 rounded-xl mb-6 border border-red-100 dark:border-red-800/30",children:e.jsx("p",{className:"text-red-600 dark:text-red-400",children:f})}),e.jsx(h,{variant:"twitter",rounded:"full",onClick:()=>o("/dashboard"),className:"px-6",children:"Go to Dashboard"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-center mb-8",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500 text-white flex items-center justify-center rounded-full mr-3",children:e.jsx(O,{size:22})}),e.jsx("div",{className:"absolute -top-1 -right-1 bg-white dark:bg-gray-900 p-0.5 rounded-full",children:e.jsx(N,{className:"w-4 h-4 text-blue-500"})})]}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 dark:text-gray-100",children:"Twitter Invitations"})]}),y.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsxs("div",{className:"mb-6 p-6 bg-gray-50 dark:bg-gray-900/50 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsx(q,{className:"w-12 h-12 text-gray-400 dark:text-gray-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-1",children:"No pending invitations"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"You're all caught up!"})]}),e.jsx(h,{variant:"twitter",rounded:"full",onClick:()=>o("/dashboard"),className:"px-8 py-2",children:"Go to Dashboard"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"mb-6 text-gray-600 dark:text-gray-300 text-center",children:"You've been invited to join these Twitter teams:"}),e.jsx(u.div,{className:"space-y-4 mb-8",variants:S,initial:"hidden",animate:"visible",children:y.map(t=>e.jsxs(u.div,{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-xl bg-gray-50 dark:bg-gray-900/50 hover:bg-blue-50 dark:hover:bg-blue-900/20 transition-colors",variants:$,children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center text-white font-bold mr-3 shadow-sm",children:t.teamName.substring(0,1).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900 dark:text-gray-100",children:t.teamName}),e.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center mr-3",children:[e.jsx(w,{size:12,className:"mr-1 text-blue-500"}),e.jsx("span",{className:"capitalize",children:t.role})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Y,{size:12,className:"mr-1 text-blue-500"}),e.jsx("span",{children:M(t.createdAt)})]})]})]})]}),e.jsxs("div",{className:"flex space-x-2 justify-end",children:[e.jsxs(h,{variant:"outline",size:"sm",rounded:"full",onClick:()=>U(t.id),className:"text-sm border-gray-200 dark:border-gray-700 text-gray-700 dark:text-gray-300 hover:bg-red-50 dark:hover:bg-red-900/20 hover:text-red-600 dark:hover:text-red-400 hover:border-red-200 dark:hover:border-red-800/30",children:[e.jsx(H,{size:14,className:"mr-1"}),"Decline"]}),e.jsxs(h,{variant:"twitter",size:"sm",rounded:"full",onClick:()=>T(t.id),className:"text-sm",children:[e.jsx(w,{size:14,className:"mr-1"}),"Accept"]})]})]},t.id))}),e.jsxs("div",{className:"text-center mt-8 py-3 border-t border-gray-200 dark:border-gray-700",children:[e.jsxs(h,{variant:"ghost",rounded:"full",onClick:F,className:"text-gray-500 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20",children:[e.jsx(G,{size:16,className:"mr-1.5"}),"Skip for now"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"You can accept these invitations later from your dashboard"})]})]})]})})]})}export{Z as default};
