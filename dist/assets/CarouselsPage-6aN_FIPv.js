import{j as e}from"./ui-vendor-yLFRes2f.js";import{u as O,r as o}from"./react-vendor-DWSrZqKN.js";import{k as H,a as B,b as i,g as j,a7 as G,N as Q,af as W,ag as J,a_ as Z,ah as K,ai as X,aj as y,al as ee,am as se,m as ae,an as te,ao as D,aq as f,au as N,aT as v,e as re,V,aw as R,aR as E,ar as le,as as ie,at as ne,ak as ce,aF as de,a$ as oe,r as xe,A as me,c as w}from"./index-BbVnkZPX.js";import{f as S}from"./utils-vendor-DFcOAB1P.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=H("SlidersHorizontal",[["line",{x1:"21",x2:"14",y1:"4",y2:"4",key:"obuewd"}],["line",{x1:"10",x2:"3",y1:"4",y2:"4",key:"1q6298"}],["line",{x1:"21",x2:"12",y1:"12",y2:"12",key:"1iu8h1"}],["line",{x1:"8",x2:"3",y1:"12",y2:"12",key:"ntss68"}],["line",{x1:"21",x2:"16",y1:"20",y2:"20",key:"14d8ph"}],["line",{x1:"12",x2:"3",y1:"20",y2:"20",key:"m0wm8r"}],["line",{x1:"14",x2:"14",y1:"2",y2:"6",key:"14e1ph"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"16",x2:"16",y1:"18",y2:"22",key:"1lctlv"}]]),Ne=()=>{const b=O(),{user:he}=B(),[p,Y]=o.useState(""),[x,I]=o.useState(null),[A,T]=o.useState(!1),[n,P]=o.useState(1),k=4,[m,u]=o.useState([]),C=(s,t="MMM d, yyyy")=>{try{if(!s)return"Unknown date";if(s instanceof Date)return isNaN(s.getTime())?"Unknown date":S(s,t);if(typeof s=="string"){const a=new Date(s);return isNaN(a.getTime())?"Unknown date":S(a,t)}if(typeof s=="number"&&!isNaN(s)){const a=new Date(s);return isNaN(a.getTime())?"Unknown date":S(a,t)}return"Unknown date"}catch(a){return console.error("Error formatting date:",a),"Unknown date"}};o.useEffect(()=>{(()=>{T(!0);try{const t=localStorage.getItem("savedYoutubeVideos");if(t)try{const $=JSON.parse(t).map(r=>{try{const g=l=>{if(!l)return new Date;try{if(l instanceof Date)return isNaN(l.getTime())?new Date:l;if(typeof l=="string"){const c=new Date(l);return isNaN(c.getTime())?new Date:c}if(typeof l=="number"&&!isNaN(l)){const c=new Date(l);return isNaN(c.getTime())?new Date:c}return new Date}catch(c){return console.error("Error parsing date:",c),new Date}},d=r.videoId||r.id||"";return{id:r.id||d||Math.random().toString(36).substring(2,9),title:r.title||"YouTube Video",status:"ready",thumbnailUrl:r.thumbnailUrl||(d?`https://img.youtube.com/vi/${d}/mqdefault.jpg`:void 0),requestDate:g(r.requestDate),deliveryDate:g(r.deliveryDate),slideCount:r.slideCount||5,videoId:d,videoUrl:r.videoUrl||(d?`https://youtube.com/watch?v=${d}`:void 0),source:"youtube"}}catch(g){return console.error("Error processing video item:",g),{id:Math.random().toString(36).substring(2,9),title:"YouTube Video",status:"ready",requestDate:new Date,deliveryDate:new Date,slideCount:5,source:"youtube"}}});u($)}catch(a){console.error("Error parsing saved videos:",a),u([])}else u([])}catch(t){console.error("Error loading saved videos:",t),w.error("Failed to load your saved videos"),u([])}finally{T(!1)}})()},[]);const F=s=>{s.videoUrl?(window.open(s.videoUrl,"_blank"),w.success("Opening YouTube video")):s.videoId&&(window.open(`https://youtube.com/watch?v=${s.videoId}`,"_blank"),w.success("Opening YouTube video"))},q=m.filter(s=>{const t=s.title.toLowerCase().includes(p.toLowerCase()),a=!x||s.status===x;return t&&a}),h=Math.ceil(q.length/k),U=(n-1)*k,L=U+k,M=q.slice(U,L),z=()=>{n<h&&P(n+1)},_=()=>{n>1&&P(n-1)};return e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"My Carousel Requests"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Manage your requested LinkedIn carousel designs"})]}),e.jsxs(i,{onClick:()=>b("/dashboard/request-carousel"),className:"gap-2",children:[e.jsx(j,{className:"h-4 w-4"}),"Request New Carousel"]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 mb-6",children:[e.jsxs("div",{className:"relative w-full sm:w-72",children:[e.jsx(G,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(Q,{placeholder:"Search carousels...",className:"pl-10",value:p,onChange:s=>Y(s.target.value)})]}),e.jsxs(W,{value:x||"all",onValueChange:s=>I(s==="all"?null:s),children:[e.jsx(J,{className:"w-full sm:w-44",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx(K,{placeholder:"All statuses"})]})}),e.jsxs(X,{children:[e.jsx(y,{value:"all",children:"All statuses"}),e.jsx(y,{value:"ready",children:"Ready"}),e.jsx(y,{value:"in_progress",children:"In Progress"}),e.jsx(y,{value:"delivered",children:"Delivered"})]})]}),e.jsxs(ee,{children:[e.jsx(se,{asChild:!0,children:e.jsxs(i,{variant:"outline",className:"gap-2 ml-auto hidden sm:flex",children:[e.jsx(ue,{className:"h-4 w-4"}),"Sort by",e.jsx(ae,{className:"h-4 w-4 opacity-50"})]})}),e.jsxs(te,{align:"end",children:[e.jsx(D,{children:"Newest first"}),e.jsx(D,{children:"Oldest first"}),e.jsx(D,{children:"Alphabetical (A-Z)"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[e.jsx(f,{children:e.jsx(N,{className:"pt-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Total Carousels"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:m.length})]}),e.jsx("div",{className:"w-10 h-10 bg-primary-50 dark:bg-primary-900/20 rounded-full flex items-center justify-center",children:e.jsx(v,{className:"h-5 w-5 text-primary"})})]})})}),e.jsx(f,{children:e.jsx(N,{className:"pt-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Ready to Use"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:m.filter(s=>s.status==="ready"||s.status==="delivered").length})]}),e.jsx("div",{className:"w-10 h-10 bg-green-50 dark:bg-green-900/20 rounded-full flex items-center justify-center",children:e.jsx(re,{className:"h-5 w-5 text-green-500"})})]})})}),e.jsx(f,{children:e.jsx(N,{className:"pt-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"In Progress"}),e.jsx("p",{className:"text-2xl font-bold mt-1",children:m.filter(s=>s.status==="in_progress").length})]}),e.jsx("div",{className:"w-10 h-10 bg-blue-50 dark:bg-blue-900/20 rounded-full flex items-center justify-center",children:e.jsx(V,{className:"h-5 w-5 text-blue-500"})})]})})})]}),A?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mb-4"}),e.jsx("p",{children:"Loading your carousel videos..."})]})}):M.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:M.map(s=>e.jsxs(f,{className:"overflow-hidden",children:[e.jsxs("div",{className:"h-48 bg-gray-100 dark:bg-gray-800 relative",children:[s.thumbnailUrl?e.jsx("img",{src:s.thumbnailUrl,alt:s.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(v,{className:"h-16 w-16 text-gray-300 dark:text-gray-600"})}),e.jsx(R,{className:`absolute top-3 right-3 ${s.status==="delivered"||s.status==="ready"?"bg-green-500":"bg-blue-500"}`,children:s.status==="delivered"||s.status==="ready"?"Ready":"In Progress"}),s.source==="youtube"&&e.jsxs(R,{className:"absolute top-3 left-3 bg-red-500 flex items-center gap-1",children:[e.jsx(E,{className:"h-3 w-3"}),"YouTube"]})]}),e.jsxs(le,{className:"pb-2",children:[e.jsx(ie,{className:"line-clamp-1",children:s.title}),e.jsxs(ne,{className:"flex items-center gap-1",children:[e.jsx(ce,{className:"h-3 w-3"}),"Added: ",C(s.requestDate)]})]}),e.jsx(N,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1 text-gray-500 dark:text-gray-400",children:[e.jsx(v,{className:"h-4 w-4"}),e.jsxs("span",{children:[s.slideCount," slides"]})]}),s.deliveryDate&&e.jsxs("div",{className:"flex items-center gap-1 text-gray-500 dark:text-gray-400",children:[e.jsx(V,{className:"h-4 w-4"}),e.jsx("span",{children:C(s.deliveryDate)})]})]})}),e.jsx(de,{className:"border-t border-gray-100 dark:border-gray-800 pt-4",children:e.jsxs("div",{className:"flex justify-between w-full",children:[s.source==="youtube"?e.jsxs(i,{variant:"outline",size:"sm",className:"gap-1",onClick:()=>F(s),children:[e.jsx(E,{className:"h-4 w-4"}),"Watch Video"]}):e.jsxs(i,{variant:"outline",size:"sm",className:"gap-1",children:[e.jsx(oe,{className:"h-4 w-4"}),"Preview"]}),e.jsxs(i,{variant:"default",size:"sm",className:"gap-1",onClick:()=>b("/dashboard/create-post",{state:{title:s.title,activeTab:"carousel",youtubeVideoId:s.videoId}}),children:[e.jsx(j,{className:"h-4 w-4"}),"Create Post"]})]})})]},s.id))}),h>1&&e.jsx("div",{className:"flex justify-center mt-8",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(i,{variant:"outline",size:"sm",onClick:_,disabled:n===1,children:[e.jsx(xe,{className:"h-4 w-4 mr-1"}),"Previous"]}),e.jsxs("div",{className:"text-sm",children:["Page ",n," of ",h]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:z,disabled:n===h,children:["Next",e.jsx(me,{className:"h-4 w-4 ml-1"})]})]})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-100 dark:bg-gray-800 rounded-full flex items-center justify-center mb-4",children:e.jsx(v,{className:"h-8 w-8 text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No carousels found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 max-w-md mx-auto mb-6",children:p||x?"No carousels match your current filters. Try adjusting your search criteria.":"You don't have any carousels yet. Please visit the Request Carousel page to browse and select videos for your carousels."}),e.jsxs(i,{onClick:()=>b("/dashboard/request-carousel"),className:"gap-2",children:[e.jsx(j,{className:"h-4 w-4"}),"Request New Carousel"]})]}),e.jsx("div",{className:"mt-12 bg-gray-50 dark:bg-gray-900 rounded-lg p-4 text-sm text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium mb-1",children:"Carousel Credits"}),e.jsxs("p",{children:["You have 2 carousel requests remaining this month. Your credits will reset on ",C(new Date(new Date().getFullYear(),new Date().getMonth()+1,1)),"."]})]}),e.jsxs(i,{variant:"outline",size:"sm",onClick:()=>w.info("This feature is coming soon!"),children:[e.jsx(j,{className:"h-3 w-3 mr-1"}),"Get More Credits"]})]})})]})};export{Ne as default};
