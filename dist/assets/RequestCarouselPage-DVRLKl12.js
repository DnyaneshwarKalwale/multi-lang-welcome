import{j as e}from"./ui-vendor-yLFRes2f.js";import{u as ds,d as ms,r as h}from"./react-vendor-DWSrZqKN.js";import{k as Ne,aI as us,a as hs,J as we,aJ as xs,b as c,aK as ps,aq as R,ar as V,as as D,at as W,au as z,aL as xt,aM as pt,aN as gt,aO as gs,N as Ve,aP as ft,aQ as vt,a3 as fs,a4 as vs,a5 as jt,a6 as wt,a7 as js,e as _,F as te,s as se,aw as be,aR as ws,C as bs,R as ys,a8 as Ns,S as Ss,av as De,aS as ye,o as We,aT as Be,aH as Cs,j as ks,aU as Is,aF as ae,aV as Ts,n as Es,A as Ps,I as bt,aW as $s,aX as Us,aY as Fs,aZ as yt}from"./index-PhhDpJrj.js";import{a as N,f as As}from"./utils-vendor-DFcOAB1P.js";import{F as re}from"./folder-DZTwUwQV.js";import{v as Ye}from"./v4-C6aID195.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=Ne("Clock4",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=Ne("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=Ne("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=Ne("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),qs=Fs({title:yt().min(1,"Title is required"),youtubeUrl:yt().optional()}),Xs=()=>{var mt,ut,ht;const Y=ds();ms();const{toast:m}=us(),{user:o}=hs(),[B,Je]=h.useState(null),[ne,Nt]=h.useState(""),[i,ie]=h.useState(null),[St,le]=h.useState(!1),[q,J]=h.useState([]),[Ge,Os]=h.useState(!1),[Rs,Ct]=h.useState(!1),[Se,F]=h.useState(0),[E,Ce]=h.useState(1),ke=4,[Ie,L]=h.useState([]),[kt,He]=h.useState(!1),[Vs,Ke]=h.useState(new Set),[Te,oe]=h.useState(!1),[It,ce]=h.useState(null),[Tt,Ee]=h.useState(null),[G,Ze]=h.useState(!1),[de,Qe]=h.useState(null),[k,M]=h.useState(""),[Et,Pe]=h.useState(!1),[j,P]=h.useState(""),[Ds,me]=h.useState(""),[$,H]=h.useState(""),[ue,O]=h.useState([]),[Pt,$e]=h.useState(!1),[K,$t]=h.useState(!1),[Z,Xe]=h.useState(""),[Ut,he]=h.useState(!1),[U,Ue]=h.useState(1),[S,xe]=h.useState([]),[Fe,Ft]=h.useState("professional"),[pe,At]=h.useState(""),[et,tt]=h.useState(!1),Ae=h.useRef(null),[st,at]=h.useState(""),[_e,_t]=h.useState(!1),[Ws,Le]=h.useState(!1),[x,Q]=h.useState({limit:0,count:0,remaining:0,planId:"expired",planName:"No Plan"}),[Bs,Me]=h.useState(!1),[Lt,ge]=h.useState(!1),[Ys,Mt]=h.useState(null),zt=async()=>{try{const t=we.getToken();if(!t){console.error("No token found");return}const a=await(await fetch("https://api.brandout.ai/api/stripe/subscription",{headers:{Authorization:`Bearer ${t}`}})).json();Mt(a)}catch(t){console.error("Error fetching subscription:",t)}};h.useEffect(()=>{zt()},[]),h.useEffect(()=>{ze();const t=setInterval(ze,5e3),s=a=>{a.key==="userLimit"&&ze()};return window.addEventListener("storage",s),()=>{clearInterval(t),window.removeEventListener("storage",s)}},[o==null?void 0:o.id]),h.useEffect(()=>{localStorage.setItem("userLimit",JSON.stringify(x))},[x]);const fe=async()=>{He(!0);try{let t=[];try{const s="https://api.brandout.ai/api",a=s.endsWith("/api")?`${s}/youtube/saved/${(o==null?void 0:o.id)||"anonymous"}`:`${s}/api/youtube/saved/${(o==null?void 0:o.id)||"anonymous"}`,r=await N.get(a);r.data.success&&r.data.savedVideos?(t=r.data.savedVideos.map(n=>({id:n.videoId,videoId:n.videoId,title:n.title,thumbnail:n.thumbnailUrl,thumbnailUrl:n.thumbnailUrl,channelName:n.channelTitle,url:`https://www.youtube.com/watch?v=${n.videoId}`,videoUrl:`https://www.youtube.com/watch?v=${n.videoId}`,transcript:n.transcript||"",formattedTranscript:n.formattedTranscript||[],language:n.language||"Unknown",is_generated:n.is_generated,status:"ready",savedAt:new Date(n.savedAt||n.createdAt).toISOString(),savedTimestamp:new Date(n.savedAt||n.createdAt).toISOString(),source:"youtube"})),L(t),localStorage.setItem("savedYoutubeVideos",JSON.stringify(t))):(L([]),localStorage.removeItem("savedYoutubeVideos"))}catch(s){console.error("Error loading videos from backend:",s);try{const a=localStorage.getItem("savedYoutubeVideos");if(a){const r=JSON.parse(a);Array.isArray(r)&&r.length>0?L(r):L([])}else L([])}catch(a){console.error("Error loading from localStorage:",a),L([])}}}catch(t){console.error("Error in loadSavedVideos:",t),L([])}finally{He(!1)}};h.useEffect(()=>{fe();const t=s=>{s.key==="savedYoutubeVideos"&&fe()};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}},[o==null?void 0:o.id]);const ze=async()=>{var a;if(!(o!=null&&o.id))return;const t=localStorage.getItem("auth-method"),s=t?we.getToken(t):null;if(s)try{const n=await N.get("https://api.brandout.ai/api/user-limits/me",{headers:{Authorization:`Bearer ${s}`}});if(n.data.success){const l=n.data.data;Q({limit:l.limit||0,count:l.count||0,remaining:Math.max(0,(l.limit||0)-(l.count||0)),planId:l.planId||"expired",planName:l.planName||"No Plan",status:l.status||"inactive",expiresAt:l.expiresAt?new Date(l.expiresAt):void 0}),Me(l.planId==="expired"||l.status==="inactive")}else console.error("Failed to fetch user limit:",n.data.message),Q({limit:0,count:0,remaining:0,planId:"expired",planName:"No Plan",status:"inactive"}),Me(!0)}catch(r){console.error("Error fetching user limit:",((a=r.response)==null?void 0:a.data)||r),Q({limit:0,count:0,remaining:0,planId:"expired",planName:"No Plan",status:"inactive"}),Me(!0)}},C=xs({resolver:$s(qs),defaultValues:{title:"",youtubeUrl:""}}),qt=t=>{var a;const s=((a=t.target.files)==null?void 0:a[0])||null;Je(s),s&&m({title:"File uploaded",description:"Your file has been uploaded successfully."})},Ot=()=>{if(j&&$==="carousel"){const t=j.split(`

`).filter(s=>s.trim());if(t.length>0){F(s=>s===t.length-1?0:s+1);return}}q.length>0&&F(t=>t===q.length-1?0:t+1)},Rt=()=>{if(j&&$==="carousel"){const t=j.split(`

`).filter(s=>s.trim());if(t.length>0){F(s=>s===0?t.length-1:s-1);return}}q.length>0&&F(t=>t===0?q.length-1:t-1)},Vt=t=>{if(ie(t),t.videoUrl?C.setValue("youtubeUrl",t.videoUrl):t.id&&C.setValue("youtubeUrl",`https://youtube.com/watch?v=${t.id}`),localStorage.getItem("ai_generated_content_videoId")===t.id){const a=localStorage.getItem("ai_generated_content");a&&P(a)}else P(null);if(t.formattedTranscript&&Array.isArray(t.formattedTranscript)&&t.formattedTranscript.length>0&&t.formattedTranscript.some(a=>a&&a.trim().length>10))J(t.formattedTranscript),le(!0),F(0);else if(t.transcript&&typeof t.transcript=="string"&&t.transcript.trim().length>10){const a=Dt(t.transcript);J(a),le(!0),F(0)}else J([]),le(!0),F(0);m({title:"Video selected",description:"Content from this video will be used for your carousel."})},Dt=t=>!t||t.length<10?["No transcript content available"]:[t],qe=async t=>{var a,r;if(!t.id&&!t.videoId){m({title:"Error",description:"Video ID not found",variant:"destructive"});return}const s=t.id||t.videoId;ce(s),oe(!0),Ee(null);try{m({title:"Fetching transcript",description:"Please wait while we fetch the transcript..."});let n=null,l=null,d=null;const p="https://api.brandout.ai/api",f=p.endsWith("/api")?`${p}/youtube/transcript-yt-dlp`:`${p}/api/youtube/transcript-yt-dlp`;try{console.log(`Trying yt-dlp method first for video ID: ${s}`);const u=await N.post(f,{videoId:s,useScraperApi:!1},{timeout:45e3,headers:{"Content-Type":"application/json"}});u.data&&u.data.success?(console.log("yt-dlp method succeeded"),n=u.data):(console.warn("yt-dlp method returned non-success response:",u.data),d=new Error(((a=u.data)==null?void 0:a.message)||"Unknown error with yt-dlp method"))}catch(u){console.warn("yt-dlp method failed:",u),d=u}if(!n){console.log("Trying primary transcript method");const u=p.endsWith("/api")?`${p}/youtube/transcript`:`${p}/api/youtube/transcript`;try{const g=await N.post(u,{videoId:s,useScraperApi:!1},{timeout:3e4,headers:{"Content-Type":"application/json"}});g.data&&g.data.success?(console.log("Primary method succeeded"),n=g.data):(console.warn("Primary method returned non-success response:",g.data),l=new Error(((r=g.data)==null?void 0:r.message)||"Unknown error with primary method"))}catch(g){console.warn("Primary method failed:",g),l=g}}if(n&&(n.transcript||n.formattedTranscript))await Wt(t,n),oe(!1),ce(null),m({title:"Transcript fetched",description:"Transcript has been successfully retrieved."});else{const u=`Both transcript methods failed. ${l?`Primary error: ${l.message}`:""}${d?`${l?". ":""}yt-dlp error: ${d.message}`:""}`;throw console.error("Error fetching transcript:",u),oe(!1),ce(null),Ee(u),m({title:"Transcript Error",description:"Failed to fetch transcript. The server might be experiencing issues or this video may not have captions.",variant:"destructive"}),new Error(u)}}catch(n){console.error("Error in handleFetchTranscript:",n),oe(!1),ce(null),Ee(n.message||"Unknown error fetching transcript"),m({title:"Error",description:"Failed to fetch transcript: "+(n.message||"Unknown error"),variant:"destructive"})}},Wt=async(t,s)=>{try{const a=s.transcript||"",r={...t,transcript:a,formattedTranscript:[a],language:s.language||"en",is_generated:s.is_generated||!1};ie(r),J([a]),F(0),Ke(l=>{const d=new Set(l);return d.add(t.id),t.videoId&&d.add(t.videoId),d}),await Bt(r)&&m({title:"Transcript fetched",description:"Successfully retrieved and saved transcript"})}catch(a){console.error("Error in handleTranscriptSuccess:",a),m({title:"Processing Error",description:"Successfully fetched transcript but encountered an error processing it",variant:"destructive"})}},Bt=async t=>{try{const s=localStorage.getItem("savedYoutubeVideos"),a=s?JSON.parse(s):[],r=a.findIndex(u=>u.id===t.id||u.videoId===t.id||u.id===t.videoId||u.videoId===t.videoId);let n=t.transcript||"",l=t.formattedTranscript||[n];const d=1e5;n&&n.length>d&&(console.log(`Transcript too large (${n.length} chars), trimming to ${d}`),n=n.substring(0,d)+"... [Trimmed due to size limits]",Array.isArray(l)&&l.length>0?l=l.map(u=>typeof u=="string"&&u.length>d/l.length?u.substring(0,d/l.length)+"...":u):l=[n]);const p=r!==-1?{...a[r],transcript:n,formattedTranscript:l||[n||""],language:t.language||"en",is_generated:t.is_generated!==void 0?t.is_generated:!1,updatedAt:new Date().toISOString()}:{...t,transcript:n,formattedTranscript:l||[n||""],language:t.language||"en",is_generated:t.is_generated!==void 0?t.is_generated:!1,savedAt:new Date().toISOString(),updatedAt:new Date().toISOString()};r!==-1?a[r]=p:a.push(p),localStorage.setItem("savedYoutubeVideos",JSON.stringify(a)),L(u=>{const g=[...u],I=g.findIndex(w=>w.id===t.id||w.videoId===t.id||w.id===t.videoId||w.videoId===t.videoId);return I!==-1?g[I]=p:g.push(p),g}),Ke(u=>{const g=new Set(u);return g.add(t.id||t.videoId||""),g});const f=async(u=0,g=2)=>{var I,w,b;try{const v="https://api.brandout.ai/api",T=v.endsWith("/api")?`${v}/youtube/save-video-transcript`:`${v}/api/youtube/save-video-transcript`,y={video:{...p,transcript:n,formattedTranscript:l},userId:(o==null?void 0:o.id)||"anonymous"},X=await N.post(T,y,{timeout:15e3,headers:{"Content-Type":"application/json"}});if((I=X.data)!=null&&I.success){console.log("Saved transcript to backend successfully"),m({title:"Transcript Saved",description:"Successfully saved transcript to server and locally.",variant:"default"});try{const ee=v.endsWith("/api")?`${v}/youtube-carousels`:`${v}/api/youtube-carousels`;N.post(ee,{videos:[p],userId:(o==null?void 0:o.id)||"anonymous"},{timeout:1e4}).then(()=>console.log("Created carousel for video successfully")).catch(je=>console.warn("Could not create carousel, but video was saved:",je))}catch(ee){console.warn("Error creating carousel (handled):",ee)}}else throw console.warn("Backend save returned non-success response:",X.data),new Error(((w=X.data)==null?void 0:w.message)||"Server returned error response")}catch(v){if(u<g)return console.log(`Retrying backend save (attempt ${u+1}/${g})...`),await new Promise(y=>setTimeout(y,1e3*Math.pow(2,u))),f(u+1,g);let T="Unknown error";v.code==="ERR_NETWORK"?T="Network connection error. API server may be down.":v.response?(T=`Status ${v.response.status}: ${v.response.statusText}`,(b=v.response.data)!=null&&b.message&&(T+=` - ${v.response.data.message}`)):v.message&&(T=v.message),console.error(`Error saving to backend: ${T}`),m({title:"Backend Save Error",description:"Could not save to server, but transcript was saved locally.",variant:"default"})}};return f(),!0}catch(s){return console.error("Fatal error saving video with transcript:",s),m({title:"Save Error",description:"Failed to save transcript data: "+(s.message||"Unknown error"),variant:"destructive"}),!1}},Oe=[{type:"text-post",title:"Text Post",icon:e.jsx(Us,{className:"h-4 w-4"})},{type:"carousel",title:"Carousel",icon:e.jsx(Ls,{className:"h-4 w-4"})}];h.useEffect(()=>{(async()=>{try{const s="https://api.brandout.ai/api",a=s.endsWith("/api")?`${s}/carousel-contents`:`${s}/api/carousel-contents`,r=await N.get(a,{params:{userId:(o==null?void 0:o.id)||"anonymous"}});if(r.data.success&&Array.isArray(r.data.data)){O(r.data.data),localStorage.setItem("savedLinkedInContents",JSON.stringify(r.data.data));const n=localStorage.getItem("ai_generated_content_videoId");if(n){const l=r.data.data.find(d=>d.videoId===n);l&&(M(l.content),P(l.content),me(l.title),H(l.type))}}}catch(s){console.error("Error loading content from backend:",s);const a=localStorage.getItem("ai_generated_content"),r=localStorage.getItem("ai_generated_content_videoId");a&&r&&(M(a),(i==null?void 0:i.id)===r&&P(a));const n=localStorage.getItem("savedLinkedInContents");if(n)try{const l=JSON.parse(n);O(l)}catch(l){console.error("Error parsing local contents:",l),O([])}}})()},[o==null?void 0:o.id,i]);const Yt=async t=>{if(!x){m({variant:"destructive",title:"Error",description:"Unable to verify your usage limits. Please try again later."});return}if(x.count>=x.limit){m({variant:"destructive",title:"Limit Reached",description:"You have reached your content generation limit. Please contact support to increase your limit."});return}if(!i){m({title:"Video required",description:"Please select a video before generating content",variant:"destructive"});return}if(!i.transcript){m({title:"Transcript required",description:"Please ensure the video has a transcript before generating content",variant:"destructive"});return}Ze(!0);try{const s="https://api.brandout.ai/api",a=s.endsWith("/api")?`${s}/generate-content`:`${s}/api/generate-content`,r=await N.post(a,{type:t,transcript:i.transcript,videoId:i.id,videoTitle:i.title});if(!r.data.success||!r.data.content)throw new Error("Failed to generate content");const n=r.data.content;M(n),Pe(!0),Qe(t),P(n),H(t),m({title:"Content generated",description:`${t.charAt(0).toUpperCase()+t.slice(1)} content has been generated for your selected video`});const l=we.getToken();await N.post(`https://api.brandout.ai/api/user-limits/${o==null?void 0:o.id}/increment`,{},{headers:{Authorization:`Bearer ${l}`}}),Q(d=>d?{...d,count:d.count+1}:null)}catch(s){console.error("Error generating content:",s),m({title:"Error",description:"Failed to generate content. Please try again.",variant:"destructive"})}finally{Ze(!1)}},rt=()=>{Pe(!1),M(""),Qe(null),localStorage.removeItem("lastGeneratedContent")},nt=ne?Ie.filter(t=>t.title.toLowerCase().includes(ne.toLowerCase())||t.channelName&&t.channelName.toLowerCase().includes(ne.toLowerCase())):Ie,it=E*ke,Jt=it-ke,lt=nt.slice(Jt,it),A=Math.ceil(nt.length/ke),Re=t=>{Ce(t)},Gt=()=>{E<A&&Ce(E+1)},Ht=()=>{E>1&&Ce(E-1)},ot=t=>{if(!i){m({title:"Video required",description:"Please select a video for your carousel",variant:"destructive"});return}if(!j){m({title:"Content required",description:"Please generate and select carousel content for your video",variant:"destructive"});return}if($!=="carousel"){m({title:"Invalid content type",description:"Only carousel content can be used for carousel requests",variant:"destructive"});return}if(localStorage.getItem("ai_generated_content_videoId")!==i.id){m({title:"Content mismatch",description:"The selected content does not match the selected video. Please generate content for this video.",variant:"destructive"});return}he(!0)},Kt=async()=>{if(!C.getValues("title")){m({title:"Title required",description:"Please enter a title for your carousel request",variant:"destructive"});return}if(!x){m({variant:"destructive",title:"Error",description:"Unable to verify your usage limits. Please try again later."});return}if(!x.planId||x.planId==="expired"){ge(!0);return}if(x.count>=x.limit){m({variant:"destructive",title:"Credit Limit Reached",description:`You have used all ${x.limit} credits from your ${x.planName} plan. Please upgrade your plan or buy additional credits.`}),ge(!0);return}tt(!0);try{const t=we.getToken()||localStorage.getItem("linkedin-login-token")||localStorage.getItem("google-login-token");if(!t)throw new Error("Authentication token not found. Please login again.");console.log("Files to upload:",S),S.length===0&&console.log("No files to upload. Proceeding with empty files array.");let s=[];if(S.length>0){const f=S.map(u=>new Promise((g,I)=>{if(u.size>10485760)Zt(u,g,I);else{const b=new FormData;b.append("file",u);const v="https://api.brandout.ai/api",T=v.endsWith("/api")?`${v}/upload/upload`:`${v}/api/upload/upload`;fetch(T,{method:"POST",body:b,credentials:"include"}).then(y=>{if(!y.ok)throw new Error(`Upload failed: ${y.status} ${y.statusText}`);return y.json()}).then(y=>{y.secure_url?g(y.secure_url):I(new Error("Failed to upload file to Cloudinary - missing secure_url"))}).catch(y=>{I(y)})}}));try{s=await Promise.all(f),console.log("All files uploaded successfully:",s)}catch(u){throw console.error("Error uploading files:",u),new Error(`File upload failed: ${u.message||"Please try again with smaller files"}`)}}const a={title:C.getValues("title"),description:pe||"",youtubeUrl:(i==null?void 0:i.url)||C.getValues("youtubeUrl")||"",carouselType:"professional",content:k||j||"",transcript:(i==null?void 0:i.transcript)||"",fileUrls:s.length>0?s:[],files:s.length>0?s.map(f=>({url:f})):[],videoId:(i==null?void 0:i.id)||void 0,videoTitle:(i==null?void 0:i.title)||void 0,userName:(o==null?void 0:o.firstName)||(o==null?void 0:o.name)||"Unknown User",userEmail:(o==null?void 0:o.email)||""},r="https://api.brandout.ai/api",n=r.endsWith("/api")?`${r}/carousels/submit-request`:`${r}/api/carousels/submit-request`;console.log("Submitting carousel request to:",n),console.log("Request data:",JSON.stringify(a,null,2)),console.log("Form values:",C.getValues());const l=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(a)});let d;const p=await l.text();try{d=JSON.parse(p),console.log("API response data:",d)}catch{console.log("API response (not JSON):",p),d={message:p}}if(!l.ok)if(console.error("API error response:",d),l.status===500&&(d==null?void 0:d.error)==="this.isModified is not a function")console.log("Server returned 500 error but we know the request actually worked. Treating as success.");else throw new Error(d.message||d.error||"Failed to submit carousel request");try{await N.post(`https://api.brandout.ai/api/user-limits/${o==null?void 0:o.id}/increment`,{},{headers:{Authorization:`Bearer ${t}`}}),Q(f=>f?{...f,count:f.count+1,remaining:f.remaining-1}:null),console.log("Incremented user limit count for carousel request")}catch(f){console.error("Error incrementing user limit:",f)}Ue(3),Ct(!0),xe([]),m({title:"Carousel request submitted",description:"We'll notify you when your carousel is ready."})}catch(t){console.error("Error submitting carousel request:",t),m({title:"Error",description:t instanceof Error?t.message:"Failed to submit carousel request. Please try again.",variant:"destructive"})}finally{tt(!1)}},Zt=(t,s,a)=>{const n=`large_${Date.now()}_${t.name.replace(/\s+/g,"_")}`;let l=0,d=Math.ceil(t.size/10485760),p=0;m({title:"Large file detected",description:`Uploading ${t.name} in chunks (${Math.round(t.size/1048576)}MB)`});const f=async()=>{const u=p*10485760,g=Math.min(u+10485760,t.size),I=t.slice(u,g),w=new FormData;w.append("file",I),w.append("fileId",n),w.append("chunkIndex",p.toString()),w.append("totalChunks",d.toString()),w.append("originalName",t.name);try{const b="https://api.brandout.ai/api",v=b.endsWith("/api")?`${b}/upload/chunk`:`${b}/api/upload/chunk`,T=await fetch(v,{method:"POST",body:w,credentials:"include"});if(!T.ok)throw new Error(`Failed to upload chunk ${p+1}/${d}`);const y=await T.json();l+=I.size;const X=Math.round(l/t.size*100);if(console.log(`Upload progress for ${t.name}: ${X}%`),p<d-1)p++,await f();else{const ee=b.endsWith("/api")?`${b}/upload/finalize`:`${b}/api/upload/finalize`,je=await fetch(ee,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileId:n}),credentials:"include"});if(!je.ok)throw new Error("Failed to finalize chunked upload");const cs=await je.json();console.log(`File ${t.name} uploaded successfully`),s(cs.secure_url)}}catch(b){console.error("Error uploading chunk:",b),a(new Error(`Failed to upload ${t.name}`))}};f().catch(u=>{console.error("Chunked upload failed:",u),a(u)})},ct=[{value:"professional",label:"Professional",description:"Clean design with corporate branding"},{value:"creative",label:"Creative",description:"Eye-catching design with bold elements"},{value:"minimal",label:"Minimal",description:"Simple, elegant design with focus on content"},{value:"data-driven",label:"Data-Driven",description:"Charts, graphs and statistics"},{value:"storytelling",label:"Storytelling",description:"Narrative-focused with image backgrounds"}],dt=t=>{if(!t)return[];const s=t.split(`

`).filter(r=>r.trim()),a=[];for(let r=0;r<s.length;r++){const n=s[r].trim();/^Slide\s*\d+\s*$/.test(n)||a.push(n.replace(/^Slide\s*\d+[\s:.]+/i,"").trim())}return a},Qt=(t,s)=>{const a=dt(t);if(a.length===0)return"Carousel slide content";const r=Math.min(s,a.length-1);return a[r]||"Carousel slide content"},Xt=()=>{if(!j||$!=="carousel"){m({title:"Cannot edit",description:"Only carousel content can be edited in the editor",variant:"destructive"});return}try{console.log("Processing content for editor:",j);let t=j;t.includes(`

`)||(t.includes(`
`)?(console.log("Content has single newlines, converting to double newlines"),t=t.replace(/\n/g,`

`)):(console.log("Content has no newlines, treating as single slide"),t=t.trim()));const s=t.split(`

`).filter(d=>d.trim());console.log("Raw slides count:",s.length);const a=[];for(let d=0;d<s.length;d++){const p=s[d].trim();/^Slide\s*\d+\s*$/.test(p)||a.push(p.replace(/^Slide\s*\d+[\s:.]+/i,"").trim())}console.log("Processed slides for editor:",a.length,a),a.length===0&&(console.warn("No valid slides found, creating a fallback slide"),a.push(t.trim()||"Your carousel content"));const r=1080,n=1350,l=a.map(d=>{const p=Ye(),f=Ye();return{id:p,backgroundColor:"#ffffff",nodes:[{id:f,type:"text",text:d,position:{x:Math.floor(r/2-400),y:Math.floor(n/2-200)},fontSize:28,fontFamily:"inter",fill:"#000000",width:800,height:400,align:"center",draggable:!0,zIndex:1}]}});console.log("Created Konva slides for editor:",l.length),localStorage.setItem("canvas_size_preference","portrait"),localStorage.setItem("editor_slides",JSON.stringify(l)),console.log("Saved Konva slides to localStorage"),localStorage.setItem("slides_debug",JSON.stringify({format:"konva",originalContent:j,processedContent:t,processedSlides:a,konvaSlides:l})),window.editorSlides=l,window.slideCount=l.length,Y("/editor"),m({title:"Opening in editor",description:`Preparing ${l.length} slides for editing (4:5 ratio)`})}catch(t){console.error("Error preparing slides for editor:",t),m({title:"Error",description:"Could not prepare slides for editing. Please try again.",variant:"destructive"})}},es=async(t,s)=>{if(s.stopPropagation(),s.preventDefault(),!t.id&&!t.videoId){m({title:"Error",description:"Cannot identify video to delete",variant:"destructive"});return}const a=t.id||t.videoId;try{try{const r="https://api.brandout.ai/api",n=r.endsWith("/api")?`${r}/youtube/saved/${(o==null?void 0:o.id)||"anonymous"}/${a}`:`${r}/api/youtube/saved/${(o==null?void 0:o.id)||"anonymous"}/${a}`;await N.delete(n),L(l=>l.filter(d=>d.id!==a&&d.videoId!==a)),i&&(i.id===a||i.videoId===a)&&(ie(null),J([]),le(!1));try{const l=localStorage.getItem("savedYoutubeVideos");if(l){const p=JSON.parse(l).filter(f=>f.id!==a&&f.videoId!==a);localStorage.setItem("savedYoutubeVideos",JSON.stringify(p))}}catch(l){console.error("Error updating localStorage:",l)}m({title:"Video deleted",description:"The video has been removed from your saved videos"})}catch(r){console.error("Error deleting from backend:",r),m({title:"Error",description:"Failed to delete video from cloud. Please try again.",variant:"destructive"}),await fe()}}catch(r){console.error("Error deleting video:",r),m({title:"Error",description:"Failed to delete video. Please try again.",variant:"destructive"}),await fe()}},ts=t=>{const s=t.split(`

`).map(a=>a.replace(/^Slide\s*\d+[\s:.]+/i,"").trim()).join(`

`);Xe(s),P(s)},ss=()=>{if(!K)Xe(k);else if($==="carousel"){const t=Z.split(`

`).map(s=>s.replace(/^Slide\s*\d+[\s:.]+/i,"").trim()).join(`

`);M(t),P(t)}else M(Z),P(Z);$t(!K)},as=async()=>{if(!k&&!j){m({title:"No content to save",description:"Please generate content before saving",variant:"destructive"});return}Le(!0);try{const t=k||j,s=Ye(),a=(i==null?void 0:i.title)||"Generated Content",r={id:s,title:a,content:t,type:de,createdAt:new Date().toISOString()};i&&(r.videoId=i.id,r.videoTitle=i.title);const n="https://api.brandout.ai/api",l=n.endsWith("/api")?`${n}/carousel-contents`:`${n}/api/carousel-contents`,d=(o==null?void 0:o.id)||"anonymous";if(!(await N.post(l,{content:r,userId:d})).data.success)throw new Error("Failed to save content to backend");localStorage.setItem("ai_generated_content",t),localStorage.setItem("ai_generated_content_timestamp",new Date().toISOString()),i&&localStorage.setItem("ai_generated_content_videoId",i.id),await rs(),m({title:"Content saved successfully",description:"Your content has been saved to the cloud"}),Le(!1),Pe(!1)}catch(t){console.error("Error saving content:",t);try{const s=k||j;localStorage.setItem("ai_generated_content",s),localStorage.setItem("ai_generated_content_timestamp",new Date().toISOString()),i&&localStorage.setItem("ai_generated_content_videoId",i.id),m({title:"Content saved locally",description:"Could not save to cloud, but content is saved on your device",variant:"default"})}catch(s){console.error("Error saving to localStorage:",s),m({title:"Failed to save content",description:"Please try again or check your connection",variant:"destructive"})}}finally{Le(!1)}},rs=async()=>{try{const t="https://api.brandout.ai/api",s=t.endsWith("/api")?`${t}/carousel-contents`:`${t}/api/carousel-contents`,a=await N.get(s,{params:{userId:(o==null?void 0:o.id)||"anonymous"}});if(a.data.success&&Array.isArray(a.data.data)){if(O(a.data.data),localStorage.setItem("savedLinkedInContents",JSON.stringify(a.data.data)),i!=null&&i.id){const r=a.data.data.find(n=>n.videoId===i.id);r&&(M(r.content),P(r.content),me(r.title),H(r.type))}return}}catch(t){console.error("Error loading content from backend:",t);try{const s=localStorage.getItem("savedLinkedInContents");if(s){const a=JSON.parse(s);if(O(a),i!=null&&i.id){const r=a.find(n=>n.videoId===i.id);r&&(M(r.content),P(r.content),me(r.title),H(r.type))}}else O([])}catch(s){console.error("Error loading from localStorage:",s),O([])}}},ns=async t=>{try{let s=!1;try{const r="https://api.brandout.ai/api",n=r.endsWith("/api")?`${r}/carousel-contents/${t}`:`${r}/api/carousel-contents/${t}`;(await N.delete(n,{params:{userId:(o==null?void 0:o.id)||"anonymous"}})).data.success&&(s=!0)}catch(r){console.error("Error deleting content from backend:",r)}const a=ue.filter(r=>r.id!==t);O(a),localStorage.setItem("savedLinkedInContents",JSON.stringify(a)),m({title:"Content Deleted",description:s?"The content has been removed from your account":"The content has been removed locally"})}catch(s){console.error("Error deleting content:",s),m({title:"Error",description:"Failed to delete content",variant:"destructive"})}},is=t=>{let s=t.content;if(s=t.content.split(`

`).map(a=>a.replace(/^Slide\s*\d+[\s:.]+/i,"").trim()).join(`

`),M(s),P(s),me(t.title),H(t.type),$e(!1),he(!1),t.videoId){const a=Ie.find(r=>r.id===t.videoId);a&&(ie(a),a.videoUrl?C.setValue("youtubeUrl",a.videoUrl):a.id&&C.setValue("youtubeUrl",`https://youtube.com/watch?v=${a.id}`)),localStorage.setItem("ai_generated_content_videoId",t.videoId)}localStorage.setItem("ai_generated_content",s),localStorage.setItem("ai_generated_content_timestamp",new Date().toISOString()),m({title:"Content Loaded",description:`The saved ${t.type} content has been loaded`})},ls=t=>{const s=t.target.files;if(!s||s.length===0)return;if(S.length+s.length>5){m({title:"Too many files",description:"You can upload a maximum of 5 files",variant:"destructive"});return}const a=52428800,r=Array.from(s).filter(n=>n.size>a);if(r.length>0){m({title:"File too large",description:`${r.length>1?"Some files exceed":"One file exceeds"} the 50MB size limit`,variant:"destructive"});const n=Array.from(s).filter(l=>l.size<=a);xe([...S,...n])}else{const n=Array.from(s);xe([...S,...n]),m({title:"Files uploaded",description:`Added ${n.length} file${n.length>1?"s":""}`})}t.target.value=""},os=t=>{const s=[...S];s.splice(t,1),xe(s)},ve=()=>{Y("/settings/billing")};return e.jsxs("div",{className:"container max-w-6xl py-4 sm:py-8 px-1 sm:px-2 md:px-4 w-full overflow-hidden",children:[x&&e.jsxs("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-900",children:["Credits ",x.planId!=="expired"?`(${x.planName} Plan)`:""]}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:[x.count||0," / ",x.limit||0," credits used",x.expiresAt&&x.planId!=="expired"&&e.jsxs("span",{className:"ml-2",children:["• Expires ",As(x.expiresAt,"MMM dd, yyyy")]})]})]}),e.jsx("div",{className:"w-full sm:w-48 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${Math.min((x.count||0)/(x.limit||1)*100,100)}%`}})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mt-2 gap-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:x.planId!=="expired"?"Each credit can be used for generating either AI content or a carousel request":"Purchase a plan to get credits for AI content and carousel requests"}),(!x.planId||x.planId==="expired")&&e.jsx(c,{variant:"outline",size:"sm",onClick:()=>ge(!0),className:"text-xs h-7 w-full sm:w-auto mt-2 sm:mt-0",children:"Choose a Plan"})]})]}),e.jsxs("div",{className:"mb-4 sm:mb-8",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Request a Carousel"}),e.jsx("p",{className:"text-muted-foreground mt-1 text-xs sm:text-sm md:text-base break-words max-w-[90vw] sm:max-w-none",children:"Provide content from a YouTube video and we'll create a professional carousel for you"})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8 w-full",children:[e.jsx(ps,{...C,children:e.jsxs("form",{onSubmit:C.handleSubmit(ot),className:"space-y-4 sm:space-y-6 w-full max-w-[95vw] lg:max-w-full mx-auto",children:[e.jsxs(R,{className:"w-full",children:[e.jsxs(V,{className:"px-3 sm:px-6 py-3 sm:py-4",children:[e.jsx(D,{className:"text-base sm:text-lg",children:"Carousel Details"}),e.jsx(W,{className:"text-xs sm:text-sm max-w-[90%] break-words whitespace-normal",children:"Provide information about the carousel you'd like us to create"})]}),e.jsxs(z,{className:"space-y-3 sm:space-y-4 px-3 sm:px-6",children:[e.jsx(xt,{control:C.control,name:"title",render:({field:t})=>e.jsxs(pt,{children:[e.jsx(gt,{className:"text-xs sm:text-sm",children:"Carousel Title"}),e.jsx(gs,{children:e.jsx(Ve,{placeholder:"Enter a title for your carousel",className:"text-sm h-8 sm:h-10",...t})}),e.jsx(ft,{className:"text-xs",children:"This will be the title of your published carousel"}),e.jsx(vt,{className:"text-xs"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Content Source"})}),e.jsxs(fs,{defaultValue:"youtube",className:"w-full",children:[e.jsxs(vs,{className:"grid w-full grid-cols-2",children:[e.jsx(jt,{value:"youtube",children:"YouTube"}),e.jsx(jt,{value:"upload",children:"Upload File"})]}),e.jsxs(wt,{value:"youtube",className:"space-y-4",children:[e.jsx("div",{children:e.jsx(xt,{control:C.control,name:"youtubeUrl",render:({field:t})=>e.jsxs(pt,{children:[e.jsx(gt,{className:"text-xs sm:text-sm",children:"Select a Saved Video"}),e.jsxs("div",{className:"relative w-full max-w-[95vw] lg:max-w-full mx-auto",children:[e.jsx(js,{className:"absolute left-2 top-2 sm:top-2.5 h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"}),e.jsx(Ve,{placeholder:"Search by title",className:"pl-7 sm:pl-8 h-8 sm:h-10 text-xs sm:text-sm w-full",value:ne,onChange:s=>Nt(s.target.value),style:{maxWidth:"100%"}})]}),e.jsx(ft,{className:"text-xs",children:"Select one of your saved videos to create a carousel"}),e.jsx(vt,{})]})})}),kt?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mb-4"}),e.jsx("p",{children:"Loading your videos..."})]})}):lt.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 mt-4 w-full max-w-[95vw] lg:max-w-full mx-auto",children:lt.map(t=>e.jsxs("div",{className:`border rounded-lg cursor-pointer transition-all hover:shadow-md relative group w-full ${(i==null?void 0:i.id)===t.id?"ring-2 ring-blue-500":""}`,onClick:()=>Vt(t),children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("img",{src:t.thumbnailUrl,alt:t.title,className:"w-full aspect-video object-cover rounded-t-lg",loading:"lazy",style:{maxWidth:"100%",height:"auto"}}),e.jsx("div",{className:"absolute bottom-1 right-1 sm:bottom-2 sm:right-2 bg-black/80 text-white text-[8px] sm:text-xs px-1 py-0.5 rounded",children:t.duration}),(i==null?void 0:i.id)===t.id&&e.jsx("div",{className:"absolute inset-0 bg-blue-500/20 flex items-center justify-center",children:e.jsx("div",{className:"bg-blue-500 text-white p-2 rounded-full",children:e.jsx(_,{className:"h-5 w-5"})})}),(t.transcript||t.formattedTranscript&&t.formattedTranscript.length>0)&&e.jsxs("div",{className:"absolute top-2 left-2 bg-green-500/90 text-white text-xs px-1.5 py-0.5 rounded-full flex items-center gap-1",children:[e.jsx(te,{className:"h-3 w-3 flex-shrink-0"}),e.jsx("span",{className:"truncate max-w-[60px] sm:max-w-none",children:"Transcript"})]}),e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",onClick:s=>s.stopPropagation(),children:e.jsx(c,{variant:"destructive",size:"sm",className:"h-6 w-6 p-0 rounded-full",onClick:s=>es(t,s),children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 6h18"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})})]}),e.jsxs("div",{className:"p-2 sm:p-3",children:[e.jsx("h4",{className:"font-medium text-xs sm:text-sm line-clamp-2 break-words max-w-full",children:t.title}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 truncate max-w-[95%]",children:t.channelName}),e.jsx("div",{className:"flex items-center gap-2 mt-1 sm:mt-2 text-xs text-muted-foreground",children:e.jsx("span",{className:"truncate max-w-[100px] sm:max-w-full",children:t.date})}),e.jsx("div",{className:"mt-1 sm:mt-2 pt-1 sm:pt-2 border-t flex justify-end flex-wrap w-full",onClick:s=>s.stopPropagation(),children:Te&&It===t.id?e.jsx("div",{className:"w-full flex justify-center",children:e.jsx(se,{className:"h-3 w-3 sm:h-4 sm:w-4 animate-spin text-primary"})}):t.transcript||t.formattedTranscript&&t.formattedTranscript.length>0?e.jsx(be,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200 text-[10px] sm:text-xs w-full text-center sm:w-auto py-0.5",children:"Transcript Available"}):e.jsxs(c,{variant:"ghost",size:"sm",onClick:s=>{s.stopPropagation(),qe(t)},className:"text-[10px] sm:text-xs h-6 sm:h-7 px-1.5 sm:px-2 py-0 w-full sm:w-auto max-w-[95%] mx-auto sm:mx-0",children:[e.jsx(te,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 mr-0.5 sm:mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate max-w-[80px] sm:max-w-none",children:"Get Transcript"})]})})]})]},t.id))}):e.jsx("div",{className:"flex justify-center items-center py-6 sm:py-8 border border-dashed rounded-lg",children:e.jsxs("div",{className:"text-center px-2",children:[e.jsx("p",{className:"mb-2 text-xs sm:text-sm text-muted-foreground",children:"No saved videos found"}),e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>Y("/dashboard/scraper"),className:"h-7 sm:h-8 text-xs sm:text-sm px-2 sm:px-3",children:[e.jsx(ws,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2 flex-shrink-0"}),e.jsx("span",{className:"whitespace-nowrap",children:"Scrape new videos"})]})]})}),A>1&&e.jsx("div",{className:"w-full overflow-x-auto pb-2",children:e.jsxs("div",{className:"flex items-center justify-center mt-4 gap-1 min-w-fit mx-auto",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>Ht(),disabled:E===1,className:"h-7 sm:h-8 px-1.5 sm:px-2 text-xs whitespace-nowrap",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:(()=>{const t=[],s=window.innerWidth<640?3:5,a=Math.floor(s/2);let r=Math.max(1,E-a),n=Math.min(A,r+s-1);n-r+1<s&&(r=Math.max(1,n-s+1)),r>1&&(t.push(e.jsx(c,{variant:E===1?"default":"outline",size:"sm",onClick:()=>Re(1),className:"h-7 sm:h-8 w-7 sm:w-8 p-0 text-xs",children:"1"},"1")),r>2&&t.push(e.jsx("span",{className:"px-0.5 sm:px-1",children:"..."},"start-ellipsis")));for(let l=r;l<=n;l++)t.push(e.jsx(c,{variant:E===l?"default":"outline",size:"sm",onClick:()=>Re(l),className:"h-7 sm:h-8 w-7 sm:w-8 p-0 text-xs",children:l},l));return n<A&&(n<A-1&&t.push(e.jsx("span",{className:"px-0.5 sm:px-1",children:"..."},"end-ellipsis")),t.push(e.jsx(c,{variant:E===A?"default":"outline",size:"sm",onClick:()=>Re(A),className:"h-7 sm:h-8 w-7 sm:w-8 p-0 text-xs",children:A},A))),t})()}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>Gt(),disabled:E===A,className:"h-7 sm:h-8 px-1.5 sm:px-2 text-xs whitespace-nowrap",children:"Next"})]})}),St&&i&&e.jsxs("div",{className:"mt-4 border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Generated Transcript"}),q.length===0&&!Te&&e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>qe(i),className:"flex items-center gap-1",children:[e.jsx(te,{className:"h-4 w-4"}),"Fetch Transcript"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"This transcript will be used to create your carousel slides:"}),Te?e.jsx("div",{className:"py-8 flex items-center justify-center",children:e.jsx(se,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):Tt?e.jsxs("div",{className:"py-4 rounded-md border border-destructive p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(bs,{className:"h-5 w-5 text-destructive"}),e.jsx("h3",{className:"text-destructive font-medium",children:"Transcript Error"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Unable to fetch transcript for this video. This may be because:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-muted-foreground mt-2 ml-2 space-y-1",children:[e.jsx("li",{children:"The video does not have captions"}),e.jsx("li",{children:"The transcript service is temporarily unavailable"}),e.jsx("li",{children:"The video creator has disabled captions"})]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>qe(i),className:"mt-4",children:[e.jsx(ys,{className:"h-4 w-4 mr-2"}),"Retry"]})]}):q.length>0||i!=null&&i.transcript&&i.transcript.length>0?e.jsxs("div",{className:"rounded-md border p-4 mb-4",children:[e.jsx(Ns,{className:"h-[160px] sm:h-[200px]",children:e.jsx("p",{className:"text-xs sm:text-sm whitespace-pre-line px-1",children:(i==null?void 0:i.transcript)||(q.length>0?q[0]:"")})}),e.jsxs("div",{className:"mt-4 border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h3",{className:"text-md font-medium flex items-center gap-2",children:[e.jsx(Ss,{className:"h-4 w-4 text-amber-500"}),"Generate LinkedIn Content"]}),e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>$e(!0),className:"flex items-center gap-1 border-blue-200 text-blue-700 hover:bg-blue-50",children:[e.jsx(re,{className:"h-4 w-4 text-blue-600"}),"Saved (",ue.length,")"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3 mb-4",children:Oe.map(t=>e.jsxs(c,{variant:"outline",className:"h-auto py-2 sm:py-3 px-2 sm:px-4 flex flex-col items-center text-center",onClick:()=>Yt(t.type),disabled:G,children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-primary/10 flex items-center justify-center mb-1 sm:mb-2",children:e.jsx("span",{className:"flex-shrink-0 scale-75 sm:scale-100",children:t.icon})}),e.jsx("span",{className:"text-xs sm:text-sm font-medium line-clamp-1",children:t.title})]},t.type))}),e.jsxs("div",{className:"mt-4 border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(zs,{className:"h-4 w-4 text-blue-500"}),"LinkedIn Post Analysis (Optional)"]}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>_t(!_e),className:"text-xs",children:_e?"Hide":"Attach Post"})]}),_e&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(De,{placeholder:"Paste a LinkedIn post content here to analyze its writing style and structure for your carousel generation...",value:st,onChange:t=>at(t.target.value),className:"min-h-[100px] text-sm"}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"This will help the AI understand your preferred writing style and tone."}),st&&e.jsx(c,{variant:"outline",size:"sm",onClick:()=>at(""),className:"text-xs",children:"Clear"})]})]})]})]})]}):e.jsx("div",{className:"py-4 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:'No transcript available. Click "Get Transcript" to fetch it.'})})]})]}),e.jsx(wt,{value:"upload",className:"space-y-4",children:e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:[e.jsx(Ve,{type:"file",id:"file-upload",className:"hidden",onChange:qt,accept:".pdf,.ppt,.pptx,.doc,.docx,.jpg,.jpeg,.png"}),e.jsxs(ye,{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center justify-center",children:[e.jsx(We,{className:"h-8 w-8 text-muted-foreground mb-2"}),e.jsx("h3",{className:"font-medium text-lg",children:B?B.name:"Drag & drop or click to upload"}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"PDF, PowerPoint, or image files"}),!B&&e.jsx(c,{variant:"outline",type:"button",className:"mt-4",onClick:()=>{var t;return(t=document.getElementById("file-upload"))==null?void 0:t.click()},children:"Browse Files"})]}),B&&e.jsxs("div",{className:"mt-4 flex items-center gap-2 justify-center",children:[e.jsx(be,{variant:"outline",className:"text-xs py-1 px-2",children:B.type.split("/")[1].toUpperCase()}),e.jsxs(be,{variant:"outline",className:"text-xs py-1 px-2",children:[(B.size/1024/1024).toFixed(2)," MB"]}),e.jsx(c,{variant:"outline",size:"sm",type:"button",className:"text-xs h-7",onClick:()=>Je(null),children:"Remove"})]})]})})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(c,{type:"button",onClick:C.handleSubmit(ot),disabled:Ge,className:"flex-1 order-1",children:Ge?e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"h-4 w-4 mr-2 animate-spin flex-shrink-0"}),"Submitting..."]}):"Submit Carousel Request"}),e.jsxs(c,{type:"button",variant:"outline",className:"flex gap-1 items-center order-2",onClick:()=>Y("/dashboard/templates"),children:[e.jsx(Be,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Browse Templates"})]})]})]})}),e.jsxs(R,{className:"w-full",children:[e.jsxs(V,{className:"px-3 sm:px-6 py-3 sm:py-4",children:[e.jsx(D,{className:"text-base sm:text-lg",children:"Preview & Information"}),e.jsx(W,{className:"text-xs sm:text-sm",children:"See how your carousel might look"})]}),e.jsxs(z,{className:"space-y-4 sm:space-y-6 px-3 sm:px-6",children:[i?e.jsxs("div",{className:"bg-white border rounded-lg overflow-hidden shadow-md",children:[e.jsx("div",{className:"p-2 sm:p-3 border-b",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-blue-100 flex items-center justify-center mr-2 sm:mr-3 flex-shrink-0",children:e.jsx("span",{className:"font-semibold text-blue-600 text-xs sm:text-sm",children:"YT"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h4",{className:"font-medium text-xs sm:text-sm truncate",children:"Your LinkedIn Profile"}),e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-500 truncate",children:"Content Creator • Just now"})]})]})}),e.jsx("div",{className:"p-3",children:j?e.jsx("div",{children:$!=null&&$.includes("post")?e.jsx("p",{className:"text-sm whitespace-pre-line",children:j}):$==="carousel"&&e.jsx("div",{className:"aspect-square w-full relative overflow-hidden",children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsxs("div",{className:"flex-1 flex flex-col justify-center p-2 sm:p-6 bg-gradient-to-br from-blue-50 to-white overflow-hidden",children:[e.jsx("div",{className:"mx-auto max-w-[90%] text-center",children:e.jsx("p",{className:"text-xs sm:text-sm md:text-base lg:text-lg font-semibold leading-tight line-clamp-6 sm:line-clamp-none",children:Qt(j,Se)})}),e.jsx("div",{className:"absolute bottom-2 left-2 sm:bottom-3 sm:left-3",children:e.jsx("div",{className:"bg-blue-600 text-white text-[10px] sm:text-xs px-1.5 sm:px-2.5 py-0.5 sm:py-1 rounded flex items-center",children:e.jsx("span",{className:"font-bold",children:"in"})})})]}),e.jsxs("div",{className:"absolute top-1/2 -translate-y-1/2 left-1 right-1 sm:left-2 sm:right-2 flex justify-between",children:[e.jsxs(c,{onClick:Rt,size:"icon",variant:"ghost",className:"h-6 w-6 sm:h-8 sm:w-8 md:h-10 md:w-10 rounded-full bg-white/90 hover:bg-white border shadow-sm text-gray-700 flex-shrink-0",children:[e.jsx(Cs,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5"}),e.jsx("span",{className:"sr-only",children:"Previous slide"})]}),e.jsxs(c,{onClick:Ot,size:"icon",variant:"ghost",className:"h-6 w-6 sm:h-8 sm:w-8 md:h-10 md:w-10 rounded-full bg-white/90 hover:bg-white border shadow-sm text-gray-700 flex-shrink-0",children:[e.jsx(ks,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5"}),e.jsx("span",{className:"sr-only",children:"Next slide"})]})]})]})})}):e.jsx("p",{className:"text-sm mb-3",children:i.title})}),$==="carousel"&&e.jsx("div",{className:"border-t",children:e.jsx("div",{className:"flex justify-center p-1 sm:p-2 md:p-3 gap-0.5 sm:gap-1 overflow-x-auto",children:j?dt(j).map((t,s)=>e.jsx("div",{className:`h-1 sm:h-1.5 rounded-full cursor-pointer transition-all flex-shrink-0 ${s===Se?"w-4 sm:w-6 bg-blue-600":"w-1 sm:w-1.5 bg-gray-300 hover:bg-gray-400"}`,onClick:()=>F(s)},s)):Array(7).fill(0).map((t,s)=>e.jsx("div",{className:`h-1 sm:h-1.5 rounded-full cursor-pointer transition-all flex-shrink-0 ${s===Se%7?"w-4 sm:w-6 bg-blue-600":"w-1 sm:w-1.5 bg-gray-300 hover:bg-gray-400"}`,onClick:()=>F(s)},s))})}),e.jsx("div",{className:"border-t",children:e.jsxs("div",{className:"flex items-center justify-around p-1",children:[e.jsxs(c,{variant:"ghost",className:"flex-1 h-7 sm:h-8 md:h-10 rounded-md gap-0.5 sm:gap-1 text-[10px] sm:text-xs text-gray-600 px-0.5 sm:px-1",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-shrink-0",children:[e.jsx("path",{d:"M7 10v12"}),e.jsx("path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z"})]}),e.jsx("span",{className:"hidden sm:inline",children:"Like"})]}),e.jsxs(c,{variant:"ghost",className:"flex-1 h-7 sm:h-8 md:h-10 rounded-md gap-0.5 sm:gap-1 text-[10px] sm:text-xs text-gray-600 px-0.5 sm:px-1",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-shrink-0",children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Comment"})]}),e.jsxs(c,{variant:"ghost",className:"flex-1 h-7 sm:h-8 md:h-10 rounded-md gap-0.5 sm:gap-1 text-[10px] sm:text-xs text-gray-600 px-0.5 sm:px-1",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-shrink-0",children:[e.jsx("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),e.jsx("polyline",{points:"16 6 12 2 8 6"}),e.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]}),e.jsx("span",{className:"hidden sm:inline",children:"Repost"})]}),e.jsxs(c,{variant:"ghost",className:"flex-1 h-7 sm:h-8 md:h-10 rounded-md gap-0.5 sm:gap-1 text-[10px] sm:text-xs text-gray-600 px-0.5 sm:px-1",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-shrink-0",children:[e.jsx("path",{d:"M22 2 11 13"}),e.jsx("path",{d:"m22 2-7 20-4-9-9-4 20-7z"})]}),e.jsx("span",{className:"hidden sm:inline",children:"Send"})]})]})})]}):e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 sm:p-6 text-center",children:[e.jsx("div",{className:"bg-gray-100 w-12 h-12 sm:w-16 sm:h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Ms,{className:"h-5 w-5 sm:h-6 sm:w-6 text-gray-500"})}),e.jsx("h3",{className:"text-base sm:text-lg font-medium mb-2",children:"Select a YouTube video"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"A preview of your content will appear here after selecting a video and generating content."})]}),j&&$==="carousel"&&e.jsx("div",{className:"mt-4",children:e.jsxs(c,{onClick:Xt,className:"w-full",variant:"outline",children:[e.jsx(Be,{className:"mr-2 h-4 w-4"}),"Edit in Carousel Editor"]})}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"border rounded-lg p-2 sm:p-3 md:p-4",children:[e.jsx("h3",{className:"font-medium mb-1 sm:mb-2 text-xs sm:text-sm md:text-base",children:"Best Practices for Effective Carousels"}),e.jsxs("ul",{className:"text-[10px] sm:text-xs md:text-sm space-y-1 sm:space-y-2 pl-4 sm:pl-5 list-disc text-muted-foreground",children:[e.jsx("li",{children:"Keep each slide focused on a single key point"}),e.jsx("li",{children:"Use 5-8 slides for optimal engagement"}),e.jsx("li",{children:"Include a clear call to action on the final slide"}),e.jsx("li",{children:"Maintain consistent visual style across all slides"})]})]}),e.jsxs("div",{className:"border rounded-lg p-2 sm:p-3 md:p-4",children:[e.jsx("h3",{className:"font-medium mb-1 sm:mb-2 text-xs sm:text-sm md:text-base",children:"Delivery Timeline"}),e.jsx("p",{className:"text-[10px] sm:text-xs md:text-sm text-muted-foreground",children:"Your carousel will be ready within 24 hours. You'll receive an email notification when it's complete and ready for review."})]})]})]})]})]}),Et&&de&&e.jsxs(R,{className:"mt-4",children:[e.jsxs(V,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsxs("div",{children:[e.jsx(D,{className:"text-lg",children:((mt=Oe.find(t=>t.type===de))==null?void 0:mt.title)||"Generated Content"}),e.jsx(W,{children:"AI-generated content based on video transcript"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!G&&k&&e.jsx(c,{variant:"outline",size:"sm",onClick:ss,className:"gap-2",children:K?e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"h-4 w-4"}),"Save Edits"]}):e.jsxs(e.Fragment,{children:[e.jsx(Is,{className:"h-4 w-4"}),"Edit Content"]})}),e.jsx(c,{variant:"ghost",size:"sm",onClick:rt,children:"✕"})]})]}),e.jsx(z,{children:G?e.jsxs("div",{className:"py-12 flex flex-col items-center justify-center",children:[e.jsx(se,{className:"h-8 w-8 animate-spin text-primary mb-4"}),e.jsxs("p",{className:"text-muted-foreground",children:["Generating ",(ut=Oe.find(t=>t.type===de))==null?void 0:ut.title,"..."]})]}):e.jsx("div",{className:"border rounded-md p-4 bg-muted/20",children:K?e.jsx(De,{value:Z,onChange:t=>ts(t.target.value),className:"min-h-[200px] font-mono text-sm",placeholder:"Edit your content here..."}):e.jsx("p",{className:"whitespace-pre-line",children:k})})}),e.jsxs(ae,{className:"flex justify-between border-t pt-4",children:[e.jsx(c,{variant:"outline",onClick:rt,children:"Close"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(c,{variant:"secondary",onClick:as,disabled:G||!k,className:"flex items-center gap-1",children:[e.jsx(Ts,{className:"h-4 w-4"}),"Save"]}),e.jsx(c,{variant:"default",disabled:G||!k,onClick:()=>{k&&(navigator.clipboard.writeText(K?Z:k),m({description:"Content copied to clipboard"}))},children:"Copy Content"})]})]})]}),Pt&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-3xl max-h-[80vh] flex flex-col shadow-xl",children:[e.jsxs("div",{className:"p-4 border-b bg-blue-50 flex items-center justify-between rounded-t-lg",children:[e.jsxs("h3",{className:"text-lg font-medium text-blue-800 flex items-center gap-2",children:[e.jsx(re,{className:"h-5 w-5 text-blue-600"}),"Saved Content"]}),e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>$e(!1),children:"✕"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:ue.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[e.jsx(re,{className:"h-16 w-16 text-blue-200 mb-4"}),e.jsx("p",{className:"text-blue-800 font-medium",children:"No saved content yet"}),e.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"Generate and save content to access it anytime"})]}):e.jsx("div",{className:"space-y-4",children:ue.map(t=>e.jsxs("div",{className:"border rounded-lg overflow-hidden border-blue-100 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"p-3 bg-blue-50 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900",children:t.title}),e.jsxs("p",{className:"text-xs text-blue-700",children:[t.videoTitle&&`From: ${t.videoTitle} • `,new Date(t.createdAt).toLocaleDateString()]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>ns(t.id),className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 6h18"}),e.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),e.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]})})})]}),e.jsxs("div",{className:"p-3 bg-white",children:[e.jsx("div",{className:"max-h-40 overflow-y-auto mb-3",children:e.jsx("p",{className:"text-sm whitespace-pre-line line-clamp-6 text-gray-800",children:t.content})}),e.jsxs("div",{className:"flex justify-end gap-2 border-t pt-3",children:[e.jsxs(c,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(t.content),m({description:"Content copied to clipboard"})},className:"h-8 border-blue-200 text-blue-700 hover:bg-blue-50",children:[e.jsx(Es,{className:"h-3 w-3 mr-1"}),"Copy"]}),e.jsxs(c,{variant:"default",size:"sm",onClick:()=>is(t),className:"h-8 bg-blue-600 hover:bg-blue-700",children:[e.jsx(Ps,{className:"h-3 w-3 mr-1"}),"Load"]})]})]})]},t.id))})})]})}),Ut&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-2 sm:p-4",children:e.jsxs(R,{className:"w-full max-w-3xl max-h-[90vh] flex flex-col overflow-hidden",children:[e.jsxs(V,{className:"border-b",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(D,{className:"text-base sm:text-lg",children:U===3?"Request Submitted":"Carousel Request Details"}),U!==3&&e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>he(!1),children:"✕"})]}),e.jsxs(W,{className:"text-xs sm:text-sm",children:[U===1&&"Provide additional details for your carousel request",U===2&&"Review your request before submitting",U===3&&"We'll create your carousel within 24 hours"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[U===1&&e.jsxs(z,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(ye,{children:"Carousel Type"}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3",children:ct.map(t=>e.jsxs("div",{className:`border rounded-lg p-3 cursor-pointer transition-all hover:bg-primary-50 ${Fe===t.value?"ring-2 ring-primary bg-primary-50":""}`,onClick:()=>Ft(t.value),children:[e.jsx("div",{className:"font-medium",children:t.label}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:t.description})]},t.value))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ye,{children:["Additional Files ",e.jsx("span",{className:"text-xs text-muted-foreground",children:"(Optional)"})]}),e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-4",children:[S.length>0?e.jsxs("div",{className:"space-y-3",children:[S.map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between bg-muted p-2 rounded-md",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded bg-primary/10 flex items-center justify-center mr-2",children:t.type.includes("image")?e.jsx(bt,{className:"h-4 w-4 text-primary"}):t.type.includes("pdf")?e.jsx(te,{className:"h-4 w-4 text-primary"}):e.jsx(re,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium truncate max-w-[200px]",children:t.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[(t.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx(c,{variant:"ghost",size:"sm",onClick:()=>os(s),className:"h-8 w-8 p-0 text-muted-foreground",children:"✕"})]},s)),S.length<5&&e.jsxs(c,{variant:"outline",onClick:()=>{var t;return(t=Ae.current)==null?void 0:t.click()},className:"w-full mt-3",children:[e.jsx(We,{className:"h-4 w-4 mr-2"}),"Add More Files"]})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(We,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),e.jsx("div",{className:"font-medium",children:"Drag and drop or click to upload"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 mb-3",children:"Upload your logo, brand guidelines, or any other files (max 5 files)"}),e.jsx(c,{variant:"outline",onClick:()=>{var t;return(t=Ae.current)==null?void 0:t.click()},children:"Select Files"})]}),e.jsx("input",{ref:Ae,type:"file",className:"hidden",multiple:!0,onChange:ls,accept:".jpg,.jpeg,.png,.pdf,.doc,.docx,.txt"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ye,{children:["Additional Notes ",e.jsx("span",{className:"text-xs text-muted-foreground",children:"(Optional)"})]}),e.jsx(De,{placeholder:"Any specific requests or instructions for your carousel? (e.g., branding preferences, design elements, content emphasis)",className:"min-h-[80px] sm:min-h-[100px] text-sm",value:pe,onChange:t=>At(t.target.value)})]})]}),U===2&&e.jsx(z,{className:"p-6 space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-3 bg-muted/30 border-b",children:e.jsx("h3",{className:"font-medium",children:"Selected Video"})}),e.jsxs("div",{className:"p-3 flex items-center gap-3",children:[e.jsx("div",{className:"w-24 sm:w-32 h-16 sm:h-20 bg-black/5 rounded overflow-hidden flex-shrink-0",children:e.jsx("img",{src:(i==null?void 0:i.thumbnailUrl)||(i==null?void 0:i.thumbnail),alt:i==null?void 0:i.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium line-clamp-1",children:i==null?void 0:i.title}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:i==null?void 0:i.channelName})]})]})]}),e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-3 bg-muted/30 border-b",children:e.jsx("h3",{className:"font-medium",children:"Generated Content"})}),e.jsx("div",{className:"p-3",children:e.jsx("div",{className:"max-h-28 sm:max-h-32 overflow-y-auto",children:e.jsx("p",{className:"text-xs sm:text-sm whitespace-pre-line p-1",children:j||k})})})]}),e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-3 bg-muted/30 border-b",children:e.jsx("h3",{className:"font-medium",children:"Carousel Type"})}),e.jsx("div",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(be,{variant:"secondary",className:"capitalize",children:Fe}),e.jsx("span",{className:"text-sm text-muted-foreground",children:(ht=ct.find(t=>t.value===Fe))==null?void 0:ht.description})]})})]}),S.length>0&&e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-3 bg-muted/30 border-b",children:e.jsx("h3",{className:"font-medium",children:"Uploaded Files"})}),e.jsx("div",{className:"p-3",children:e.jsx("div",{className:"space-y-2",children:S.map((t,s)=>e.jsxs("div",{className:"flex items-center text-sm",children:[t.type.includes("image")?e.jsx(bt,{className:"h-3 w-3 text-muted-foreground mr-2"}):t.type.includes("pdf")?e.jsx(te,{className:"h-3 w-3 text-muted-foreground mr-2"}):e.jsx(re,{className:"h-3 w-3 text-muted-foreground mr-2"}),e.jsx("span",{children:t.name}),e.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:[(t.size/1024/1024).toFixed(2)," MB"]})]},s))})})]}),pe&&e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-3 bg-muted/30 border-b",children:e.jsx("h3",{className:"font-medium",children:"Additional Notes"})}),e.jsx("div",{className:"p-3",children:e.jsx("p",{className:"text-sm whitespace-pre-line",children:pe})})]})]})}),U===3&&e.jsxs(z,{className:"p-4 sm:p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4 sm:mb-6",children:e.jsx(_,{className:"h-8 w-8 sm:h-10 sm:w-10 text-green-600"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-2 sm:mb-3",children:"Request Submitted!"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-4 sm:mb-6 max-w-md mx-auto",children:"We've received your carousel request and will start working on it right away. You'll receive an email notification when it's ready, typically within 24 hours."}),e.jsxs("div",{className:"border rounded-lg p-3 sm:p-4 bg-muted/20 mb-4 sm:mb-6 max-w-md mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(_s,{className:"h-4 w-4 text-muted-foreground mr-2 flex-shrink-0"}),e.jsx("h3",{className:"font-medium text-sm sm:text-base",children:"What happens next?"})]}),e.jsxs("ol",{className:"text-xs sm:text-sm text-left space-y-2 pl-5 sm:pl-6 list-decimal",children:[e.jsx("li",{children:"Our design team will review your request"}),e.jsx("li",{children:"We'll create a professional carousel based on your content"}),e.jsx("li",{children:"You'll receive an email when it's ready to review"}),e.jsx("li",{children:"You can request revisions if needed"})]})]})]})]}),e.jsxs(ae,{className:"border-t p-4 flex justify-between",children:[U===1&&e.jsxs(e.Fragment,{children:[e.jsx(c,{variant:"outline",onClick:()=>he(!1),children:"Cancel"}),e.jsx(c,{onClick:()=>Ue(2),children:"Continue to Review"})]}),U===2&&e.jsxs(e.Fragment,{children:[e.jsx(c,{variant:"outline",onClick:()=>Ue(1),children:"Back"}),e.jsx(c,{onClick:Kt,disabled:et,children:et?e.jsxs(e.Fragment,{children:[e.jsx(se,{className:"h-4 w-4 mr-2 animate-spin"}),"Submitting..."]}):"Submit Request"})]}),U===3&&e.jsxs(e.Fragment,{children:[e.jsx("div",{})," ",e.jsx("div",{className:"space-x-3",children:e.jsxs(c,{onClick:()=>Y("/dashboard/my-carousels"),className:"gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),"View My Carousels"]})})]})]})]})}),Lt&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs(R,{className:"w-full max-w-lg",children:[e.jsxs(V,{children:[e.jsx(D,{children:"Subscription Required"}),e.jsx(W,{children:x.count>=x.limit?"You've reached your credit limit.":"A subscription is required to access this feature."})]}),e.jsx(z,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-amber-50 text-amber-800 p-4 rounded-lg text-sm flex items-start gap-2.5",children:[e.jsx("div",{className:"mt-0.5",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),e.jsx("path",{d:"M12 9v4"}),e.jsx("path",{d:"M12 17h.01"})]})}),e.jsx("div",{children:x.count>=x.limit?e.jsxs("p",{children:["You have used all ",x.limit," credits from your ",x.planName," plan."]}):!x.planId||x.planId==="expired"?e.jsx("p",{children:"You don't have an active subscription. Please select a plan to continue using this feature."}):e.jsx("p",{children:"Your plan doesn't include access to this feature. Please upgrade to continue."})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs(R,{className:"border-2 border-primary",children:[e.jsxs(V,{className:"pb-2",children:[e.jsx(D,{className:"text-base",children:"Basic Plan"}),e.jsx(W,{children:"$100/month"})]}),e.jsxs(z,{className:"pb-2",children:[e.jsx("div",{className:"text-2xl font-bold",children:"10 Credits"}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"per month"}),e.jsx("div",{className:"border-t my-3"}),e.jsxs("ul",{className:"text-sm space-y-1.5",children:[e.jsxs("li",{className:"flex items-center gap-1.5",children:[e.jsx(_,{className:"h-4 w-4 text-primary"})," AI Content Generation"]}),e.jsxs("li",{className:"flex items-center gap-1.5",children:[e.jsx(_,{className:"h-4 w-4 text-primary"})," Carousel Requests"]}),e.jsxs("li",{className:"flex items-center gap-1.5",children:[e.jsx(_,{className:"h-4 w-4 text-primary"})," Priority Support"]})]})]}),e.jsx(ae,{children:e.jsx(c,{className:"w-full",onClick:ve,children:"Choose Basic"})})]}),e.jsxs(R,{children:[e.jsxs(V,{className:"pb-2",children:[e.jsx(D,{className:"text-base",children:"Premium Plan"}),e.jsx(W,{children:"$200/month"})]}),e.jsxs(z,{className:"pb-2",children:[e.jsx("div",{className:"text-2xl font-bold",children:"25 Credits"}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"per month"}),e.jsx("div",{className:"border-t my-3"}),e.jsxs("ul",{className:"text-sm space-y-1.5",children:[e.jsxs("li",{className:"flex items-center gap-1.5",children:[e.jsx(_,{className:"h-4 w-4 text-primary"})," AI Content Generation"]}),e.jsxs("li",{className:"flex items-center gap-1.5",children:[e.jsx(_,{className:"h-4 w-4 text-primary"})," Carousel Requests"]}),e.jsxs("li",{className:"flex items-center gap-1.5",children:[e.jsx(_,{className:"h-4 w-4 text-primary"})," Priority Support"]}),e.jsxs("li",{className:"flex items-center gap-1.5",children:[e.jsx(_,{className:"h-4 w-4 text-primary"})," White Label Options"]})]})]}),e.jsx(ae,{children:e.jsx(c,{className:"w-full",variant:"outline",onClick:ve,children:"Choose Premium"})})]})]}),e.jsx("div",{className:"text-center text-sm text-muted-foreground pt-2",children:e.jsxs("p",{children:["Need a custom plan? ",e.jsx(c,{variant:"link",className:"h-auto p-0",onClick:ve,children:"Contact us"})]})})]})}),e.jsxs(ae,{className:"flex justify-between border-t pt-4",children:[e.jsx(c,{variant:"ghost",onClick:()=>ge(!1),children:"Cancel"}),e.jsx(c,{onClick:ve,children:"View All Plans"})]})]})})]})};export{Xs as default};
