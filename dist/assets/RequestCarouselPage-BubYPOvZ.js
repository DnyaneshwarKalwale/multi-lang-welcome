import{j as e}from"./ui-vendor-yLFRes2f.js";import{r as x,u as Tt,d as Pt}from"./react-vendor-DWSrZqKN.js";import{k as ze,aI as Gs,J as Fe,b as g,r as Ls,X as Et,a3 as xs,a4 as ps,a5 as ve,T as Fs,L as zs,a6 as we,aq as te,au as G,ar as oe,a as $t,aJ as Ut,aK as At,as as xe,at as pe,aL as Ms,aM as _s,aN as qs,aO as Lt,N as Ke,aP as Vs,aQ as Rs,a7 as Ds,e as K,F as $e,s as Ue,aw as Ae,aR as Ft,C as zt,R as Mt,a8 as _t,S as qt,aS as Ze,o as hs,aT as us,aH as Vt,j as Rt,aU as Dt,av as Os,aF as Le,aV as Xe,n as Ot,A as Wt,I as Ws,aW as Bt,aX as Yt,aY as Bs}from"./index-CisuWjtJ.js";import{a as V,f as Gt}from"./utils-vendor-DFcOAB1P.js";import{g as Ht,T as Jt,a as Kt}from"./twitterApi-BQADLKBQ.js";import{F as re}from"./folder-CD76w1dZ.js";import{v as Ys}from"./v4-C6aID195.js";import"./heart-5GAuxEi9.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=ze("Clock4",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=ze("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=ze("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=ze("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=ze("SearchX",[["path",{d:"m13.5 8.5-5 5",key:"1cs55j"}],["path",{d:"m8.5 8.5 5 5",key:"a8mexj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),sa=({content:w})=>{const[p,u]=x.useState(!1),$=w.length>300,R=$&&!p?w.slice(0,300)+"...":w;return e.jsxs("div",{className:"text-sm text-gray-700 leading-relaxed",children:[e.jsx("div",{className:"whitespace-pre-wrap",children:R}),$&&e.jsx("button",{onClick:()=>u(!p),className:"text-blue-600 hover:text-blue-800 text-sm font-medium mt-2",children:p?"Show less":"Show more"})]})},ta=({post:w})=>{var $;const[p,u]=x.useState(0);return!w.media||w.media.length<=1?null:e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"rounded-lg overflow-hidden bg-gray-100",children:e.jsx("img",{src:($=w.media[p])==null?void 0:$.url,alt:`Media ${p+1}`,className:"w-full object-cover cursor-pointer hover:opacity-95 transition-opacity",style:{height:"auto",maxHeight:"400px"},onClick:()=>{var R;return window.open((R=w.media[p])==null?void 0:R.url,"_blank")}})}),w.media.length>1&&e.jsx("div",{className:"flex justify-center mt-2 space-x-1",children:w.media.map((R,U)=>e.jsx("button",{onClick:()=>u(U),className:`w-2 h-2 rounded-full ${U===p?"bg-blue-500":"bg-gray-300"}`},U))})]})},aa=({document:w,postId:p,onOpenPdf:u})=>{var U,ae,o;const[$,R]=x.useState(0);return!w||!w.coverPages||w.coverPages.length===0?null:e.jsxs("div",{className:"border rounded-lg overflow-hidden bg-gray-50",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:((U=w.coverPages[$])==null?void 0:U.url)||((ae=w.coverPages[0])==null?void 0:ae.url),alt:`${w.title} - Page ${$+1}`,className:"w-full h-48 object-cover cursor-pointer hover:opacity-95 transition-opacity",onClick:()=>u(w.url,w.title)}),w.coverPages.length>1&&e.jsxs("div",{className:"absolute bottom-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded",children:[$+1," / ",w.coverPages.length]})]}),e.jsxs("div",{className:"p-3",children:[e.jsx("h4",{className:"font-medium text-sm truncate",children:w.title}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[(o=w.fileType)==null?void 0:o.toUpperCase()," â€¢ ",w.totalPageCount," pages"]})]})]})},ra=({isOpen:w,onClose:p,onApplySelection:u,selectedPostsCount:$})=>{const{toast:R}=Gs(),[U,ae]=x.useState("folders"),[o,ne]=x.useState({twitter:new Set,linkedin:new Set}),[T,Z]=x.useState({twitter:new Set,linkedin:new Set}),[H,X]=x.useState("twitter"),[ge,Me]=x.useState([]),[_e,Ne]=x.useState([]),[ce,z]=x.useState([]),[M,de]=x.useState(!0);x.useEffect(()=>{w&&be()},[w]);const be=async()=>{var m,v,C,ie;de(!0);const n="https://api.brandout.ai/api",c=localStorage.getItem("auth-method"),d=c?Fe.getToken(c):null;if(!d){console.warn("No auth token found"),de(!1);return}const h={Authorization:`Bearer ${d}`};console.log("Loading saved posts with API URL:",n);try{const b=n.endsWith("/api")?`${n}/twitter/saved`:`${n}/api/twitter/saved`,E=await V.get(b,{headers:h});if(E.data.success){const fs=E.data.data||[],Ve=Ht(fs),L=[],he=[];Ve.forEach(A=>{"tweets"in A?he.push(A):L.push(A)}),Me(L),Ne(he),console.log("Loaded Twitter posts:",L.length,"tweets and",he.length,"threads")}else console.warn("Failed to load saved Twitter posts:",E.data.message),Me([]),Ne([])}catch(b){console.error("Error loading saved Twitter posts:",b),((m=b.response)==null?void 0:m.status)===401&&R({description:"Please log in to view saved posts",variant:"destructive"}),Me([]),Ne([])}try{const b=n.endsWith("/api")?`${n}/linkedin/saved-posts`:`${n}/api/linkedin/saved-posts`,E=await V.get(b,{headers:h});E.data.success?(z(E.data.data||[]),console.log("Loaded LinkedIn posts:",((v=E.data.data)==null?void 0:v.length)||0)):(console.warn("Failed to load saved LinkedIn posts:",E.data.message),z([]))}catch(b){console.error("Error loading saved LinkedIn posts:",b),console.error("LinkedIn posts error response:",(C=b.response)==null?void 0:C.data),((ie=b.response)==null?void 0:ie.status)===401&&R({description:"Please log in to view saved posts",variant:"destructive"}),z([])}de(!1)},ye=(n,c)=>{window.open(n,"_blank")};if(!w)return null;const P=()=>{const n=new Map;return ge.forEach(c=>{var h;const d=((h=c.author)==null?void 0:h.username)||"Unknown User";n.has(d)||n.set(d,[]),n.get(d).push(c)}),_e.forEach(c=>{var h,m,v;const d=((m=(h=c.tweets[0])==null?void 0:h.author)==null?void 0:m.username)||((v=c.author)==null?void 0:v.username)||"Unknown User";n.has(d)||n.set(d,[]),n.get(d).push(c)}),n},Q=()=>{const n=new Map;return ce.forEach(c=>{const h=(c.postData||c).author||"Unknown Author";n.has(h)||n.set(h,[]),n.get(h).push(c)}),n},ke=(n,c)=>{ne(d=>{const h={...d},m=new Set(h[n]);return m.has(c)?(m.delete(c),qe(n,c)):(m.add(c),gs(n,c)),h[n]=m,h})},gs=(n,c)=>{if(n==="twitter"){const d=P().get(c)||[];Z(h=>{const m=new Set(h.twitter);return d.forEach(v=>{const C=("tweets"in v,v.id);m.add(C)}),{...h,twitter:m}})}else if(n==="linkedin"){const d=Q().get(c)||[];Z(h=>{const m=new Set(h.linkedin);return d.forEach(v=>{const C=v.postData||v;m.add(C.id)}),{...h,linkedin:m}})}},qe=(n,c)=>{if(n==="twitter"){const d=P().get(c)||[];Z(h=>{const m=new Set(h.twitter);return d.forEach(v=>{const C=("tweets"in v,v.id);m.delete(C)}),{...h,twitter:m}})}else if(n==="linkedin"){const d=Q().get(c)||[];Z(h=>{const m=new Set(h.linkedin);return d.forEach(v=>{const C=v.postData||v;m.delete(C.id)}),{...h,linkedin:m}})}},fe=(n,c)=>{Z(d=>{const h={...d},m=new Set(h[n]);return m.has(c)?m.delete(c):m.add(c),h[n]=m,h})},D=()=>{const n=P(),c=Q(),d={twitter:[],linkedin:[]};return o.twitter.forEach(h=>{const m=n.get(h)||[];d.twitter.push(...m)}),o.linkedin.forEach(h=>{const m=c.get(h)||[];d.linkedin.push(...m)}),d},je=(n,c)=>n==="twitter"?(P().get(c)||[]).some(h=>{const m=("tweets"in h,h.id);return T.twitter.has(m)}):(Q().get(c)||[]).some(h=>{const m=h.postData||h;return T.linkedin.has(m.id)}),me=(n,c)=>n==="twitter"?(P().get(c)||[]).filter(h=>{const m=("tweets"in h,h.id);return T.twitter.has(m)}).length:(Q().get(c)||[]).filter(h=>{const m=h.postData||h;return T.linkedin.has(m.id)}).length,es=()=>{ae("folders")},Se=()=>{const n=[];D().twitter.forEach(m=>{const v=("tweets"in m,m.id);if(T.twitter.has(v))if("tweets"in m){const C=m.tweets.map(ie=>ie.text||ie.full_text).join(`

`);n.push(C)}else n.push(m.text||m.full_text||"")}),D().linkedin.forEach(m=>{const v=m.postData||m,C=v.id;T.linkedin.has(C)&&n.push(v.content||"")});const h=n.join(`

---

`);u(h),p(),R({title:"Writing Style Applied",description:`${n.length} posts selected as writing style reference for AI content generation.`})};return e.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-75 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-6xl h-full max-h-[90vh] flex flex-col",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(re,{className:"h-6 w-6 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:U==="folders"?"Saved Posts - By User":"Posts from Selected Users"}),e.jsx("p",{className:"text-sm text-gray-500",children:U==="folders"?`${ge.length+_e.reduce((n,c)=>n+c.tweets.length,0)+ce.length} total saved posts`:`${o.twitter.size+o.linkedin.size} users selected`})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[U==="posts"&&e.jsxs(g,{variant:"outline",size:"sm",onClick:es,className:"flex items-center gap-2",children:[e.jsx(Ls,{className:"h-4 w-4"}),"Back to Users"]}),e.jsx(g,{variant:"outline",size:"sm",onClick:p,className:"p-2",children:e.jsx(Et,{className:"h-4 w-4"})})]})]})}),e.jsx("div",{className:"flex-1 overflow-auto p-6",children:M?e.jsxs("div",{className:"text-center py-16 text-gray-500",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-primary mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Loading saved posts..."}),e.jsx("p",{children:"Please wait while we fetch your saved content."})]}):ge.length===0&&ce.length===0&&_e.length===0?e.jsxs("div",{className:"text-center py-16 text-gray-500",children:[e.jsx(re,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No saved posts yet"}),e.jsx("p",{children:"Start by scraping and saving some content!"})]}):U==="folders"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-amber-50 text-amber-800 p-4 rounded-lg text-sm",children:[e.jsx("h4",{className:"font-medium mb-2",children:"How to Select Posts:"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"â€¢ Click the circle"})," to select ALL posts from a user (entire folder)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"â€¢ Click the folder name"})," to browse and select individual posts"]}),e.jsx("p",{children:"Selected posts will be used as writing style reference for AI content generation."})]})]}),e.jsxs(xs,{value:H,onValueChange:n=>X(n),className:"w-full",children:[e.jsxs(ps,{className:"grid w-full grid-cols-2 mb-6",children:[e.jsxs(ve,{value:"twitter",className:"flex items-center gap-2",children:[e.jsx(Fs,{className:"h-4 w-4"}),"Twitter Users (",P().size,")"]}),e.jsxs(ve,{value:"linkedin",className:"flex items-center gap-2",children:[e.jsx(zs,{className:"h-4 w-4"}),"LinkedIn Users (",Q().size,")"]})]}),e.jsx(we,{value:"twitter",children:P().size===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"No saved Twitter posts"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from(P().entries()).map(([n,c])=>e.jsx(te,{className:`transition-all hover:shadow-md ${o.twitter.has(n)?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"}`,children:e.jsx(G,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0 cursor-pointer",onClick:d=>{d.stopPropagation(),ke("twitter",n)},children:o.twitter.has(n)?e.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"h-3 w-3 text-white",children:"âœ“"})}):e.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 rounded-full hover:border-blue-400"})}),e.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>{ae("posts"),X("twitter"),ne(d=>({twitter:new Set([n]),linkedin:new Set}))},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-4 w-4 text-gray-500"}),e.jsxs("p",{className:"font-medium text-sm truncate",children:["@",n]}),je("twitter",n)&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[c.length," post",c.length!==1?"s":"",je("twitter",n)&&e.jsxs("span",{className:"text-blue-600 font-medium ml-2",children:["â€¢ ",me("twitter",n)," selected"]})]})]})]})})},n))})}),e.jsx(we,{value:"linkedin",children:Q().size===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"No saved LinkedIn posts"})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from(Q().entries()).map(([n,c])=>e.jsx(te,{className:`transition-all hover:shadow-md ${o.linkedin.has(n)?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"}`,children:e.jsx(G,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex-shrink-0 cursor-pointer",onClick:d=>{d.stopPropagation(),ke("linkedin",n)},children:o.linkedin.has(n)?e.jsx("div",{className:"w-5 h-5 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"h-3 w-3 text-white",children:"âœ“"})}):e.jsx("div",{className:"w-5 h-5 border-2 border-gray-300 rounded-full hover:border-blue-400"})}),e.jsxs("div",{className:"flex-1 min-w-0 cursor-pointer",onClick:()=>{ae("posts"),X("linkedin"),ne(d=>({twitter:new Set,linkedin:new Set([n])}))},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"h-4 w-4 text-gray-500"}),e.jsx("p",{className:"font-medium text-sm truncate",children:n}),je("linkedin",n)&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[c.length," post",c.length!==1?"s":"",je("linkedin",n)&&e.jsxs("span",{className:"text-blue-600 font-medium ml-2",children:["â€¢ ",me("linkedin",n)," selected"]})]})]})]})})},n))})})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mb-4",children:e.jsxs(g,{variant:"outline",onClick:()=>ae("folders"),className:"flex items-center gap-2",children:[e.jsx(Ls,{className:"h-4 w-4"}),"Back to Folders"]})}),e.jsxs(xs,{value:H,onValueChange:n=>X(n),className:"w-full",children:[e.jsxs(ps,{className:"grid w-full grid-cols-2 mb-6",children:[e.jsxs(ve,{value:"twitter",className:"flex items-center gap-2",children:[e.jsx(Fs,{className:"h-4 w-4"}),"Twitter Posts (",D().twitter.length,")"]}),e.jsxs(ve,{value:"linkedin",className:"flex items-center gap-2",children:[e.jsx(zs,{className:"h-4 w-4"}),"LinkedIn Posts (",D().linkedin.length,")"]})]}),e.jsx(we,{value:"twitter",children:D().twitter.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"No posts from selected Twitter users"})}):e.jsx("div",{className:"columns-1 md:columns-2 gap-6",children:(()=>{const n=D().twitter;return n.sort((c,d)=>{var v,C;const h=new Date("tweets"in c?((v=c.tweets[0])==null?void 0:v.created_at)||c.created_at:c.created_at||"");return new Date("tweets"in d?((C=d.tweets[0])==null?void 0:C.created_at)||d.created_at:d.created_at||"").getTime()-h.getTime()}),n.map((c,d)=>{const h=("tweets"in c,c.id),m=T.twitter.has(h);return e.jsx("div",{className:`break-inside-avoid mb-6 w-full relative cursor-pointer transition-all ${m?"ring-2 ring-blue-500 bg-blue-50":"hover:bg-gray-50"}`,onClick:()=>fe("twitter",h),children:"tweets"in c?e.jsxs("div",{className:"relative",children:[e.jsx(Jt,{thread:c}),m&&e.jsx("div",{className:"absolute top-2 left-2 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"h-4 w-4 text-white",children:"âœ“"})})]}):e.jsxs("div",{className:"relative",children:[e.jsx(Kt,{tweet:c}),m&&e.jsx("div",{className:"absolute top-2 left-2 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:e.jsx("div",{className:"h-4 w-4 text-white",children:"âœ“"})})]})},"tweets"in c?`filtered-thread-${c.id}`:`filtered-tweet-${c.id}`)})})()})}),e.jsx(we,{value:"linkedin",children:D().linkedin.length===0?e.jsx("div",{className:"text-center py-8 text-gray-500",children:e.jsx("p",{children:"No posts from selected LinkedIn users"})}):e.jsx("div",{className:"masonry-container columns-1 md:columns-2 xl:columns-3 gap-6",children:D().linkedin.map((n,c)=>{const d=n.postData||n,h=d.id,m=T.linkedin.has(h);return e.jsxs(te,{className:`linkedin-post-card bg-white border border-gray-200 hover:shadow-lg transition-all duration-200 break-inside-avoid mb-6 relative cursor-pointer ${m?"ring-2 ring-blue-500 bg-blue-50":""}`,onClick:()=>fe("linkedin",h),children:[m&&e.jsx("div",{className:"absolute top-2 left-2 w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center z-10",children:e.jsx("div",{className:"h-4 w-4 text-white",children:"âœ“"})}),e.jsx(oe,{className:"p-4 pb-3",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("img",{src:d.authorAvatar||"https://via.placeholder.com/40",alt:d.author,className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-semibold text-sm text-gray-900",children:d.author}),e.jsx("p",{className:"text-xs text-gray-600 line-clamp-2",children:d.authorHeadline}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Saved â€¢ ",new Date(d.savedAt||n.createdAt).toLocaleDateString()]})]})]})}),e.jsx(G,{className:"p-4 pt-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"linkedin-post-content",children:e.jsx(sa,{content:d.content||""})}),d.media&&d.media.length>0&&e.jsx("div",{className:"relative",children:d.media.length===1?e.jsx("div",{className:"rounded-lg overflow-hidden bg-gray-100",children:e.jsx("img",{src:d.media[0].url,alt:"Post media",className:"w-full object-cover cursor-pointer hover:opacity-95 transition-opacity",style:{height:"auto",maxHeight:"400px"},onClick:()=>window.open(d.media[0].url,"_blank")})}):e.jsx(ta,{post:d})}),d.documents&&d.documents.length>0&&e.jsx("div",{className:"space-y-3",children:d.documents.map((v,C)=>e.jsx(aa,{document:v,postId:d.id,onOpenPdf:ye},C))})]})})]},`filtered-${d.id}-${c}`)})})})]})]})}),!M&&e.jsx("div",{className:"border-t p-4 bg-gray-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-sm text-gray-600",children:T.twitter.size+T.linkedin.size>0?e.jsxs("span",{children:[T.twitter.size+T.linkedin.size," posts selected for writing style reference"]}):e.jsx("span",{children:"Select posts to use as writing style reference for AI generation"})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(g,{variant:"outline",onClick:p,children:"Cancel"}),T.twitter.size+T.linkedin.size>0&&e.jsxs(g,{onClick:Se,className:"bg-blue-600 hover:bg-blue-700 text-white",children:["Apply ",T.twitter.size+T.linkedin.size," Posts"]})]})]})})]})})},na=Yt({title:Bs().min(1,"Title is required"),youtubeUrl:Bs().optional()}),ga=()=>{var $s,Us,As;const w=Tt();Pt();const{toast:p}=Gs(),{user:u}=$t(),[$,R]=x.useState(null),[U,ae]=x.useState(""),[o,ne]=x.useState(null),[T,Z]=x.useState(!1),[H,X]=x.useState([]),[ge,Me]=x.useState(!1),[_e,Ne]=x.useState(!1),[ce,z]=x.useState(0),[M,de]=x.useState(1),be=4,[ye,P]=x.useState([]),[Q,ke]=x.useState(!1),[gs,qe]=x.useState(new Set),[fe,D]=x.useState(!1),[je,me]=x.useState(null),[es,Se]=x.useState(null),[n,c]=x.useState(!1),[d,h]=x.useState(null),[m,v]=x.useState(""),[C,ie]=x.useState(!1),[b,E]=x.useState(""),[fs,Ve]=x.useState(""),[L,he]=x.useState(""),[A,Re]=x.useState([]),[Hs,ss]=x.useState(!1),[le,ts]=x.useState("all"),[ee,js]=x.useState(""),[Ce,Js]=x.useState(!1),[Ie,vs]=x.useState(""),[Ks,De]=x.useState(!1),[J,as]=x.useState(1),[O,Oe]=x.useState([]),[rs,Zs]=x.useState("professional"),[We,Xs]=x.useState(""),[ws,Ns]=x.useState(!1),ns=x.useRef(null),[is,bs]=x.useState(""),[Qs,ys]=x.useState(!1),[Be,ks]=x.useState(0),[N,Te]=x.useState({limit:0,count:0,remaining:0,planId:"expired",planName:"No Plan"}),[ia,ls]=x.useState(!1),[et,Ye]=x.useState(!1),[la,st]=x.useState(null),tt=async()=>{try{const s=Fe.getToken();if(!s){console.error("No token found");return}const a=await(await fetch("https://api.brandout.ai/api/stripe/subscription",{headers:{Authorization:`Bearer ${s}`}})).json();st(a)}catch(s){console.error("Error fetching subscription:",s)}};x.useEffect(()=>{tt()},[]);const at=s=>{bs(s);const t=s?s.split(`

---

`).length:0;ks(t),p({title:"Writing Style Applied",description:`${t} posts selected as writing style reference for AI content generation.`})};x.useEffect(()=>{os();const s=setInterval(os,5e3),t=a=>{a.key==="userLimit"&&os()};return window.addEventListener("storage",t),()=>{clearInterval(s),window.removeEventListener("storage",t)}},[u==null?void 0:u.id]),x.useEffect(()=>{localStorage.setItem("userLimit",JSON.stringify(N))},[N]);const Ge=async()=>{ke(!0);try{let s=[];try{const t="https://api.brandout.ai/api",a=t.endsWith("/api")?`${t}/youtube/saved/${(u==null?void 0:u.id)||"anonymous"}`:`${t}/api/youtube/saved/${(u==null?void 0:u.id)||"anonymous"}`,i=await V.get(a);i.data.success&&i.data.savedVideos?(s=i.data.savedVideos.map(r=>({id:r.videoId,videoId:r.videoId,title:r.title,thumbnail:r.thumbnailUrl,thumbnailUrl:r.thumbnailUrl,channelName:r.channelTitle,url:`https://www.youtube.com/watch?v=${r.videoId}`,videoUrl:`https://www.youtube.com/watch?v=${r.videoId}`,transcript:r.transcript||"",formattedTranscript:r.formattedTranscript||[],language:r.language||"Unknown",is_generated:r.is_generated,status:"ready",savedAt:new Date(r.savedAt||r.createdAt).toISOString(),savedTimestamp:new Date(r.savedAt||r.createdAt).toISOString(),source:"youtube"})),P(s),localStorage.setItem("savedYoutubeVideos",JSON.stringify(s))):(P([]),localStorage.removeItem("savedYoutubeVideos"))}catch(t){console.error("Error loading videos from backend:",t);try{const a=localStorage.getItem("savedYoutubeVideos");if(a){const i=JSON.parse(a);Array.isArray(i)&&i.length>0?P(i):P([])}else P([])}catch(a){console.error("Error loading from localStorage:",a),P([])}}}catch(s){console.error("Error in loadSavedVideos:",s),P([])}finally{ke(!1)}};x.useEffect(()=>{Ge();const s=t=>{t.key==="savedYoutubeVideos"&&Ge()};return window.addEventListener("storage",s),()=>{window.removeEventListener("storage",s)}},[u==null?void 0:u.id]);const os=async()=>{var a;if(!(u!=null&&u.id))return;const s=localStorage.getItem("auth-method"),t=s?Fe.getToken(s):null;if(t)try{const r=await V.get("https://api.brandout.ai/api/user-limits/me",{headers:{Authorization:`Bearer ${t}`}});if(r.data.success){const l=r.data.data;Te({limit:l.limit||0,count:l.count||0,remaining:Math.max(0,(l.limit||0)-(l.count||0)),planId:l.planId||"expired",planName:l.planName||"No Plan",status:l.status||"inactive",expiresAt:l.expiresAt?new Date(l.expiresAt):void 0}),ls(l.planId==="expired"||l.status==="inactive")}else console.error("Failed to fetch user limit:",r.data.message),Te({limit:0,count:0,remaining:0,planId:"expired",planName:"No Plan",status:"inactive"}),ls(!0)}catch(i){console.error("Error fetching user limit:",((a=i.response)==null?void 0:a.data)||i),Te({limit:0,count:0,remaining:0,planId:"expired",planName:"No Plan",status:"inactive"}),ls(!0)}},W=Ut({resolver:Bt(na),defaultValues:{title:"",youtubeUrl:""}}),rt=s=>{var a;const t=((a=s.target.files)==null?void 0:a[0])||null;R(t),t&&p({title:"File uploaded",description:"Your file has been uploaded successfully."})},nt=()=>{if(b&&L==="carousel"){const s=b.split(`

`).filter(t=>t.trim());if(s.length>0){z(t=>t===s.length-1?0:t+1);return}}H.length>0&&z(s=>s===H.length-1?0:s+1)},it=()=>{if(b&&L==="carousel"){const s=b.split(`

`).filter(t=>t.trim());if(s.length>0){z(t=>t===0?s.length-1:t-1);return}}H.length>0&&z(s=>s===0?H.length-1:s-1)},lt=s=>{if(ne(s),s.videoUrl?W.setValue("youtubeUrl",s.videoUrl):s.id&&W.setValue("youtubeUrl",`https://youtube.com/watch?v=${s.id}`),localStorage.getItem("ai_generated_content_videoId")===s.id){const a=localStorage.getItem("ai_generated_content");a&&E(a)}else E(null);if(s.formattedTranscript&&Array.isArray(s.formattedTranscript)&&s.formattedTranscript.length>0&&s.formattedTranscript.some(a=>a&&a.trim().length>10))X(s.formattedTranscript),Z(!0),z(0);else if(s.transcript&&typeof s.transcript=="string"&&s.transcript.trim().length>10){const a=ot(s.transcript);X(a),Z(!0),z(0)}else X([]),Z(!0),z(0);p({title:"Video selected",description:"Content from this video will be used for your carousel."})},ot=s=>!s||s.length<10?["No transcript content available"]:[s],cs=async s=>{var a,i;if(!s.id&&!s.videoId){p({title:"Error",description:"Video ID not found",variant:"destructive"});return}const t=s.id||s.videoId;me(t),D(!0),Se(null);try{p({title:"Fetching transcript",description:"Please wait while we fetch the transcript..."});let r=null,l=null,j=null;const y="https://api.brandout.ai/api",S=y.endsWith("/api")?`${y}/youtube/transcript-yt-dlp`:`${y}/api/youtube/transcript-yt-dlp`;try{console.log(`Trying yt-dlp method first for video ID: ${t}`);const f=await V.post(S,{videoId:t,useScraperApi:!1},{timeout:24e4,headers:{"Content-Type":"application/json"}});f.data&&f.data.success?(console.log("yt-dlp method succeeded"),r=f.data):(console.warn("yt-dlp method returned non-success response:",f.data),j=new Error(((a=f.data)==null?void 0:a.message)||"Unknown error with yt-dlp method"))}catch(f){console.warn("yt-dlp method failed:",f),j=f}if(!r){console.log("Trying primary transcript method");const f=y.endsWith("/api")?`${y}/youtube/transcript`:`${y}/api/youtube/transcript`;try{const k=await V.post(f,{videoId:t,useScraperApi:!1},{timeout:24e4,headers:{"Content-Type":"application/json"}});k.data&&k.data.success?(console.log("Primary method succeeded"),r=k.data):(console.warn("Primary method returned non-success response:",k.data),l=new Error(((i=k.data)==null?void 0:i.message)||"Unknown error with primary method"))}catch(k){console.warn("Primary method failed:",k),l=k}}if(r&&(r.transcript||r.formattedTranscript))await ct(s,r),D(!1),me(null),p({title:"Transcript fetched",description:"Transcript has been successfully retrieved."});else{const f=`Both transcript methods failed. ${l?`Primary error: ${l.message}`:""}${j?`${l?". ":""}yt-dlp error: ${j.message}`:""}`;throw console.error("Error fetching transcript:",f),D(!1),me(null),Se(f),p({title:"Transcript Error",description:"Failed to fetch transcript. The server might be experiencing issues or this video may not have captions.",variant:"destructive"}),new Error(f)}}catch(r){console.error("Error in handleFetchTranscript:",r),D(!1),me(null),Se(r.message||"Unknown error fetching transcript"),p({title:"Error",description:"Failed to fetch transcript: "+(r.message||"Unknown error"),variant:"destructive"})}},ct=async(s,t)=>{try{const a=t.transcript||"",i={...s,transcript:a,formattedTranscript:[a],language:t.language||"en",is_generated:t.is_generated||!1};ne(i),X([a]),z(0),qe(l=>{const j=new Set(l);return j.add(s.id),s.videoId&&j.add(s.videoId),j}),await dt(i)&&p({title:"Transcript fetched",description:"Successfully retrieved and saved transcript"})}catch(a){console.error("Error in handleTranscriptSuccess:",a),p({title:"Processing Error",description:"Successfully fetched transcript but encountered an error processing it",variant:"destructive"})}},dt=async s=>{try{const t=localStorage.getItem("savedYoutubeVideos"),a=t?JSON.parse(t):[],i=a.findIndex(f=>f.id===s.id||f.videoId===s.id||f.id===s.videoId||f.videoId===s.videoId);let r=s.transcript||"",l=s.formattedTranscript||[r];const j=1e5;r&&r.length>j&&(console.log(`Transcript too large (${r.length} chars), trimming to ${j}`),r=r.substring(0,j)+"... [Trimmed due to size limits]",Array.isArray(l)&&l.length>0?l=l.map(f=>typeof f=="string"&&f.length>j/l.length?f.substring(0,j/l.length)+"...":f):l=[r]);const y=i!==-1?{...a[i],transcript:r,formattedTranscript:l||[r||""],language:s.language||"en",is_generated:s.is_generated!==void 0?s.is_generated:!1,updatedAt:new Date().toISOString()}:{...s,transcript:r,formattedTranscript:l||[r||""],language:s.language||"en",is_generated:s.is_generated!==void 0?s.is_generated:!1,savedAt:new Date().toISOString(),updatedAt:new Date().toISOString()};i!==-1?a[i]=y:a.push(y),localStorage.setItem("savedYoutubeVideos",JSON.stringify(a)),P(f=>{const k=[...f],B=k.findIndex(F=>F.id===s.id||F.videoId===s.id||F.id===s.videoId||F.videoId===s.videoId);return B!==-1?k[B]=y:k.push(y),k}),qe(f=>{const k=new Set(f);return k.add(s.id||s.videoId||""),k});const S=async(f=0,k=2)=>{var B,F,_;try{const I="https://api.brandout.ai/api",Y=I.endsWith("/api")?`${I}/youtube/save-video-transcript`:`${I}/api/youtube/save-video-transcript`,q={video:{...y,transcript:r,formattedTranscript:l},userId:(u==null?void 0:u.id)||"anonymous"},Pe=await V.post(Y,q,{timeout:15e3,headers:{"Content-Type":"application/json"}});if((B=Pe.data)!=null&&B.success){console.log("Saved transcript to backend successfully"),p({title:"Transcript Saved",description:"Successfully saved transcript to server and locally.",variant:"default"});try{const Ee=I.endsWith("/api")?`${I}/youtube-carousels`:`${I}/api/youtube-carousels`;V.post(Ee,{videos:[y],userId:(u==null?void 0:u.id)||"anonymous"},{timeout:1e4}).then(()=>console.log("Created carousel for video successfully")).catch(Je=>console.warn("Could not create carousel, but video was saved:",Je))}catch(Ee){console.warn("Error creating carousel (handled):",Ee)}}else throw console.warn("Backend save returned non-success response:",Pe.data),new Error(((F=Pe.data)==null?void 0:F.message)||"Server returned error response")}catch(I){if(f<k)return console.log(`Retrying backend save (attempt ${f+1}/${k})...`),await new Promise(q=>setTimeout(q,1e3*Math.pow(2,f))),S(f+1,k);let Y="Unknown error";I.code==="ERR_NETWORK"?Y="Network connection error. API server may be down.":I.response?(Y=`Status ${I.response.status}: ${I.response.statusText}`,(_=I.response.data)!=null&&_.message&&(Y+=` - ${I.response.data.message}`)):I.message&&(Y=I.message),console.error(`Error saving to backend: ${Y}`),p({title:"Backend Save Error",description:"Could not save to server, but transcript was saved locally.",variant:"default"})}};return S(),!0}catch(t){return console.error("Fatal error saving video with transcript:",t),p({title:"Save Error",description:"Failed to save transcript data: "+(t.message||"Unknown error"),variant:"destructive"}),!1}},ds=[{type:"text-post",title:"Text Post",icon:e.jsx(Xe,{className:"h-4 w-4"})},{type:"carousel",title:"Carousel",icon:e.jsx(Qe,{className:"h-4 w-4"})}];x.useEffect(()=>{(async()=>{try{const t="https://api.brandout.ai/api",a=t.endsWith("/api")?`${t}/carousel-contents`:`${t}/api/carousel-contents`,i=await V.get(a,{params:{userId:(u==null?void 0:u.id)||"anonymous"}});if(i.data.success&&Array.isArray(i.data.data)){Re(i.data.data),localStorage.setItem("savedLinkedInContents",JSON.stringify(i.data.data));const r=localStorage.getItem("ai_generated_content_videoId");if(r){const l=i.data.data.find(j=>j.videoId===r);l&&(v(l.content),E(l.content),Ve(l.title),he(l.type))}}}catch(t){console.error("Error loading content from backend:",t);const a=localStorage.getItem("ai_generated_content"),i=localStorage.getItem("ai_generated_content_videoId");a&&i&&(v(a),(o==null?void 0:o.id)===i&&E(a));const r=localStorage.getItem("savedLinkedInContents");if(r)try{const l=JSON.parse(r);Re(l)}catch(l){console.error("Error parsing local contents:",l),Re([])}}})()},[u==null?void 0:u.id,o]);const mt=async s=>{if(!N){p({variant:"destructive",title:"Error",description:"Unable to verify your usage limits. Please try again later."});return}if(N.count>=N.limit){p({variant:"destructive",title:"Limit Reached",description:"You have reached your content generation limit. Please contact support to increase your limit."});return}if(!o){p({title:"Video required",description:"Please select a video before generating content",variant:"destructive"});return}if(!o.transcript){p({title:"Transcript required",description:"Please ensure the video has a transcript before generating content",variant:"destructive"});return}c(!0);try{const t="https://api.brandout.ai/api",a=t.endsWith("/api")?`${t}/generate-content`:`${t}/api/generate-content`,i=await V.post(a,{type:s,transcript:o.transcript,videoId:o.id,videoTitle:o.title,userId:(u==null?void 0:u.id)||"anonymous",writingStyleSamples:is||void 0});if(!i.data.success||!i.data.content)throw new Error("Failed to generate content");const r=i.data.content;v(r),ie(!0),h(s),E(r),he(s),p({title:"Content generated & auto-saved",description:`${s.charAt(0).toUpperCase()+s.slice(1)} content has been generated and automatically saved`});const l=Fe.getToken();await V.post(`https://api.brandout.ai/api/user-limits/${u==null?void 0:u.id}/increment`,{},{headers:{Authorization:`Bearer ${l}`}}),Te(j=>j?{...j,count:j.count+1}:null)}catch(t){console.error("Error generating content:",t),p({title:"Error",description:"Failed to generate content. Please try again.",variant:"destructive"})}finally{c(!1)}},Ss=()=>{ie(!1),v(""),h(null),localStorage.removeItem("lastGeneratedContent")},Cs=U?ye.filter(s=>s.title.toLowerCase().includes(U.toLowerCase())||s.channelName&&s.channelName.toLowerCase().includes(U.toLowerCase())):ye,Is=M*be,ht=Is-be,Ts=Cs.slice(ht,Is),se=Math.ceil(Cs.length/be),ms=s=>{de(s)},ut=()=>{M<se&&de(M+1)},xt=()=>{M>1&&de(M-1)},Ps=s=>{if(!o){p({title:"Video required",description:"Please select a video for your carousel",variant:"destructive"});return}if(!b){p({title:"Content required",description:"Please generate and select carousel content for your video",variant:"destructive"});return}if(L!=="carousel"){p({title:"Invalid content type",description:"Only carousel content can be used for carousel requests",variant:"destructive"});return}if(localStorage.getItem("ai_generated_content_videoId")!==o.id){p({title:"Content mismatch",description:"The selected content does not match the selected video. Please generate content for this video.",variant:"destructive"});return}De(!0)},pt=async()=>{if(!W.getValues("title")){p({title:"Title required",description:"Please enter a title for your carousel request",variant:"destructive"});return}if(!N){p({variant:"destructive",title:"Error",description:"Unable to verify your usage limits. Please try again later."});return}if(!N.planId||N.planId==="expired"){Ye(!0);return}if(N.count>=N.limit){p({variant:"destructive",title:"Credit Limit Reached",description:`You have used all ${N.limit} credits from your ${N.planName} plan. Please upgrade your plan or buy additional credits.`}),Ye(!0);return}Ns(!0);try{const s=Fe.getToken()||localStorage.getItem("linkedin-login-token")||localStorage.getItem("google-login-token");if(!s)throw new Error("Authentication token not found. Please login again.");console.log("Files to upload:",O),O.length===0&&console.log("No files to upload. Proceeding with empty files array.");let t=[];if(O.length>0){const S=O.map(f=>new Promise((k,B)=>{if(f.size>10485760)gt(f,k,B);else{const _=new FormData;_.append("file",f);const I="https://api.brandout.ai/api",Y=I.endsWith("/api")?`${I}/upload/upload`:`${I}/api/upload/upload`;fetch(Y,{method:"POST",body:_,credentials:"include"}).then(q=>{if(!q.ok)throw new Error(`Upload failed: ${q.status} ${q.statusText}`);return q.json()}).then(q=>{q.secure_url?k(q.secure_url):B(new Error("Failed to upload file to Cloudinary - missing secure_url"))}).catch(q=>{B(q)})}}));try{t=await Promise.all(S),console.log("All files uploaded successfully:",t)}catch(f){throw console.error("Error uploading files:",f),new Error(`File upload failed: ${f.message||"Please try again with smaller files"}`)}}const a={title:W.getValues("title"),description:We||"",youtubeUrl:(o==null?void 0:o.url)||W.getValues("youtubeUrl")||"",carouselType:"professional",content:m||b||"",transcript:(o==null?void 0:o.transcript)||"",fileUrls:t.length>0?t:[],files:t.length>0?t.map(S=>({url:S})):[],videoId:(o==null?void 0:o.id)||void 0,videoTitle:(o==null?void 0:o.title)||void 0,userName:(u==null?void 0:u.firstName)||(u==null?void 0:u.name)||"Unknown User",userEmail:(u==null?void 0:u.email)||""},i="https://api.brandout.ai/api",r=i.endsWith("/api")?`${i}/carousels/submit-request`:`${i}/api/carousels/submit-request`;console.log("Submitting carousel request to:",r),console.log("Request data:",JSON.stringify(a,null,2)),console.log("Form values:",W.getValues());const l=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(a)});let j;const y=await l.text();try{j=JSON.parse(y),console.log("API response data:",j)}catch{console.log("API response (not JSON):",y),j={message:y}}if(!l.ok)if(console.error("API error response:",j),l.status===500&&(j==null?void 0:j.error)==="this.isModified is not a function")console.log("Server returned 500 error but we know the request actually worked. Treating as success.");else throw new Error(j.message||j.error||"Failed to submit carousel request");try{await V.post(`https://api.brandout.ai/api/user-limits/${u==null?void 0:u.id}/increment`,{},{headers:{Authorization:`Bearer ${s}`}}),Te(S=>S?{...S,count:S.count+1,remaining:S.remaining-1}:null),console.log("Incremented user limit count for carousel request")}catch(S){console.error("Error incrementing user limit:",S)}as(3),Ne(!0),Oe([]),p({title:"Carousel request submitted",description:"We'll notify you when your carousel is ready."})}catch(s){console.error("Error submitting carousel request:",s),p({title:"Error",description:s instanceof Error?s.message:"Failed to submit carousel request. Please try again.",variant:"destructive"})}finally{Ns(!1)}},gt=(s,t,a)=>{const r=`large_${Date.now()}_${s.name.replace(/\s+/g,"_")}`;let l=0,j=Math.ceil(s.size/10485760),y=0;p({title:"Large file detected",description:`Uploading ${s.name} in chunks (${Math.round(s.size/1048576)}MB)`});const S=async()=>{const f=y*10485760,k=Math.min(f+10485760,s.size),B=s.slice(f,k),F=new FormData;F.append("file",B),F.append("fileId",r),F.append("chunkIndex",y.toString()),F.append("totalChunks",j.toString()),F.append("originalName",s.name);try{const _="https://api.brandout.ai/api",I=_.endsWith("/api")?`${_}/upload/chunk`:`${_}/api/upload/chunk`,Y=await fetch(I,{method:"POST",body:F,credentials:"include"});if(!Y.ok)throw new Error(`Failed to upload chunk ${y+1}/${j}`);const q=await Y.json();l+=B.size;const Pe=Math.round(l/s.size*100);if(console.log(`Upload progress for ${s.name}: ${Pe}%`),y<j-1)y++,await S();else{const Ee=_.endsWith("/api")?`${_}/upload/finalize`:`${_}/api/upload/finalize`,Je=await fetch(Ee,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileId:r}),credentials:"include"});if(!Je.ok)throw new Error("Failed to finalize chunked upload");const It=await Je.json();console.log(`File ${s.name} uploaded successfully`),t(It.secure_url)}}catch(_){console.error("Error uploading chunk:",_),a(new Error(`Failed to upload ${s.name}`))}};S().catch(f=>{console.error("Chunked upload failed:",f),a(f)})},Es=[{value:"professional",label:"Professional",description:"Clean design with corporate branding"},{value:"creative",label:"Creative",description:"Eye-catching design with bold elements"},{value:"minimal",label:"Minimal",description:"Simple, elegant design with focus on content"},{value:"data-driven",label:"Data-Driven",description:"Charts, graphs and statistics"},{value:"storytelling",label:"Storytelling",description:"Narrative-focused with image backgrounds"}],ue=s=>{if(!s)return[];let t=s.split(/---+|\n\n/).filter(i=>i.trim());t.length<=1&&(t=s.split(`
`).filter(i=>i.trim()));const a=[];for(let i=0;i<t.length;i++){let r=t[i].trim();/^Slide\s*\d+\s*$/.test(r)||(r=r.replace(/^\*\*Slide\s*\d+[^*]*\*\*\s*/i,"").trim(),r=r.replace(/^Slide\s*\d+[\s:.]+/i,"").trim(),r=r.replace(/^---+$/gm,"").trim(),r=r.replace(/\n\s*\n/g,`
`).trim(),r&&r.length>0&&a.push(r))}return a},ft=s=>ue(s).length||7,jt=(s,t)=>{const a=ue(s);if(a.length===0)return"Carousel slide content";const i=Math.min(t,a.length-1);return a[i]||"Carousel slide content"},vt=()=>{if(!b||L!=="carousel"){p({title:"Cannot edit",description:"Only carousel content can be edited in the editor",variant:"destructive"});return}try{console.log("Processing content for editor:",b);let s=b;s.includes(`

`)||(s.includes(`
`)?(console.log("Content has single newlines, converting to double newlines"),s=s.replace(/\n/g,`

`)):(console.log("Content has no newlines, treating as single slide"),s=s.trim()));const t=ue(s);console.log("Cleaned slides count:",t.length);const a=t;console.log("Processed slides for editor:",a.length,a),a.length===0&&(console.warn("No valid slides found, creating a fallback slide"),a.push(s.trim()||"Your carousel content"));const i=1080,r=1350,l=a.map(j=>{const y=Ys(),S=Ys();return{id:y,backgroundColor:"#ffffff",nodes:[{id:S,type:"text",text:j,position:{x:Math.floor(i/2-400),y:Math.floor(r/2-200)},fontSize:28,fontFamily:"inter",fill:"#000000",width:800,height:400,align:"center",draggable:!0,zIndex:1}]}});console.log("Created Konva slides for editor:",l.length),localStorage.setItem("canvas_size_preference","portrait"),localStorage.setItem("editor_slides",JSON.stringify(l)),console.log("Saved Konva slides to localStorage"),localStorage.setItem("slides_debug",JSON.stringify({format:"konva",originalContent:b,processedContent:s,processedSlides:a,konvaSlides:l})),window.editorSlides=l,window.slideCount=l.length,w("/editor"),p({title:"Opening in editor",description:`Preparing ${l.length} slides for editing (4:5 ratio)`})}catch(s){console.error("Error preparing slides for editor:",s),p({title:"Error",description:"Could not prepare slides for editing. Please try again.",variant:"destructive"})}},wt=async(s,t)=>{if(t.stopPropagation(),t.preventDefault(),!s.id&&!s.videoId){p({title:"Error",description:"Cannot identify video to delete",variant:"destructive"});return}const a=s.id||s.videoId;try{try{const i="https://api.brandout.ai/api",r=i.endsWith("/api")?`${i}/youtube/saved/${(u==null?void 0:u.id)||"anonymous"}/${a}`:`${i}/api/youtube/saved/${(u==null?void 0:u.id)||"anonymous"}/${a}`;await V.delete(r),P(l=>l.filter(j=>j.id!==a&&j.videoId!==a)),o&&(o.id===a||o.videoId===a)&&(ne(null),X([]),Z(!1));try{const l=localStorage.getItem("savedYoutubeVideos");if(l){const y=JSON.parse(l).filter(S=>S.id!==a&&S.videoId!==a);localStorage.setItem("savedYoutubeVideos",JSON.stringify(y))}}catch(l){console.error("Error updating localStorage:",l)}p({title:"Video deleted",description:"The video has been removed from your saved videos"})}catch(i){console.error("Error deleting from backend:",i),p({title:"Error",description:"Failed to delete video from cloud. Please try again.",variant:"destructive"}),await Ge()}}catch(i){console.error("Error deleting video:",i),p({title:"Error",description:"Failed to delete video. Please try again.",variant:"destructive"}),await Ge()}},Nt=s=>{const t=s.split(`

`).map(a=>a.replace(/^Slide\s*\d+[\s:.]+/i,"").trim()).join(`

`);vs(t),E(t)},bt=()=>{if(!Ce)vs(m);else if(L==="carousel"){const s=Ie.split(`

`).map(t=>t.replace(/^Slide\s*\d+[\s:.]+/i,"").trim()).join(`

`);v(s),E(s)}else v(Ie),E(Ie);Js(!Ce)},yt=async s=>{try{let t=!1;try{const i="https://api.brandout.ai/api",r=i.endsWith("/api")?`${i}/carousel-contents/${s}`:`${i}/api/carousel-contents/${s}`;(await V.delete(r,{params:{userId:(u==null?void 0:u.id)||"anonymous"}})).data.success&&(t=!0)}catch(i){console.error("Error deleting content from backend:",i)}const a=A.filter(i=>i.id!==s);Re(a),localStorage.setItem("savedLinkedInContents",JSON.stringify(a)),p({title:"Content Deleted",description:t?"The content has been removed from your account":"The content has been removed locally"})}catch(t){console.error("Error deleting content:",t),p({title:"Error",description:"Failed to delete content",variant:"destructive"})}},kt=s=>{let t=s.content;if(t=s.content.split(`

`).map(a=>a.replace(/^Slide\s*\d+[\s:.]+/i,"").trim()).join(`

`),v(t),E(t),Ve(s.title),he(s.type),ss(!1),De(!1),s.videoId){const a=ye.find(i=>i.id===s.videoId);a&&(ne(a),a.videoUrl?W.setValue("youtubeUrl",a.videoUrl):a.id&&W.setValue("youtubeUrl",`https://youtube.com/watch?v=${a.id}`)),localStorage.setItem("ai_generated_content_videoId",s.videoId)}localStorage.setItem("ai_generated_content",t),localStorage.setItem("ai_generated_content_timestamp",new Date().toISOString()),p({title:"Content Loaded",description:`The saved ${s.type} content has been loaded`})},St=s=>{const t=s.target.files;if(!t||t.length===0)return;if(O.length+t.length>5){p({title:"Too many files",description:"You can upload a maximum of 5 files",variant:"destructive"});return}const a=52428800,i=Array.from(t).filter(r=>r.size>a);if(i.length>0){p({title:"File too large",description:`${i.length>1?"Some files exceed":"One file exceeds"} the 50MB size limit`,variant:"destructive"});const r=Array.from(t).filter(l=>l.size<=a);Oe([...O,...r])}else{const r=Array.from(t);Oe([...O,...r]),p({title:"Files uploaded",description:`Added ${r.length} file${r.length>1?"s":""}`})}s.target.value=""},Ct=s=>{const t=[...O];t.splice(s,1),Oe(t)},He=()=>{w("/settings/billing")};return e.jsxs("div",{className:"container max-w-6xl py-4 sm:py-8 px-1 sm:px-2 md:px-4 w-full overflow-hidden",children:[N&&e.jsxs("div",{className:"mb-4 sm:mb-6 p-3 sm:p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-2",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-900",children:["Credits ",N.planId!=="expired"?`(${N.planName} Plan)`:""]}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500",children:[N.count||0," / ",N.limit||0," credits used",N.expiresAt&&N.planId!=="expired"&&e.jsxs("span",{className:"ml-2",children:["â€¢ Expires ",Gt(N.expiresAt,"MMM dd, yyyy")]})]})]}),e.jsx("div",{className:"w-full sm:w-48 bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full",style:{width:`${Math.min((N.count||0)/(N.limit||1)*100,100)}%`}})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between mt-2 gap-2",children:[e.jsx("p",{className:"text-xs text-gray-500",children:N.planId!=="expired"?"Each credit can be used for generating either AI content or a carousel request":"Purchase a plan to get credits for AI content and carousel requests"}),(!N.planId||N.planId==="expired")&&e.jsx(g,{variant:"outline",size:"sm",onClick:()=>Ye(!0),className:"text-xs h-7 w-full sm:w-auto mt-2 sm:mt-0",children:"Choose a Plan"})]})]}),e.jsxs("div",{className:"mb-4 sm:mb-8",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold",children:"Request a Carousel"}),e.jsx("p",{className:"text-muted-foreground mt-1 text-xs sm:text-sm md:text-base break-words max-w-[90vw] sm:max-w-none",children:"Provide content from a YouTube video and we'll create a professional carousel for you"})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-4 sm:gap-8 w-full",children:[e.jsx(At,{...W,children:e.jsxs("form",{onSubmit:W.handleSubmit(Ps),className:"space-y-4 sm:space-y-6 w-full max-w-[95vw] lg:max-w-full mx-auto",children:[e.jsxs(te,{className:"w-full",children:[e.jsxs(oe,{className:"px-3 sm:px-6 py-3 sm:py-4",children:[e.jsx(xe,{className:"text-base sm:text-lg",children:"Carousel Details"}),e.jsx(pe,{className:"text-xs sm:text-sm max-w-[90%] break-words whitespace-normal",children:"Provide information about the carousel you'd like us to create"})]}),e.jsxs(G,{className:"space-y-3 sm:space-y-4 px-3 sm:px-6",children:[e.jsx(Ms,{control:W.control,name:"title",render:({field:s})=>e.jsxs(_s,{children:[e.jsx(qs,{className:"text-xs sm:text-sm",children:"Carousel Title"}),e.jsx(Lt,{children:e.jsx(Ke,{placeholder:"Enter a title for your carousel",className:"text-sm h-8 sm:h-10",...s})}),e.jsx(Vs,{className:"text-xs",children:"This will be the title of your published carousel"}),e.jsx(Rs,{className:"text-xs"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{children:e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Content Source"})}),e.jsxs(xs,{defaultValue:"youtube",className:"w-full",children:[e.jsxs(ps,{className:"grid w-full grid-cols-2",children:[e.jsx(ve,{value:"youtube",children:"YouTube"}),e.jsx(ve,{value:"upload",children:"Upload File"})]}),e.jsxs(we,{value:"youtube",className:"space-y-4",children:[e.jsx("div",{children:e.jsx(Ms,{control:W.control,name:"youtubeUrl",render:({field:s})=>e.jsxs(_s,{children:[e.jsx(qs,{className:"text-xs sm:text-sm",children:"Select a Saved Video"}),e.jsxs("div",{className:"relative w-full max-w-[95vw] lg:max-w-full mx-auto",children:[e.jsx(Ds,{className:"absolute left-2 top-2 sm:top-2.5 h-3 w-3 sm:h-4 sm:w-4 text-muted-foreground"}),e.jsx(Ke,{placeholder:"Search by title",className:"pl-7 sm:pl-8 h-8 sm:h-10 text-xs sm:text-sm w-full",value:U,onChange:t=>ae(t.target.value),style:{maxWidth:"100%"}})]}),e.jsx(Vs,{className:"text-xs",children:"Select one of your saved videos to create a carousel"}),e.jsx(Rs,{})]})})}),Q?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mb-4"}),e.jsx("p",{children:"Loading your videos..."})]})}):Ts.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 mt-4 w-full max-w-[95vw] lg:max-w-full mx-auto",children:Ts.map(s=>e.jsxs("div",{className:`border rounded-lg cursor-pointer transition-all hover:shadow-md relative group w-full ${(o==null?void 0:o.id)===s.id?"ring-2 ring-blue-500":""}`,onClick:()=>lt(s),children:[e.jsxs("div",{className:"relative w-full",children:[e.jsx("img",{src:s.thumbnailUrl,alt:s.title,className:"w-full aspect-video object-cover rounded-t-lg",loading:"lazy",style:{maxWidth:"100%",height:"auto"}}),e.jsx("div",{className:"absolute bottom-1 right-1 sm:bottom-2 sm:right-2 bg-black/80 text-white text-[8px] sm:text-xs px-1 py-0.5 rounded",children:s.duration}),(o==null?void 0:o.id)===s.id&&e.jsx("div",{className:"absolute inset-0 bg-blue-500/20 flex items-center justify-center",children:e.jsx("div",{className:"bg-blue-500 text-white p-2 rounded-full",children:e.jsx(K,{className:"h-5 w-5"})})}),(s.transcript||s.formattedTranscript&&s.formattedTranscript.length>0)&&e.jsxs("div",{className:"absolute top-2 left-2 bg-green-500/90 text-white text-xs px-1.5 py-0.5 rounded-full flex items-center gap-1",children:[e.jsx($e,{className:"h-3 w-3 flex-shrink-0"}),e.jsx("span",{className:"truncate max-w-[60px] sm:max-w-none",children:"Transcript"})]}),e.jsx("div",{className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",onClick:t=>t.stopPropagation(),children:e.jsx(g,{variant:"destructive",size:"sm",className:"h-6 w-6 p-0 rounded-full",onClick:t=>wt(s,t),children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 6h18"}),e.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}),e.jsx("path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]})})})]}),e.jsxs("div",{className:"p-2 sm:p-3",children:[e.jsx("h4",{className:"font-medium text-xs sm:text-sm line-clamp-2 break-words max-w-full",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 truncate max-w-[95%]",children:s.channelName}),e.jsx("div",{className:"flex items-center gap-2 mt-1 sm:mt-2 text-xs text-muted-foreground",children:e.jsx("span",{className:"truncate max-w-[100px] sm:max-w-full",children:s.date})}),e.jsx("div",{className:"mt-1 sm:mt-2 pt-1 sm:pt-2 border-t flex justify-end flex-wrap w-full",onClick:t=>t.stopPropagation(),children:fe&&je===s.id?e.jsx("div",{className:"w-full flex justify-center",children:e.jsx(Ue,{className:"h-3 w-3 sm:h-4 sm:w-4 animate-spin text-primary"})}):s.transcript||s.formattedTranscript&&s.formattedTranscript.length>0?e.jsx(Ae,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200 text-[10px] sm:text-xs w-full text-center sm:w-auto py-0.5",children:"Transcript Available"}):e.jsxs(g,{variant:"ghost",size:"sm",onClick:t=>{t.stopPropagation(),cs(s)},className:"text-[10px] sm:text-xs h-6 sm:h-7 px-1.5 sm:px-2 py-0 w-full sm:w-auto max-w-[95%] mx-auto sm:mx-0",children:[e.jsx($e,{className:"h-2.5 w-2.5 sm:h-3 sm:w-3 mr-0.5 sm:mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate max-w-[80px] sm:max-w-none",children:"Get Transcript"})]})})]})]},s.id))}):e.jsx("div",{className:"flex justify-center items-center py-6 sm:py-8 border border-dashed rounded-lg",children:e.jsxs("div",{className:"text-center px-2",children:[e.jsx("p",{className:"mb-2 text-xs sm:text-sm text-muted-foreground",children:"No saved videos found"}),e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>w("/dashboard/scraper"),className:"h-7 sm:h-8 text-xs sm:text-sm px-2 sm:px-3",children:[e.jsx(Ft,{className:"h-3 w-3 sm:h-4 sm:w-4 mr-1 sm:mr-2 flex-shrink-0"}),e.jsx("span",{className:"whitespace-nowrap",children:"Scrape new videos"})]})]})}),se>1&&e.jsx("div",{className:"w-full overflow-x-auto pb-2",children:e.jsxs("div",{className:"flex items-center justify-center mt-4 gap-1 min-w-fit mx-auto",children:[e.jsx(g,{variant:"outline",size:"sm",onClick:()=>xt(),disabled:M===1,className:"h-7 sm:h-8 px-1.5 sm:px-2 text-xs whitespace-nowrap",children:"Previous"}),e.jsx("div",{className:"flex items-center gap-1",children:(()=>{const s=[],t=window.innerWidth<640?3:5,a=Math.floor(t/2);let i=Math.max(1,M-a),r=Math.min(se,i+t-1);r-i+1<t&&(i=Math.max(1,r-t+1)),i>1&&(s.push(e.jsx(g,{variant:M===1?"default":"outline",size:"sm",onClick:()=>ms(1),className:"h-7 sm:h-8 w-7 sm:w-8 p-0 text-xs",children:"1"},"1")),i>2&&s.push(e.jsx("span",{className:"px-0.5 sm:px-1",children:"..."},"start-ellipsis")));for(let l=i;l<=r;l++)s.push(e.jsx(g,{variant:M===l?"default":"outline",size:"sm",onClick:()=>ms(l),className:"h-7 sm:h-8 w-7 sm:w-8 p-0 text-xs",children:l},l));return r<se&&(r<se-1&&s.push(e.jsx("span",{className:"px-0.5 sm:px-1",children:"..."},"end-ellipsis")),s.push(e.jsx(g,{variant:M===se?"default":"outline",size:"sm",onClick:()=>ms(se),className:"h-7 sm:h-8 w-7 sm:w-8 p-0 text-xs",children:se},se))),s})()}),e.jsx(g,{variant:"outline",size:"sm",onClick:()=>ut(),disabled:M===se,className:"h-7 sm:h-8 px-1.5 sm:px-2 text-xs whitespace-nowrap",children:"Next"})]})}),T&&o&&e.jsxs("div",{className:"mt-4 border rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("h3",{className:"text-lg font-medium",children:"Generated Transcript"}),H.length===0&&!fe&&e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>cs(o),className:"flex items-center gap-1",children:[e.jsx($e,{className:"h-4 w-4"}),"Fetch Transcript"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"This transcript will be used to create your carousel slides:"}),fe?e.jsx("div",{className:"py-8 flex items-center justify-center",children:e.jsx(Ue,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):es?e.jsxs("div",{className:"py-4 rounded-md border border-destructive p-4 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(zt,{className:"h-5 w-5 text-destructive"}),e.jsx("h3",{className:"text-destructive font-medium",children:"Transcript Error"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Unable to fetch transcript for this video. This may be because:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm text-muted-foreground mt-2 ml-2 space-y-1",children:[e.jsx("li",{children:"The video does not have captions"}),e.jsx("li",{children:"The transcript service is temporarily unavailable"}),e.jsx("li",{children:"The video creator has disabled captions"})]}),e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>cs(o),className:"mt-4",children:[e.jsx(Mt,{className:"h-4 w-4 mr-2"}),"Retry"]})]}):H.length>0||o!=null&&o.transcript&&o.transcript.length>0?e.jsxs("div",{className:"rounded-md border p-4 mb-4",children:[e.jsx(_t,{className:"h-[160px] sm:h-[200px]",children:e.jsx("p",{className:"text-xs sm:text-sm whitespace-pre-line px-1",children:(o==null?void 0:o.transcript)||(H.length>0?H[0]:"")})}),e.jsxs("div",{className:"mt-4 border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h3",{className:"text-md font-medium flex items-center gap-2",children:[e.jsx(qt,{className:"h-4 w-4 text-amber-500"}),"Generate LinkedIn Content"]}),e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>ss(!0),className:"flex items-center gap-1 border-blue-200 text-blue-700 hover:bg-blue-50",children:[e.jsx(re,{className:"h-4 w-4 text-blue-600"}),"Saved (",A.length,")"]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-3 mb-4",children:ds.map(s=>e.jsxs(g,{variant:"outline",className:"h-auto py-2 sm:py-3 px-2 sm:px-4 flex flex-col items-center text-center",onClick:()=>mt(s.type),disabled:n,children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-primary/10 flex items-center justify-center mb-1 sm:mb-2",children:e.jsx("span",{className:"flex-shrink-0 scale-75 sm:scale-100",children:s.icon})}),e.jsx("span",{className:"text-xs sm:text-sm font-medium line-clamp-1",children:s.title})]},s.type))}),e.jsxs("div",{className:"mt-4 border-t pt-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("h4",{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Qt,{className:"h-4 w-4 text-blue-500"}),"Writing Style Reference (Optional)",Be>0&&e.jsxs(Ae,{variant:"secondary",className:"bg-green-100 text-green-700 text-xs",children:[Be," selected"]})]}),e.jsx(g,{variant:"outline",size:"sm",onClick:()=>ys(!0),className:"text-xs",children:"Select Saved Posts"})]}),is&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(K,{className:"h-4 w-4 text-green-600"}),e.jsxs("span",{className:"text-sm font-medium text-green-700",children:[Be," posts selected as writing style reference"]})]}),e.jsx("div",{className:"max-h-20 overflow-y-auto",children:e.jsxs("p",{className:"text-xs text-green-600 line-clamp-3",children:[is.substring(0,200),"..."]})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"These posts will be used as writing style reference when generating AI content."}),e.jsx(g,{variant:"outline",size:"sm",onClick:()=>{bs(""),ks(0)},className:"text-xs",children:"Clear All"})]})]})]})]})]}):e.jsx("div",{className:"py-4 text-center",children:e.jsx("p",{className:"text-muted-foreground",children:'No transcript available. Click "Get Transcript" to fetch it.'})})]})]}),e.jsx(we,{value:"upload",className:"space-y-4",children:e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-6 text-center",children:[e.jsx(Ke,{type:"file",id:"file-upload",className:"hidden",onChange:rt,accept:".pdf,.ppt,.pptx,.doc,.docx,.jpg,.jpeg,.png"}),e.jsxs(Ze,{htmlFor:"file-upload",className:"cursor-pointer flex flex-col items-center justify-center",children:[e.jsx(hs,{className:"h-8 w-8 text-muted-foreground mb-2"}),e.jsx("h3",{className:"font-medium text-lg",children:$?$.name:"Drag & drop or click to upload"}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"PDF, PowerPoint, or image files"}),!$&&e.jsx(g,{variant:"outline",type:"button",className:"mt-4",onClick:()=>{var s;return(s=document.getElementById("file-upload"))==null?void 0:s.click()},children:"Browse Files"})]}),$&&e.jsxs("div",{className:"mt-4 flex items-center gap-2 justify-center",children:[e.jsx(Ae,{variant:"outline",className:"text-xs py-1 px-2",children:$.type.split("/")[1].toUpperCase()}),e.jsxs(Ae,{variant:"outline",className:"text-xs py-1 px-2",children:[($.size/1024/1024).toFixed(2)," MB"]}),e.jsx(g,{variant:"outline",size:"sm",type:"button",className:"text-xs h-7",onClick:()=>R(null),children:"Remove"})]})]})})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsx(g,{type:"button",onClick:W.handleSubmit(Ps),disabled:ge,className:"flex-1 order-1",children:ge?e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"h-4 w-4 mr-2 animate-spin flex-shrink-0"}),"Submitting..."]}):"Submit Carousel Request"}),e.jsxs(g,{type:"button",variant:"outline",className:"flex gap-1 items-center order-2",onClick:()=>w("/dashboard/templates"),children:[e.jsx(us,{className:"h-4 w-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Browse Templates"})]})]})]})}),e.jsxs(te,{className:"w-full",children:[e.jsxs(oe,{className:"px-3 sm:px-6 py-3 sm:py-4",children:[e.jsx(xe,{className:"text-base sm:text-lg",children:"Preview & Information"}),e.jsx(pe,{className:"text-xs sm:text-sm",children:"See how your carousel might look"})]}),e.jsxs(G,{className:"space-y-4 sm:space-y-6 px-3 sm:px-6",children:[o?e.jsxs("div",{className:"bg-white border rounded-lg overflow-hidden shadow-md",children:[e.jsx("div",{className:"p-2 sm:p-3 border-b",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-blue-100 flex items-center justify-center mr-2 sm:mr-3 flex-shrink-0",children:e.jsx("span",{className:"font-semibold text-blue-600 text-xs sm:text-sm",children:"YT"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("h4",{className:"font-medium text-xs sm:text-sm truncate",children:"Your LinkedIn Profile"}),e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-500 truncate",children:"Content Creator â€¢ Just now"})]})]})}),e.jsx("div",{className:"p-3",children:b?e.jsx("div",{children:L!=null&&L.includes("post")?e.jsx("p",{className:"text-sm whitespace-pre-line",children:b}):L==="carousel"&&e.jsx("div",{className:"aspect-square w-full relative overflow-hidden",children:e.jsxs("div",{className:"absolute inset-0 flex flex-col",children:[e.jsxs("div",{className:"flex-1 flex flex-col justify-center p-2 sm:p-6 bg-gradient-to-br from-blue-50 to-white overflow-hidden",children:[e.jsx("div",{className:"mx-auto max-w-[90%] text-center",children:e.jsx("p",{className:"text-xs sm:text-sm md:text-base lg:text-lg font-semibold leading-tight line-clamp-6 sm:line-clamp-none",children:jt(b,ce)})}),e.jsx("div",{className:"absolute bottom-2 left-2 sm:bottom-3 sm:left-3",children:e.jsx("div",{className:"bg-blue-600 text-white text-[10px] sm:text-xs px-1.5 sm:px-2.5 py-0.5 sm:py-1 rounded flex items-center",children:e.jsx("span",{className:"font-bold",children:"in"})})})]}),e.jsxs("div",{className:"absolute top-1/2 -translate-y-1/2 left-1 right-1 sm:left-2 sm:right-2 flex justify-between",children:[e.jsxs(g,{onClick:it,size:"icon",variant:"ghost",className:"h-6 w-6 sm:h-8 sm:w-8 md:h-10 md:w-10 rounded-full bg-white/90 hover:bg-white border shadow-sm text-gray-700 flex-shrink-0",children:[e.jsx(Vt,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5"}),e.jsx("span",{className:"sr-only",children:"Previous slide"})]}),e.jsxs(g,{onClick:nt,size:"icon",variant:"ghost",className:"h-6 w-6 sm:h-8 sm:w-8 md:h-10 md:w-10 rounded-full bg-white/90 hover:bg-white border shadow-sm text-gray-700 flex-shrink-0",children:[e.jsx(Rt,{className:"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5"}),e.jsx("span",{className:"sr-only",children:"Next slide"})]})]})]})})}):e.jsx("p",{className:"text-sm mb-3",children:o.title})}),L==="carousel"&&e.jsx("div",{className:"border-t",children:e.jsx("div",{className:"flex justify-center p-1 sm:p-2 md:p-3 gap-0.5 sm:gap-1 overflow-x-auto",children:b?ue(b).map((s,t)=>e.jsx("div",{className:`h-1 sm:h-1.5 rounded-full cursor-pointer transition-all flex-shrink-0 ${t===ce?"w-4 sm:w-6 bg-blue-600":"w-1 sm:w-1.5 bg-gray-300 hover:bg-gray-400"}`,onClick:()=>z(t)},t)):Array(7).fill(0).map((s,t)=>e.jsx("div",{className:`h-1 sm:h-1.5 rounded-full cursor-pointer transition-all flex-shrink-0 ${t===ce%7?"w-4 sm:w-6 bg-blue-600":"w-1 sm:w-1.5 bg-gray-300 hover:bg-gray-400"}`,onClick:()=>z(t)},t))})}),e.jsx("div",{className:"border-t",children:e.jsxs("div",{className:"flex items-center justify-around p-1",children:[e.jsxs(g,{variant:"ghost",className:"flex-1 h-7 sm:h-8 md:h-10 rounded-md gap-0.5 sm:gap-1 text-[10px] sm:text-xs text-gray-600 px-0.5 sm:px-1",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-shrink-0",children:[e.jsx("path",{d:"M7 10v12"}),e.jsx("path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z"})]}),e.jsx("span",{className:"hidden sm:inline",children:"Like"})]}),e.jsxs(g,{variant:"ghost",className:"flex-1 h-7 sm:h-8 md:h-10 rounded-md gap-0.5 sm:gap-1 text-[10px] sm:text-xs text-gray-600 px-0.5 sm:px-1",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-shrink-0",children:e.jsx("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),e.jsx("span",{className:"hidden sm:inline",children:"Comment"})]}),e.jsxs(g,{variant:"ghost",className:"flex-1 h-7 sm:h-8 md:h-10 rounded-md gap-0.5 sm:gap-1 text-[10px] sm:text-xs text-gray-600 px-0.5 sm:px-1",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-shrink-0",children:[e.jsx("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),e.jsx("polyline",{points:"16 6 12 2 8 6"}),e.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"15"})]}),e.jsx("span",{className:"hidden sm:inline",children:"Repost"})]}),e.jsxs(g,{variant:"ghost",className:"flex-1 h-7 sm:h-8 md:h-10 rounded-md gap-0.5 sm:gap-1 text-[10px] sm:text-xs text-gray-600 px-0.5 sm:px-1",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"flex-shrink-0",children:[e.jsx("path",{d:"M22 2 11 13"}),e.jsx("path",{d:"m22 2-7 20-4-9-9-4 20-7z"})]}),e.jsx("span",{className:"hidden sm:inline",children:"Send"})]})]})})]}):e.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 sm:p-6 text-center",children:[e.jsx("div",{className:"bg-gray-100 w-12 h-12 sm:w-16 sm:h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(Xt,{className:"h-5 w-5 sm:h-6 sm:w-6 text-gray-500"})}),e.jsx("h3",{className:"text-base sm:text-lg font-medium mb-2",children:"Select a YouTube video"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"A preview of your content will appear here after selecting a video and generating content."})]}),b&&L==="carousel"&&e.jsx("div",{className:"mt-4",children:e.jsxs(g,{onClick:vt,className:"w-full",variant:"outline",children:[e.jsx(us,{className:"mr-2 h-4 w-4"}),"Edit in Carousel Editor"]})}),e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{className:"border rounded-lg p-2 sm:p-3 md:p-4",children:[e.jsx("h3",{className:"font-medium mb-1 sm:mb-2 text-xs sm:text-sm md:text-base",children:"Best Practices for Effective Carousels"}),e.jsxs("ul",{className:"text-[10px] sm:text-xs md:text-sm space-y-1 sm:space-y-2 pl-4 sm:pl-5 list-disc text-muted-foreground",children:[e.jsx("li",{children:"Keep each slide focused on a single key point"}),e.jsx("li",{children:"Use 5-8 slides for optimal engagement"}),e.jsx("li",{children:"Include a clear call to action on the final slide"}),e.jsx("li",{children:"Maintain consistent visual style across all slides"})]})]}),e.jsxs("div",{className:"border rounded-lg p-2 sm:p-3 md:p-4",children:[e.jsx("h3",{className:"font-medium mb-1 sm:mb-2 text-xs sm:text-sm md:text-base",children:"Delivery Timeline"}),e.jsx("p",{className:"text-[10px] sm:text-xs md:text-sm text-muted-foreground",children:"Your carousel will be ready within 24 hours. You'll receive an email notification when it's complete and ready for review."})]})]})]})]})]}),C&&d&&e.jsxs(te,{className:"mt-4",children:[e.jsxs(oe,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsxs("div",{children:[e.jsx(xe,{className:"text-lg",children:(($s=ds.find(s=>s.type===d))==null?void 0:$s.title)||"Generated Content"}),e.jsx(pe,{children:"AI-generated content based on video transcript"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[!n&&m&&e.jsx(g,{variant:"outline",size:"sm",onClick:bt,className:"gap-2",children:Ce?e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"h-4 w-4"}),"Save Edits"]}):e.jsxs(e.Fragment,{children:[e.jsx(Dt,{className:"h-4 w-4"}),"Edit Content"]})}),e.jsx(g,{variant:"ghost",size:"sm",onClick:Ss,children:"âœ•"})]})]}),e.jsx(G,{children:n?e.jsxs("div",{className:"py-12 flex flex-col items-center justify-center",children:[e.jsx(Ue,{className:"h-8 w-8 animate-spin text-primary mb-4"}),e.jsxs("p",{className:"text-muted-foreground",children:["Generating ",(Us=ds.find(s=>s.type===d))==null?void 0:Us.title,"..."]})]}):e.jsx("div",{className:"border rounded-md p-4 bg-muted/20",children:Ce?e.jsx(Os,{value:Ie,onChange:s=>Nt(s.target.value),className:"min-h-[200px] font-mono text-sm",placeholder:"Edit your content here..."}):e.jsx("p",{className:"whitespace-pre-line",children:m})})}),e.jsxs(Le,{className:"flex justify-between border-t pt-4",children:[e.jsx(g,{variant:"outline",onClick:Ss,children:"Close"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(g,{variant:"default",disabled:n||!m,onClick:()=>{m&&(navigator.clipboard.writeText(Ce?Ie:m),p({description:"Content copied to clipboard"}))},children:"Copy Content"})})]})]}),e.jsx(ra,{isOpen:Qs,onClose:()=>ys(!1),onApplySelection:at,selectedPostsCount:Be}),Hs&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg w-full max-w-4xl max-h-[85vh] flex flex-col shadow-xl",children:[e.jsxs("div",{className:"p-4 border-b bg-blue-50 flex items-center justify-between rounded-t-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(re,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-blue-800",children:"Saved Content"}),e.jsxs("p",{className:"text-xs text-blue-600",children:[A.length," total â€¢",A.filter(s=>s.type==="carousel").length," carousels â€¢",A.filter(s=>s.type==="text-post").length," text posts"]})]})]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>ss(!1),children:"âœ•"})]}),e.jsx("div",{className:"border-b bg-gray-50",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-2 gap-2",children:[e.jsxs("div",{className:"flex",children:[e.jsxs(g,{variant:le==="all"?"default":"ghost",size:"sm",onClick:()=>ts("all"),className:"mr-2",children:["All (",A.length,")"]}),e.jsxs(g,{variant:le==="carousel"?"default":"ghost",size:"sm",onClick:()=>ts("carousel"),className:"mr-2 flex items-center gap-1",children:[e.jsx(Qe,{className:"h-3 w-3"}),"Carousels (",A.filter(s=>s.type==="carousel").length,")"]}),e.jsxs(g,{variant:le==="text-post"?"default":"ghost",size:"sm",onClick:()=>ts("text-post"),className:"flex items-center gap-1",children:[e.jsx(Xe,{className:"h-3 w-3"}),"Text Posts (",A.filter(s=>s.type==="text-post").length,")"]})]}),e.jsxs("div",{className:"relative w-full sm:w-64",children:[e.jsx(Ds,{className:"absolute left-2 top-2.5 h-4 w-4 text-gray-400"}),e.jsx(Ke,{placeholder:"Search content...",value:ee,onChange:s=>js(s.target.value),className:"pl-8 h-9 text-sm"})]})]})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:(()=>{let s=le==="all"?A:A.filter(t=>t.type===le);return ee.trim()&&(s=s.filter(t=>t.title.toLowerCase().includes(ee.toLowerCase())||t.content.toLowerCase().includes(ee.toLowerCase())||t.videoTitle&&t.videoTitle.toLowerCase().includes(ee.toLowerCase()))),s.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-center",children:[ee.trim()?e.jsx(ea,{className:"h-16 w-16 text-blue-200 mb-4"}):e.jsx(re,{className:"h-16 w-16 text-blue-200 mb-4"}),e.jsx("p",{className:"text-blue-800 font-medium",children:A.length===0?"No saved content yet":ee.trim()?`No content found for "${ee}"`:`No ${le==="carousel"?"carousel":le==="text-post"?"text post":""} content found`}),e.jsx("p",{className:"text-sm text-blue-600 mt-1",children:A.length===0?"Generate and save content to access it anytime":ee.trim()?"Try a different search term or clear the search":`Try generating some ${le==="carousel"?"carousel":"text post"} content`}),ee.trim()&&e.jsx(g,{variant:"outline",size:"sm",onClick:()=>js(""),className:"mt-3",children:"Clear Search"})]}):e.jsx("div",{className:"space-y-4",children:s.map(t=>e.jsxs("div",{className:"border rounded-lg overflow-hidden border-blue-100 hover:shadow-md transition-shadow",children:[e.jsxs("div",{className:"p-3 bg-blue-50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center gap-2",children:t.type==="carousel"?e.jsxs("div",{className:"flex items-center gap-1 bg-purple-100 text-purple-700 px-2 py-1 rounded-full text-xs font-medium",children:[e.jsx(Qe,{className:"h-3 w-3"}),"Carousel"]}):e.jsxs("div",{className:"flex items-center gap-1 bg-green-100 text-green-700 px-2 py-1 rounded-full text-xs font-medium",children:[e.jsx(Xe,{className:"h-3 w-3"}),"Text Post"]})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900",children:t.title}),e.jsxs("p",{className:"text-xs text-blue-700",children:[t.videoTitle&&`From: ${t.videoTitle} â€¢ `,new Date(t.createdAt).toLocaleDateString()]})]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>yt(t.id),className:"h-8 w-8 p-0 text-red-500 hover:text-red-700 hover:bg-red-50",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M3 6h18"}),e.jsx("path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"}),e.jsx("path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"})]})})})]}),e.jsxs("div",{className:"p-3 bg-white",children:[e.jsx("div",{className:"mb-3",children:t.type==="carousel"?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-2",children:[e.jsx(Qe,{className:"h-3 w-3"}),e.jsxs("span",{children:[ft(t.content)," slides"]})]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:e.jsxs("div",{className:"space-y-3",children:[ue(t.content).slice(0,3).map((a,i)=>e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border-l-4 border-purple-400",children:[e.jsx("div",{className:"flex items-center gap-2 mb-1",children:e.jsxs("span",{className:"text-xs font-medium text-purple-600",children:["Slide ",i+1]})}),e.jsx("p",{className:"text-sm text-gray-700 line-clamp-2",children:a})]},i)),ue(t.content).length>3&&e.jsx("div",{className:"text-center py-2",children:e.jsxs("span",{className:"text-xs text-gray-500",children:["+",ue(t.content).length-3," more slides"]})})]})})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500 mb-2",children:[e.jsx(Xe,{className:"h-3 w-3"}),e.jsx("span",{children:"Text Post"})]}),e.jsx("div",{className:"max-h-40 overflow-y-auto",children:e.jsx("div",{className:"bg-gray-50 rounded-lg p-3 border-l-4 border-green-400",children:e.jsx("p",{className:"text-sm whitespace-pre-line line-clamp-6 text-gray-700",children:t.content})})})]})}),e.jsxs("div",{className:"flex justify-end gap-2 border-t pt-3",children:[e.jsxs(g,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(t.content),p({description:"Content copied to clipboard"})},className:"h-8 border-blue-200 text-blue-700 hover:bg-blue-50",children:[e.jsx(Ot,{className:"h-3 w-3 mr-1"}),"Copy"]}),e.jsxs(g,{variant:"default",size:"sm",onClick:()=>kt(t),className:"h-8 bg-blue-600 hover:bg-blue-700",children:[e.jsx(Wt,{className:"h-3 w-3 mr-1"}),"Load"]})]})]})]},t.id))})})()})]})}),Ks&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-2 sm:p-4",children:e.jsxs(te,{className:"w-full max-w-3xl max-h-[90vh] flex flex-col overflow-hidden",children:[e.jsxs(oe,{className:"border-b",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(xe,{className:"text-base sm:text-lg",children:J===3?"Request Submitted":"Carousel Request Details"}),J!==3&&e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>De(!1),children:"âœ•"})]}),e.jsxs(pe,{className:"text-xs sm:text-sm",children:[J===1&&"Provide additional details for your carousel request",J===2&&"Review your request before submitting",J===3&&"We'll create your carousel within 24 hours"]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[J===1&&e.jsxs(G,{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(Ze,{children:"Carousel Type"}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3",children:Es.map(s=>e.jsxs("div",{className:`border rounded-lg p-3 cursor-pointer transition-all hover:bg-primary-50 ${rs===s.value?"ring-2 ring-primary bg-primary-50":""}`,onClick:()=>Zs(s.value),children:[e.jsx("div",{className:"font-medium",children:s.label}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:s.description})]},s.value))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(Ze,{children:["Additional Files ",e.jsx("span",{className:"text-xs text-muted-foreground",children:"(Optional)"})]}),e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-4",children:[O.length>0?e.jsxs("div",{className:"space-y-3",children:[O.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between bg-muted p-2 rounded-md",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-8 h-8 rounded bg-primary/10 flex items-center justify-center mr-2",children:s.type.includes("image")?e.jsx(Ws,{className:"h-4 w-4 text-primary"}):s.type.includes("pdf")?e.jsx($e,{className:"h-4 w-4 text-primary"}):e.jsx(re,{className:"h-4 w-4 text-primary"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium truncate max-w-[200px]",children:s.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[(s.size/1024/1024).toFixed(2)," MB"]})]})]}),e.jsx(g,{variant:"ghost",size:"sm",onClick:()=>Ct(t),className:"h-8 w-8 p-0 text-muted-foreground",children:"âœ•"})]},t)),O.length<5&&e.jsxs(g,{variant:"outline",onClick:()=>{var s;return(s=ns.current)==null?void 0:s.click()},className:"w-full mt-3",children:[e.jsx(hs,{className:"h-4 w-4 mr-2"}),"Add More Files"]})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx(hs,{className:"h-8 w-8 text-muted-foreground mx-auto mb-2"}),e.jsx("div",{className:"font-medium",children:"Drag and drop or click to upload"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1 mb-3",children:"Upload your logo, brand guidelines, or any other files (max 5 files)"}),e.jsx(g,{variant:"outline",onClick:()=>{var s;return(s=ns.current)==null?void 0:s.click()},children:"Select Files"})]}),e.jsx("input",{ref:ns,type:"file",className:"hidden",multiple:!0,onChange:St,accept:".jpg,.jpeg,.png,.pdf,.doc,.docx,.txt"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(Ze,{children:["Additional Notes ",e.jsx("span",{className:"text-xs text-muted-foreground",children:"(Optional)"})]}),e.jsx(Os,{placeholder:"Any specific requests or instructions for your carousel? (e.g., branding preferences, design elements, content emphasis)",className:"min-h-[80px] sm:min-h-[100px] text-sm",value:We,onChange:s=>Xs(s.target.value)})]})]}),J===2&&e.jsx(G,{className:"p-6 space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-3 bg-muted/30 border-b",children:e.jsx("h3",{className:"font-medium",children:"Selected Video"})}),e.jsxs("div",{className:"p-3 flex items-center gap-3",children:[e.jsx("div",{className:"w-24 sm:w-32 h-16 sm:h-20 bg-black/5 rounded overflow-hidden flex-shrink-0",children:e.jsx("img",{src:(o==null?void 0:o.thumbnailUrl)||(o==null?void 0:o.thumbnail),alt:o==null?void 0:o.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium line-clamp-1",children:o==null?void 0:o.title}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:o==null?void 0:o.channelName})]})]})]}),e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-3 bg-muted/30 border-b",children:e.jsx("h3",{className:"font-medium",children:"Generated Content"})}),e.jsx("div",{className:"p-3",children:e.jsx("div",{className:"max-h-28 sm:max-h-32 overflow-y-auto",children:e.jsx("p",{className:"text-xs sm:text-sm whitespace-pre-line p-1",children:b||m})})})]}),e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-3 bg-muted/30 border-b",children:e.jsx("h3",{className:"font-medium",children:"Carousel Type"})}),e.jsx("div",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ae,{variant:"secondary",className:"capitalize",children:rs}),e.jsx("span",{className:"text-sm text-muted-foreground",children:(As=Es.find(s=>s.value===rs))==null?void 0:As.description})]})})]}),O.length>0&&e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-3 bg-muted/30 border-b",children:e.jsx("h3",{className:"font-medium",children:"Uploaded Files"})}),e.jsx("div",{className:"p-3",children:e.jsx("div",{className:"space-y-2",children:O.map((s,t)=>e.jsxs("div",{className:"flex items-center text-sm",children:[s.type.includes("image")?e.jsx(Ws,{className:"h-3 w-3 text-muted-foreground mr-2"}):s.type.includes("pdf")?e.jsx($e,{className:"h-3 w-3 text-muted-foreground mr-2"}):e.jsx(re,{className:"h-3 w-3 text-muted-foreground mr-2"}),e.jsx("span",{children:s.name}),e.jsxs("span",{className:"text-xs text-muted-foreground ml-2",children:[(s.size/1024/1024).toFixed(2)," MB"]})]},t))})})]}),We&&e.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[e.jsx("div",{className:"p-3 bg-muted/30 border-b",children:e.jsx("h3",{className:"font-medium",children:"Additional Notes"})}),e.jsx("div",{className:"p-3",children:e.jsx("p",{className:"text-sm whitespace-pre-line",children:We})})]})]})}),J===3&&e.jsxs(G,{className:"p-4 sm:p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4 sm:mb-6",children:e.jsx(K,{className:"h-8 w-8 sm:h-10 sm:w-10 text-green-600"})}),e.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-2 sm:mb-3",children:"Request Submitted!"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mb-4 sm:mb-6 max-w-md mx-auto",children:"We've received your carousel request and will start working on it right away. You'll receive an email notification when it's ready, typically within 24 hours."}),e.jsxs("div",{className:"border rounded-lg p-3 sm:p-4 bg-muted/20 mb-4 sm:mb-6 max-w-md mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(Zt,{className:"h-4 w-4 text-muted-foreground mr-2 flex-shrink-0"}),e.jsx("h3",{className:"font-medium text-sm sm:text-base",children:"What happens next?"})]}),e.jsxs("ol",{className:"text-xs sm:text-sm text-left space-y-2 pl-5 sm:pl-6 list-decimal",children:[e.jsx("li",{children:"Our design team will review your request"}),e.jsx("li",{children:"We'll create a professional carousel based on your content"}),e.jsx("li",{children:"You'll receive an email when it's ready to review"}),e.jsx("li",{children:"You can request revisions if needed"})]})]})]})]}),e.jsxs(Le,{className:"border-t p-4 flex justify-between",children:[J===1&&e.jsxs(e.Fragment,{children:[e.jsx(g,{variant:"outline",onClick:()=>De(!1),children:"Cancel"}),e.jsx(g,{onClick:()=>as(2),children:"Continue to Review"})]}),J===2&&e.jsxs(e.Fragment,{children:[e.jsx(g,{variant:"outline",onClick:()=>as(1),children:"Back"}),e.jsx(g,{onClick:pt,disabled:ws,children:ws?e.jsxs(e.Fragment,{children:[e.jsx(Ue,{className:"h-4 w-4 mr-2 animate-spin"}),"Submitting..."]}):"Submit Request"})]}),J===3&&e.jsxs(e.Fragment,{children:[e.jsx("div",{})," ",e.jsx("div",{className:"space-x-3",children:e.jsxs(g,{onClick:()=>w("/dashboard/my-carousels"),className:"gap-2",children:[e.jsx(us,{className:"h-4 w-4"}),"View My Carousels"]})})]})]})]})}),et&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:e.jsxs(te,{className:"w-full max-w-lg",children:[e.jsxs(oe,{children:[e.jsx(xe,{children:"Subscription Required"}),e.jsx(pe,{children:N.count>=N.limit?"You've reached your credit limit.":"A subscription is required to access this feature."})]}),e.jsx(G,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-amber-50 text-amber-800 p-4 rounded-lg text-sm flex items-start gap-2.5",children:[e.jsx("div",{className:"mt-0.5",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"}),e.jsx("path",{d:"M12 9v4"}),e.jsx("path",{d:"M12 17h.01"})]})}),e.jsx("div",{children:N.count>=N.limit?e.jsxs("p",{children:["You have used all ",N.limit," credits from your ",N.planName," plan."]}):!N.planId||N.planId==="expired"?e.jsx("p",{children:"You don't have an active subscription. Please select a plan to continue using this feature."}):e.jsx("p",{children:"Your plan doesn't include access to this feature. Please upgrade to continue."})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs(te,{className:"border-2 border-primary",children:[e.jsxs(oe,{className:"pb-2",children:[e.jsx(xe,{className:"text-base",children:"Basic Plan"}),e.jsx(pe,{children:"$100/month"})]}),e.jsxs(G,{className:"pb-2",children:[e.jsx("div",{className:"text-2xl font-bold",children:"10 Credits"}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"per month"}),e.jsx("div",{className:"border-t my-3"}),e.jsxs("ul",{className:"text-sm space-y-1.5",children:[e.jsxs("li",{className:"flex items-center gap-1.5",children:[e.jsx(K,{className:"h-4 w-4 text-primary"})," AI Content Generation"]}),e.jsxs("li",{className:"flex items-center gap-1.5",children:[e.jsx(K,{className:"h-4 w-4 text-primary"})," Carousel Requests"]}),e.jsxs("li",{className:"flex items-center gap-1.5",children:[e.jsx(K,{className:"h-4 w-4 text-primary"})," Priority Support"]})]})]}),e.jsx(Le,{children:e.jsx(g,{className:"w-full",onClick:He,children:"Choose Basic"})})]}),e.jsxs(te,{children:[e.jsxs(oe,{className:"pb-2",children:[e.jsx(xe,{className:"text-base",children:"Premium Plan"}),e.jsx(pe,{children:"$200/month"})]}),e.jsxs(G,{className:"pb-2",children:[e.jsx("div",{className:"text-2xl font-bold",children:"25 Credits"}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:"per month"}),e.jsx("div",{className:"border-t my-3"}),e.jsxs("ul",{className:"text-sm space-y-1.5",children:[e.jsxs("li",{className:"flex items-center gap-1.5",children:[e.jsx(K,{className:"h-4 w-4 text-primary"})," AI Content Generation"]}),e.jsxs("li",{className:"flex items-center gap-1.5",children:[e.jsx(K,{className:"h-4 w-4 text-primary"})," Carousel Requests"]}),e.jsxs("li",{className:"flex items-center gap-1.5",children:[e.jsx(K,{className:"h-4 w-4 text-primary"})," Priority Support"]}),e.jsxs("li",{className:"flex items-center gap-1.5",children:[e.jsx(K,{className:"h-4 w-4 text-primary"})," White Label Options"]})]})]}),e.jsx(Le,{children:e.jsx(g,{className:"w-full",variant:"outline",onClick:He,children:"Choose Premium"})})]})]}),e.jsx("div",{className:"text-center text-sm text-muted-foreground pt-2",children:e.jsxs("p",{children:["Need a custom plan? ",e.jsx(g,{variant:"link",className:"h-auto p-0",onClick:He,children:"Contact us"})]})})]})}),e.jsxs(Le,{className:"flex justify-between border-t pt-4",children:[e.jsx(g,{variant:"ghost",onClick:()=>Ye(!1),children:"Cancel"}),e.jsx(g,{onClick:He,children:"View All Plans"})]})]})})]})};export{ga as default};
