import{j as e,c as De,h as Ie,a as X,d as Ee,g as pe,f as ce}from"./ui-vendor-yLFRes2f.js";import{r as i,u as Re,d as Ue}from"./react-vendor-DWSrZqKN.js";import{bm as $e,bn as Me,G as de,e as J,a as Be,c,bk as me,b as D,aw as $,g as _e,s as ue,V as Te,R as Fe,H as Le,S as Oe,Y as ze,a0 as Ye,a1 as qe,a2 as Ve,ae as We,aS as T,N as Y,aa as He}from"./index-CisuWjtJ.js";import{f as K,a as M}from"./utils-vendor-DFcOAB1P.js";var q="Checkbox",[Ge,rs]=De(q),[Ke,Q]=Ge(q);function Je(n){const{__scopeCheckbox:p,checked:l,children:d,defaultChecked:u,disabled:o,form:b,name:h,onCheckedChange:x,required:C,value:k="on",internal_do_not_use_render:y}=n,[v,E]=Ee({prop:l,defaultProp:u??!1,onChange:x,caller:q}),[P,j]=i.useState(null),[S,m]=i.useState(null),t=i.useRef(!1),R=P?!!b||!!P.closest("form"):!0,F={checked:v,disabled:o,setChecked:E,control:P,setControl:j,name:h,form:b,value:k,hasConsumerStoppedPropagationRef:t,required:C,defaultChecked:I(u)?!1:u,isFormControl:R,bubbleInput:S,setBubbleInput:m};return e.jsx(Ke,{scope:p,...F,children:Xe(y)?y(F):d})}var he="CheckboxTrigger",xe=i.forwardRef(({__scopeCheckbox:n,onKeyDown:p,onClick:l,...d},u)=>{const{control:o,value:b,disabled:h,checked:x,required:C,setControl:k,setChecked:y,hasConsumerStoppedPropagationRef:v,isFormControl:E,bubbleInput:P}=Q(he,n),j=pe(u,k),S=i.useRef(x);return i.useEffect(()=>{const m=o==null?void 0:o.form;if(m){const t=()=>y(S.current);return m.addEventListener("reset",t),()=>m.removeEventListener("reset",t)}},[o,y]),e.jsx(X.button,{type:"button",role:"checkbox","aria-checked":I(x)?"mixed":x,"aria-required":C,"data-state":ve(x),"data-disabled":h?"":void 0,disabled:h,value:b,...d,ref:j,onKeyDown:ce(p,m=>{m.key==="Enter"&&m.preventDefault()}),onClick:ce(l,m=>{y(t=>I(t)?!0:!t),P&&E&&(v.current=m.isPropagationStopped(),v.current||m.stopPropagation())})})});xe.displayName=he;var Z=i.forwardRef((n,p)=>{const{__scopeCheckbox:l,name:d,checked:u,defaultChecked:o,required:b,disabled:h,value:x,onCheckedChange:C,form:k,...y}=n;return e.jsx(Je,{__scopeCheckbox:l,checked:u,defaultChecked:o,disabled:h,required:b,onCheckedChange:C,name:d,form:k,value:x,internal_do_not_use_render:({isFormControl:v})=>e.jsxs(e.Fragment,{children:[e.jsx(xe,{...y,ref:p,__scopeCheckbox:l}),v&&e.jsx(ge,{__scopeCheckbox:l})]})})});Z.displayName=q;var fe="CheckboxIndicator",be=i.forwardRef((n,p)=>{const{__scopeCheckbox:l,forceMount:d,...u}=n,o=Q(fe,l);return e.jsx(Ie,{present:d||I(o.checked)||o.checked===!0,children:e.jsx(X.span,{"data-state":ve(o.checked),"data-disabled":o.disabled?"":void 0,...u,ref:p,style:{pointerEvents:"none",...n.style}})})});be.displayName=fe;var ye="CheckboxBubbleInput",ge=i.forwardRef(({__scopeCheckbox:n,...p},l)=>{const{control:d,hasConsumerStoppedPropagationRef:u,checked:o,defaultChecked:b,required:h,disabled:x,name:C,value:k,form:y,bubbleInput:v,setBubbleInput:E}=Q(ye,n),P=pe(l,E),j=$e(o),S=Me(d);i.useEffect(()=>{const t=v;if(!t)return;const R=window.HTMLInputElement.prototype,V=Object.getOwnPropertyDescriptor(R,"checked").set,ee=!u.current;if(j!==o&&V){const se=new Event("click",{bubbles:ee});t.indeterminate=I(o),V.call(t,I(o)?!1:o),t.dispatchEvent(se)}},[v,j,o,u]);const m=i.useRef(I(o)?!1:o);return e.jsx(X.input,{type:"checkbox","aria-hidden":!0,defaultChecked:b??m.current,required:h,disabled:x,name:C,value:k,form:y,...p,tabIndex:-1,ref:P,style:{...p.style,...S,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});ge.displayName=ye;function Xe(n){return typeof n=="function"}function I(n){return n==="indeterminate"}function ve(n){return I(n)?"indeterminate":n?"checked":"unchecked"}const je=i.forwardRef(({className:n,...p},l)=>e.jsx(Z,{ref:l,className:de("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...p,children:e.jsx(be,{className:de("flex items-center justify-center text-current"),children:e.jsx(J,{className:"h-4 w-4"})})}));je.displayName=Z.displayName;const ts=()=>{const n=Re(),p=Ue(),{user:l,token:d}=Be(),[u,o]=i.useState(!1),[b,h]=i.useState(null),[x,C]=i.useState(!1),[k,y]=i.useState(!0),[v,E]=i.useState(!1),[P,j]=i.useState(!1),[S,m]=i.useState(!1),[t,R]=i.useState({planId:"expired",planName:"No Plan",status:"expired",expiresAt:null,usedCredits:0,totalCredits:0}),[F,V]=i.useState([{id:"pm-1",type:"card",lastFour:"4242",expiryDate:"04/25",brand:"Visa",isDefault:!0},{id:"pm-2",type:"paypal",email:"user@example.com",isDefault:!1}]),[ee,se]=i.useState([{id:"inv-001",amount:100,date:new Date("2023-10-15"),status:"paid",downloadUrl:"/invoices/inv-001.pdf"},{id:"inv-002",amount:100,date:new Date("2023-09-15"),status:"paid",downloadUrl:"/invoices/inv-002.pdf"},{id:"inv-003",amount:100,date:new Date("2023-08-15"),status:"paid",downloadUrl:"/invoices/inv-003.pdf"}]),[g,ae]=i.useState({cardNumber:"",expiryDate:"",cvc:"",cardholderName:"",isDefault:!0});i.useEffect(()=>{const s=new URLSearchParams(p.search),r=s.get("success"),a=s.get("canceled"),w=s.get("session_id");r==="true"&&w?(console.log("Returned from Stripe with session ID:",w),ie(w).then(()=>{console.log("Session verified successfully")}).catch(f=>{console.error("Error verifying session:",f),c.error("Error verifying your payment. Please contact support if you were charged.")}),n("/settings/billing",{replace:!0})):a==="true"&&(c.info("Payment was canceled. You can try again when ready."),n("/settings/billing",{replace:!0}))},[p,n]);const B=async()=>{var s;try{y(!0);const r=await M.get("https://api.brandout.ai/api/user-limits/me",{headers:{Authorization:`Bearer ${d}`}});if(r.data.success){const a=r.data.data;console.log("User subscription data:",a),R({planId:a.planId||"expired",planName:a.planName||"No Plan",status:a.status||"inactive",expiresAt:a.expiresAt?new Date(a.expiresAt):null,usedCredits:a.count||0,totalCredits:a.limit||0}),m(a.autoPay||!1)}else console.error("Failed to fetch subscription:",(s=r.data)==null?void 0:s.message),R({planId:"expired",planName:"No Plan",status:"inactive",expiresAt:null,usedCredits:0,totalCredits:0})}catch(r){console.error("Error fetching subscription:",r),R({planId:"expired",planName:"No Plan",status:"inactive",expiresAt:null,usedCredits:0,totalCredits:0})}finally{y(!1)}},W=[{id:"trial",name:"Trial",price:20,billingPeriod:"monthly",features:["3 Monthly Credits for AI-Generated Content","Valid for 7 days","Content Scraper","Standard Support"],limitations:{workspaces:1,posts:3,carousels:3}},{id:"basic",name:"Basic",price:100,billingPeriod:"monthly",features:["10 Monthly Credits for AI-Generated Content","Content Scraper","Priority Support","Full Access to Templates"],limitations:{workspaces:1,posts:10,carousels:10},isPopular:!0},{id:"premium",name:"Premium",price:200,billingPeriod:"monthly",features:["25 Monthly Credits for AI-Generated Content","Content Scraper","Priority Support","Full Access to Templates","White Label Options"],limitations:{workspaces:1,posts:25,carousels:25}},{id:"custom",name:"Custom",price:200,billingPeriod:"monthly",features:["Custom Number of AI Credits","Content Scraper","Priority Support","Full Access to Templates","White Label Options","Dedicated Account Manager"],limitations:{workspaces:1,posts:1/0,carousels:1/0}}],re=[{id:"pack-5",credits:5,price:50},{id:"pack-10",credits:10,price:85,isPopular:!0},{id:"pack-20",credits:20,price:160}];i.useEffect(()=>{B()},[]);const A=W.find(s=>s.id===t.planId),te=t.totalCredits>0?t.usedCredits/t.totalCredits*100:0,Ne=[{day:"1",credits:0},{day:"5",credits:2},{day:"10",credits:3},{day:"15",credits:5},{day:"20",credits:7},{day:"25",credits:7},{day:"30",credits:7}],we=async s=>{try{console.log("Updating user plan with:",s),await M.post(`https://api.brandout.ai/api/user-limits/${l==null?void 0:l.id}/update-plan`,s,{headers:{Authorization:`Bearer ${d}`}}),B(),c.success("Your plan has been updated successfully")}catch(r){console.error("Error updating user plan:",r),c.error("Failed to update your plan. Please try again.")}},Ce=async s=>{var r;try{h(s);const a={expired:0,trial:1,basic:2,premium:3,custom:4},w=a[t.planId]||0,L=(a[s]||0)<w,O=t.expiresAt&&new Date(t.expiresAt)>new Date;if(L&&O){c.error("Plan downgrade is not allowed during an active subscription period. You can downgrade once your current subscription expires."),h(null);return}if(s==="trial"){const H=new Date;let G=new Date(H);G.setDate(G.getDate()+7);const oe={planId:"trial",limit:3,expiresAt:G.toISOString(),planName:"Trial"};await we(oe),await B(),c.success(`Successfully changed to ${oe.planName} plan`),h(null);return}const N="https://api.brandout.ai/api",z=N.endsWith("/api")?`${N}/stripe/create-checkout-session`:`${N}/api/stripe/create-checkout-session`;if(!W.find(H=>H.id===s))throw new Error("Invalid plan selected");const ne=t.totalCredits-t.usedCredits,le={planId:s,billingPeriod:u?"annual":"monthly",productType:"subscription",mode:"subscription",recurring:u?"year":"month",remainingCredits:ne>0?ne:0,currentPlanId:t.planId,successUrl:window.location.origin+window.location.pathname+"?success=true&session_id={CHECKOUT_SESSION_ID}",cancelUrl:window.location.origin+window.location.pathname+"?canceled=true"};console.log("Sending plan upgrade request to:",z),console.log("With data:",le);const U=await M.post(z,le,{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});if(console.log("Plan upgrade response:",U.data),U.data&&U.data.url)window.location.href=U.data.url;else if(U.data&&U.data.sessionUrl)window.location.href=U.data.sessionUrl;else throw new Error("No checkout URL returned")}catch(a){console.error("Error changing plan:",a),a.response?(console.error("Response status:",a.response.status),console.error("Response data:",a.response.data),c.error(`Error: ${((r=a.response.data)==null?void 0:r.message)||"Server error"}`)):c.error("Failed to change plan. Please try again."),h(null)}},ke=async s=>{var r;if(!l||!l.id){c.error("You must be logged in to purchase credits");return}h(s);try{const a=re.find(z=>z.id===s),w=(a==null?void 0:a.credits)||parseInt(s.split("-")[1])||0,f="https://api.brandout.ai/api",L=f.endsWith("/api")?`${f}/stripe/create-checkout-session`:`${f}/api/stripe/create-checkout-session`,O={planId:s,productType:"credit-pack",mode:"payment",credits:w,price:a==null?void 0:a.price,successUrl:window.location.origin+window.location.pathname+"?success=true&session_id={CHECKOUT_SESSION_ID}",cancelUrl:window.location.origin+window.location.pathname+"?canceled=true"};console.log("Sending credit pack request to:",L),console.log("With data:",JSON.stringify(O,null,2));const N=await M.post(L,O,{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}});if(console.log("Response from server:",N.data),N.data&&N.data.url)window.location.href=N.data.url;else if(N.data&&N.data.sessionUrl)window.location.href=N.data.sessionUrl;else throw new Error("No checkout URL returned from server")}catch(a){console.error("Error creating checkout session:",a),a.response?(console.error("Response status:",a.response.status),console.error("Response data:",a.response.data),c.error(`Error: ${((r=a.response.data)==null?void 0:r.message)||"Server error"}`)):a.request?c.error("No response received from server. Please check your internet connection."):c.error("Failed to create checkout session. Please try again later."),h(null)}},ie=async s=>{try{const r="https://api.brandout.ai/api",a=r.endsWith("/api")?`${r}/stripe/verify-session`:`${r}/api/stripe/verify-session`,w=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({sessionId:s})}),f=await w.json();if(w.ok&&f.success)await B(),f.productType==="credit-pack"||f.type==="credit-pack"?c.success(`Your payment was successful! ${f.credits||""} credits have been added to your account.`):f.transferredCredits&&f.transferredCredits>0?c.success(`Your plan has been successfully upgraded! ${f.transferredCredits} credits from your previous plan have been transferred.`):c.success("Your plan has been successfully upgraded!");else throw new Error(f.message||"Failed to verify session")}catch(r){console.error("Error verifying session:",r),c.error("Failed to verify payment. Please contact support if your payment was successful.")}};i.useEffect(()=>{const r=new URLSearchParams(window.location.search).get("session_id");r&&(ie(r),window.history.replaceState({},document.title,window.location.pathname))},[]),i.useEffect(()=>{(l==null?void 0:l.role)==="admin"&&E(!0)},[l]);const _=(s,r)=>{ae(a=>({...a,[s]:r}))},Pe=async()=>{try{if(!d){c.error("Authentication required. Please log in again.");return}if(!g.cardNumber||!g.expiryDate||!g.cvc||!g.cardholderName){c.error("Please fill in all card details");return}const s=g.cardNumber.slice(-4),r="https://api.brandout.ai/api",a=r.endsWith("/api")?`${r}/payment-methods`:`${r}/api/payment-methods`;await M.post(a,{type:"card",lastFour:s,expiryDate:g.expiryDate,cardholderName:g.cardholderName,isDefault:g.isDefault},{headers:{Authorization:`Bearer ${d}`,"Content-Type":"application/json"}}),j(!1),c.success("Payment card added successfully"),ae({cardNumber:"",expiryDate:"",cvc:"",cardholderName:"",isDefault:!0}),await B()}catch(s){console.error("Error saving card information:",s),c.error("Failed to save card information. Please try again.")}},Se=()=>{v&&n("/admin/billing")},Ae=async s=>{try{m(s),(await M.post("https://api.brandout.ai/api/users/subscription/auto-pay",{autoPay:s},{headers:{Authorization:`Bearer ${d}`}})).data.success?c.success(`Auto-renewal ${s?"enabled":"disabled"} successfully`):(c.error("Failed to update auto-renewal setting"),m(!s))}catch(r){console.error("Error toggling auto-pay:",r),c.error("Failed to update auto-renewal setting"),m(!s)}};return e.jsxs("div",{className:"w-full pb-12",children:[e.jsxs("div",{className:"relative w-full bg-primary/5 border-b border-primary/10 overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-primary/10",children:e.jsx("div",{className:"h-full bg-primary",style:{width:`${te}%`}})}),e.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-14 h-14 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(me,{className:"w-6 h-6 text-primary"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-black",children:"Billing Dashboard"}),e.jsx("p",{className:"text-black/70",children:"Manage your subscription, credits and payments"})]})]}),v&&e.jsx(D,{variant:"outline",className:"ml-auto",onClick:Se,children:"Admin View"}),A?e.jsx("div",{className:"w-full sm:w-auto py-2 px-4 rounded-lg bg-white border border-primary/10 shadow-sm flex flex-col sm:flex-row items-center gap-4",children:e.jsxs("div",{className:"flex flex-col items-center sm:items-start",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-sm text-black/70",children:"Your Plan:"}),e.jsx("span",{className:"font-semibold text-black",children:A.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{variant:"outline",className:"bg-primary/5 border-primary/10 text-black/70",children:t.status==="cancelled"?"Cancelled":"Active"}),e.jsx("span",{className:"text-xs text-black/50",children:"•"}),e.jsxs("span",{className:"text-xs text-black/70",children:["Renews ",K(t.expiresAt||new Date,"MMM d")]})]})]})}):e.jsx("div",{className:"w-full sm:w-auto py-2 px-4 rounded-lg bg-white border border-primary/10 shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($,{variant:"outline",className:"bg-destructive/10 text-destructive border-destructive/20",children:"No Active Plan"}),e.jsx("span",{className:"text-sm",children:"Choose a plan to get started"})]})})]})})]}),e.jsx("div",{className:"max-w-7xl mx-auto p-4 sm:p-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-primary/10 shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"border-b border-primary/10 px-5 py-4 flex justify-between items-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-black",children:"Credits Usage"}),e.jsx($,{variant:"outline",className:"border-primary/10 text-primary bg-primary/5",children:"This Billing Cycle"})]}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative w-32 h-32",children:[e.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full",children:[e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#e2e8f0",strokeWidth:"10"}),e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"currentColor",strokeWidth:"10",strokeDasharray:"282.7",strokeDashoffset:282.7*(1-te/100),strokeLinecap:"round",className:"text-primary transition-all duration-700 ease-out",transform:"rotate(-90 50 50)"})]}),e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[e.jsx("span",{className:"text-3xl font-bold text-black",children:t.usedCredits}),e.jsx("span",{className:"text-xs text-black/70",children:"Used Credits"})]})]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-center pt-3",children:[e.jsxs("div",{className:"bg-primary/5 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-black/70",children:"Total"}),e.jsx("div",{className:"text-xl font-semibold text-black",children:t.totalCredits})]}),e.jsxs("div",{className:"bg-primary/5 rounded-lg p-3",children:[e.jsx("div",{className:"text-sm text-black/70",children:"Remaining"}),e.jsx("div",{className:"text-xl font-semibold text-black",children:t.totalCredits-t.usedCredits})]})]}),e.jsxs("div",{className:"pt-6 pb-2",children:[e.jsx("div",{className:"text-sm font-medium text-black mb-3",children:"Usage Over Time"}),e.jsx("div",{className:"h-24 flex items-end",children:Ne.map((s,r)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsx("div",{className:"w-4/5 bg-primary/20 hover:bg-primary/40 rounded-t transition-all",style:{height:`${s.credits/t.totalCredits*100}%`}}),e.jsx("div",{className:"text-[10px] text-black/60 mt-1",children:s.day})]},r))})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-primary/10 shadow-sm overflow-hidden",children:[e.jsx("div",{className:"border-b border-primary/10 px-5 py-4",children:e.jsx("h2",{className:"text-lg font-semibold text-black",children:"Need More Credits?"})}),e.jsxs("div",{className:"p-5 space-y-4",children:[e.jsx("div",{className:"space-y-3",children:re.map(s=>e.jsxs("div",{className:`
                      group relative border rounded-xl p-4 transition-all
                      ${s.isPopular?"border-primary bg-primary/5":"border-primary/10 hover:border-primary/30 hover:bg-primary/5"}
                    `,children:[s.isPopular&&e.jsx("div",{className:"absolute -top-2 -right-2 rotate-12",children:e.jsx($,{className:"bg-primary text-white shadow-sm",children:"Best Value"})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(_e,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-black",children:[s.credits," Credits"]}),e.jsxs("div",{className:"text-black/70",children:["$",s.price]})]})]}),e.jsx(D,{variant:"outline",size:"sm",onClick:()=>ke(s.id),disabled:b!==null,className:"border-primary/20 text-primary hover:bg-primary/10",children:b===s.id?e.jsx(ue,{className:"h-4 w-4 animate-spin"}):e.jsx("span",{children:"Buy"})})]})]},s.id))}),e.jsxs("div",{className:"bg-primary/5 text-xs text-black/70 p-3 rounded-lg",children:[e.jsx("p",{children:"Credits expire at the end of your billing cycle or when your plan expires. Each credit can be used for one AI post or carousel."}),e.jsxs("p",{className:"mt-1",children:[e.jsx("span",{className:"font-medium",children:"Note:"})," Additional credits purchased on the trial plan will also expire when your trial ends."]})]}),e.jsx("div",{className:"flex justify-center mt-2",children:e.jsxs(D,{variant:"outline",onClick:()=>j(!0),className:"w-full",children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),"Add Payment Method"]})})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx("div",{className:"bg-white rounded-2xl border border-primary/10 shadow-sm overflow-hidden",children:e.jsxs("div",{className:"border-b border-primary/10 px-5 py-4 flex justify-between items-center flex-wrap gap-2",children:[e.jsx("h2",{className:"text-lg font-semibold text-black",children:"Your Subscription"}),e.jsx("div",{className:"flex items-center justify-center space-x-4 mb-8",children:e.jsx("span",{className:u?"text-gray-500":"font-semibold",children:"Monthly"})}),e.jsx("div",{className:" border border-blue-200 dark:border-blue-800 rounded-lg p-4 text-sm text-blue-800 dark:text-blue-300 mb-6",children:e.jsxs("div",{className:"flex",children:[e.jsx("svg",{className:"h-5 w-5 text-blue-500 mr-2 shrink-0",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e.jsxs("div",{children:[e.jsx("p",{children:"Plan Change Policy:"}),e.jsx("p",{children:"You can upgrade your plan at any time to get immediate access to additional features and credits."}),e.jsx("p",{className:"mt-1",children:"However, downgrades are only possible at the end of your current billing period. If you request a downgrade, it will automatically take effect once your current subscription expires."})]})]})})]})}),e.jsxs("div",{className:"px-5 py-6",children:[A?e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:`
                    border-2 rounded-lg p-5 relative
                    ${t.status==="cancelled"?"border-black/20":"border-primary"}
                  `,children:[t.status!=="cancelled"&&e.jsx("div",{className:"absolute -top-3 left-3 px-2 bg-white",children:e.jsx($,{className:"bg-primary text-white",children:"Current Plan"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-black",children:A.name}),e.jsxs("div",{className:"mt-1 text-xl font-bold text-black",children:["$",A.price,e.jsxs("span",{className:"text-sm font-normal text-black/70",children:["/",A.billingPeriod==="annual"?"year":"month"]})]}),e.jsx("div",{className:"mt-3 text-black/70",children:t.status==="cancelled"?e.jsxs("div",{className:"flex items-center text-black/70",children:[e.jsx(Te,{className:"h-4 w-4 mr-1.5"}),"Access until ",K(t.expiresAt||new Date,"MMMM d, yyyy")]}):e.jsxs("div",{className:"flex items-center text-black/70",children:[e.jsx(Fe,{className:"h-4 w-4 mr-1.5"}),"Renews on ",K(t.expiresAt||new Date,"MMMM d, yyyy")]})})]}),e.jsxs("div",{className:"sm:text-right",children:[e.jsxs("div",{className:"mt-3 bg-primary/5 px-3 py-2 inline-block rounded-lg text-center",children:[e.jsxs("div",{className:"text-sm font-medium text-black",children:[A.limitations.carousels," Credits"]}),e.jsxs("div",{className:"text-xs text-black/70",children:["per ",A.billingPeriod==="annual"?"year":"month"]})]}),t.status!=="cancelled"&&e.jsxs("div",{className:"mt-3 flex justify-end items-center gap-2",children:[e.jsxs("div",{className:"text-sm text-right",children:[e.jsx("span",{className:"font-medium text-black",children:"Auto-renewal"}),e.jsx("p",{className:"text-xs text-black/70",children:S?"Your subscription will automatically renew":"Your subscription will expire at the end of period"})]}),e.jsx(Le,{checked:S,onCheckedChange:Ae,disabled:k})]})]})]})]})}):e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-5 text-center",children:[e.jsx("h3",{className:"text-xl font-bold text-black mb-2",children:"No Active Plan"}),e.jsx("p",{className:"text-black/70 mb-4",children:"Purchase a plan to start using our services"}),e.jsx(D,{onClick:()=>window.location.href="#plans",children:"View Available Plans"})]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-black",children:"Available Plans"}),e.jsx(D,{variant:"ghost",size:"sm",onClick:()=>C(!x),className:"text-primary hover:text-primary/70 hover:bg-primary/5",children:x?"Simple View":"Detailed View"})]}),e.jsx("div",{className:"space-y-4",children:W.map(s=>e.jsxs("div",{className:`
                        relative border rounded-xl transition-all overflow-hidden
                        ${s.id===t.planId?"border-primary":"border-primary/10 hover:border-primary/30"}
                      `,children:[e.jsxs("div",{className:"p-4 gap-4 grid grid-cols-12",children:[e.jsxs("div",{className:"col-span-12 sm:col-span-3 flex flex-row sm:flex-col justify-between sm:justify-start items-center sm:items-start mb-2 sm:mb-0",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2",children:[e.jsx("h4",{className:"text-lg font-semibold text-black",children:s.name}),s.isPopular&&e.jsx($,{className:"bg-primary text-white",children:"Popular"})]}),e.jsx("div",{className:"text-right sm:text-left mt-0 sm:mt-2",children:s.id==="custom"?e.jsx("span",{className:"font-semibold text-black",children:"Custom"}):e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"font-semibold text-black",children:["$",s.price]}),e.jsxs("span",{className:"text-sm text-black/70",children:["/",s.billingPeriod==="annual"?"yr":"mo"]})]})})]}),e.jsx("div",{className:`col-span-12 sm:col-span-6 ${x?"block":"hidden sm:block"}`,children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(Oe,{className:"h-4 w-4 text-primary flex-shrink-0"}),e.jsx("span",{className:"text-sm text-black",children:s.limitations.carousels===1/0?"Unlimited Credits":`${s.limitations.carousels} Credits`})]}),s.features.slice(0,3).map((r,a)=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(J,{className:"h-4 w-4 text-primary flex-shrink-0"}),e.jsx("span",{className:"text-sm text-black truncate",children:r})]},a))]})}),e.jsx("div",{className:"col-span-12 sm:col-span-3 flex justify-end items-center",children:s.id===t.planId?e.jsx($,{variant:"outline",className:"bg-primary/5 border-primary/10 text-primary",children:"Current Plan"}):e.jsx(D,{variant:s.id==="custom"?"outline":"default",size:"sm",disabled:b!==null,onClick:()=>s.id==="custom"?window.open("mailto:sales@yourcompany.com","_blank"):Ce(s.id),className:s.id==="custom"?"border-primary/20 text-primary hover:bg-primary/5":"",children:b===s.id?e.jsx(ue,{className:"h-4 w-4 animate-spin"}):s.id==="custom"?e.jsx("span",{children:"Contact Us"}):s.id==="trial"?e.jsx("span",{children:"Start Trial"}):e.jsx("span",{children:"Upgrade"})})})]}),x&&e.jsx("div",{className:"border-t border-primary/10 bg-primary/5 p-4",children:e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-3",children:s.features.map((r,a)=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(J,{className:"h-4 w-4 text-primary flex-shrink-0"}),e.jsx("span",{className:"text-sm text-black",children:r})]},a))})})]},s.id))})]})]})]})]})}),e.jsx(ze,{open:P,onOpenChange:j,children:e.jsxs(Ye,{children:[e.jsxs(qe,{children:[e.jsx(Ve,{children:"Add Payment Card"}),e.jsx(We,{children:"Add a new payment method to your account"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"cardholderName",children:"Cardholder Name"}),e.jsx(Y,{id:"cardholderName",value:g.cardholderName,onChange:s=>_("cardholderName",s.target.value),placeholder:"John Doe"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"cardNumber",children:"Card Number"}),e.jsx(Y,{id:"cardNumber",value:g.cardNumber,onChange:s=>_("cardNumber",s.target.value.replace(/\D/g,"")),placeholder:"1234 5678 9012 3456",maxLength:16})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"expiryDate",children:"Expiry Date"}),e.jsx(Y,{id:"expiryDate",value:g.expiryDate,onChange:s=>_("expiryDate",s.target.value),placeholder:"MM/YY",maxLength:5})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(T,{htmlFor:"cvc",children:"CVC"}),e.jsx(Y,{id:"cvc",value:g.cvc,onChange:s=>_("cvc",s.target.value.replace(/\D/g,"")),placeholder:"123",maxLength:3})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(je,{id:"defaultCard",checked:g.isDefault,onCheckedChange:s=>_("isDefault",!!s)}),e.jsx(T,{htmlFor:"defaultCard",children:"Set as default payment method"})]})]}),e.jsxs(He,{children:[e.jsx(D,{variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsx(D,{onClick:Pe,children:"Add Card"})]})]})})]})};export{ts as default};
